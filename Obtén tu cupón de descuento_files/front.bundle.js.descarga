!function(){var e,t,n,r={48834:function(e,t,n){"use strict";n.d(t,{Gn:function(){return p},Zp:function(){return f},yf:function(){return g},zU:function(){return _}});n(47042),n(92222),n(41539),n(88674),n(57327),n(2707),n(21249),n(26699),n(32023),n(74916),n(4723),n(54678),n(24603),n(28450),n(88386),n(39714),n(77601),n(15306),n(54747),n(40561),n(85827),n(69826),n(96649),n(96078),n(82526),n(41817),n(9653),n(69070),n(47941),n(38880),n(49337),n(33321),n(32165),n(66992),n(78783),n(33948),n(91038);var r=n(67294),i=n(21478);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={numericOperators:{"<":"Less than","<=":"Equal to or less than","=":"Equal to",">=":"Equal to or greater than",">":"Greater than","<>":"Different from",REGEX:"Regular expression"},textOperators:{like:"Contains","=":"Equal to","^":"Starts with",REGEX:"Regular expression"},multipleOperators:{values:"In a list"},dateOperators:{"<":"Before",">":"After"}},f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null!=(n=m({pages_to_display:9},n)).skip_reset_page&&n.skip_reset_page,a=null!=n.reset_page_on_items_length&&n.reset_page_on_items_length,o=n.limit,s=null!=t?t:100,c=l((0,r.useState)(1),2),u=c[0],d=c[1],p=l((0,r.useState)(1),2),f=p[0],_=p[1],g=l((0,r.useState)([]),2),v=g[0],y=g[1],h=l((0,r.useState)([]),2),b=h[0],E=h[1],w=(0,r.useRef)(0);(0,r.useEffect)((function(){if(e||null!=n.total){var t;t=null!=o&&0!=o?e.slice(0,o):e;var r=null!=n.total?n.total:t.length;if(_(Math.ceil(r/s)),i||a&&t.length==w.current){var l=t.slice((u-1)*s,u*s);E(l)}else w.current=t.length,d(1),E(t.slice(0,s))}}),[e,i,o]),(0,r.useEffect)((function(){var e=[],t=Math.max(u-Math.ceil(n.pages_to_display/2)+1,1),r=Math.min(f,t+n.pages_to_display);r>n.pages_to_display&&r-t<n.pages_to_display&&(t=r-n.pages_to_display);for(var i=t;i<r+1;i++)e.push(i);y(e)}),[u,f]);return[b,{total_pages:f,page:u,pages_arr:v},function(t){var n=e.slice((t-1)*s,t*s);E(n),d(t)}]},_=function(e,t){var n=t||{},i=(0,r.useReducer)((function(e,t){switch(t.type){case"SETDATA":return t.data?m(m({},e),{},{data:t.data.data,indexed:null==n.indexer?{}:w(t.data.data,n.indexer),filtered:k(t.data.data,e.filters),total:null!=t.data.total?t.data.total:e.total,last:t.data.last}):e;case"APPENDDATA":var r=[].concat(o(e.data),o(t.data.data));return m(m({},e),{},{data:r,indexed:null==n.indexer?{}:w(t.data.data,n.indexer,e.indexed),filtered:k(r,e.filters)});case"PREPEND_DATA":var i=[].concat(o(t.data),o(e.data));return m(m({},e),{},{data:i,indexed:null==n.indexer?{}:w(t.data,n.indexer,e.indexed),filtered:k(i,e.filters)});case"SEARCH":var a=h(e.filters,{key:"search",value:t.value}),l=k(e.data,a);return m(m({},e),{},{search:t.value,filters:a,filtered:l});case"SETFILTER":a=h(e.filters,t.filter,t.unique),l=k(e.data,a);return A(l,e.sort),m(m({},e),{},{filters:a,filtered:l});case"SETSORT":var s=t.sort,c=o(e.filtered);return A(c,s),m(m({},e),{},{filtered:c,sort:s});case"APPLYFILTERS":l=k(e.data,e.filters);return A(l,e.sort),m(m({},e),{},{filtered:l});case"APPLYBULK":l=e.filtered.map((function(e){return null!=t.ids?t.ids.includes(e.User.id)?t.bulk(e):e:t.bulk(e)}));return m(m({},e),{},{filtered:l});case"APPLY_ACTION":var u=e.data.map((function(e){return t.match(e)?t.action(e):e})),d=k(u,e.filters);return A(d,e.sort),m(m({},e),{},{data:u,filtered:d});case"APPLYBULK_PARTICIPANT":l=e.filtered.map((function(e){return null!=t.ids?t.ids.includes(e.Participation.id)?t.bulk(e):e:t.bulk(e)}));return m(m({},e),{},{filtered:k(l,e.filters)});case"REMOVE_ENTRY":l=k(e.data.filter((function(e){return e.Participation.id!=t.uid})),e.filters);return A(l,e.sort),m(m({},e),{},{data:e.data.filter((function(e){return e.Participation.id!=t.uid})),filtered:l});case"REMOVE_USER":l=k(e.data.filter((function(e){return e.User.id!=t.uid})),e.filters);return A(l,e.sort),m(m({},e),{},{data:e.data.filter((function(e){return e.User.id!=t.uid})),filtered:l});case"ADDFILTER":a=h(e.filters,t.filter);return m(m({},e),{},{filters:a});case"RESET_FILTERS":return m(m({},e),{},{filters:[],filtered:k(e.data,[]),search:""});case"REMOVEFILTER":a=b(e.filters,t.filter),l=k(e.data,a);return A(l,e.sort),m(m({},e),{},{filters:a,filtered:l});case"SETFILTERED":return m(m({},e),{},{filtered:t.filtered});case"SETLIMIT":return m(m({},e),{},{limit:t.limit})}return e}),{filters:[],indexed:{},search:"",filtered:[],data:e,limit:0}),a=l(i,2),s=a[0],c=a[1];return(0,r.useEffect)((function(){null!=(null==e?void 0:e.data)&&c({type:"SETDATA",data:e})}),[e]),[s,c]},g=function(e,t,n){var a=null!=(n=n||{}).limit?n.limit:100,o=null!=n.pagination?n.pagination:5e3,s=null!=n.fetch_all_disabled&&n.fetch_all_disabled,c=(0,i.aM)(e,(function(){return t(!1,a)}),{refetchOnWindowFocus:!1}).data,u=l(_(c,n),2),m=u[0],d=u[1];return(0,r.useEffect)((function(){if(c&&c.total>a){if(s)return void d({type:"SETDATA",data:c});!function e(n){t(n.last,o).then((function(t){d({type:"APPENDDATA",data:t}),(t.data.length==o||null!=t&&t.hasMore)&&e(t)}))}(c)}d({type:"SETDATA",data:c})}),[c]),[m,d,function(e){!function e(n){t(n.last,o,null==n?void 0:n.offset).then((function(t){d({type:"APPENDDATA",data:t}),(t.data.length==o||null!=t&&t.hasMore)&&e(t)}))}(e)}]},v=function(e,t){switch(isNaN(t)||(t=parseFloat(t)),isNaN(e.value)||(e.value=parseFloat(e.value)),e.operator){case"<>":return t!=e.value;case"=":return t==e.value;case"<":return t<e.value;case"<=":return t<=e.value;case">=":return t>=e.value;case">":return t>e.value;case"REGEX":return reg=new RegExp(e.value,"i"),reg.test(t)}},y=function e(t,n){return(Array.isArray(t)?t:t.split(".")).reduce((function(t,n,r,i){if("*"==n){var a=t.map((function(t){return e(i.slice(r+1),t)}));return i.splice(r),a}if(null!=t)return t[n]}),n)},h=function(e,t){var n=e.find((function(e){return e.key==t.key&&e.operator==t.operator}));return n?""==t.value?e.filter((function(e){return e.key!=t.key})):e.map((function(e){return e.key!=t.key?e:m({},t)})):[].concat(o(e),[m({},t)])},b=function(e,t){return e.filter((function(e){return e.key!=t.key||e.operator!=t.operator}))},E=function(e,t,n,r,i){switch(e){case"numeric":return v({operator:n,value:r},i);case"string":return function(e,t){switch(e.operator){case"<>":return t!=e.value;case"=":return t==e.value;case"REGEX":case"like":default:return new RegExp(e.value,"i").test(t);case"^":return new RegExp("^"+e.value,"i").test(t)}}({operator:n,value:r},i);case"date":return r="="==n?r.split(" ")[0]:r,v({operator:n,value:r},i);case"multiple":return r==i;case"in_array":return i.includes(r);default:var a="regexp"!=n?(""+r).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):r,o=RegExp(a,"i");return"="==n&&(o=RegExp("^"+a+"$")),o.test(i)}return!1},w=function(e,t,n){var r=n||{};return null==e||e.forEach((function(e){t(r,e)})),r},A=function(e,t){t&&e.sort((function(e,n){var r=y(t.field,e),i=y(t.field,n);if("numeric"===t.type)r=parseFloat(r),i=parseFloat(i);var a=r<i?-1:1;return"ASC"==t.direction?a:-1*a}))},k=function(e,t){if(null==e)return e;var n=e.slice(0),r=[],i={};return n=n.filter((function(e){var n=m({},e),r=!0;return t.map((function(t){if(r){var a=null!=t.logic?t.logic:"OR";Array.isArray(t.filter.tier1)||(t.filter.tier1=[t.filter.tier1]);var s=!1,c=!1,u=null,p=[],f=!1;if(t.filter.tier1.forEach((function(i){if(!f){if("function"==typeof i)_=i(e,t);else var m=function(e,t){var n=(Array.isArray(e)?e:e.split(".")).reduce((function(e,t,n,r){if(null!=e)return"*"==t?[e,r[n-1],r.splice(n+1)]:e[t]}),t);return Array.isArray(n)?n:[n]}(i,n),d=l(m,3),_=d[0],g=d[1],v=d[2];if(null!=_){if(u=g,Array.isArray(_)&&"in_array"!=t.filter.type){if("matchNone"==t.filter.type)return 0==_.length?(p=!0,f=!0,void(r=!0)):(p=!1,f=!1,void(r=!1));if("matchAny"==t.filter.type)return _.length>0?(p=!0,f=!0,void(r=!0)):(p=!1,f=!1,void(r=!1));!1===s&&(s=[]);var h=function(e,t){var n=Array.isArray(t.value)?t.value:[t.value],r=n.slice(0);t.key=Array.isArray(t.key)?t.key.join("."):t.key;var i=null==t.logic?"AND":t.logic;return[e.filter((function(e){var a=y(t.key,e),o=!1;return null==a||n.map((function(e){E(t.filter.type,t.key,t.operator,e,a)&&(o=!0,r="AND"==i?r.filter((function(t){return t!=e})):[])})),o})),0==r.length]}(n[g],{filter:t.filter,key:v,operator:t.operator,value:t.value,logic:a}),b=l(h,2),w=b[0],A=b[1];return s=[].concat(o(s),o(w)),void(A&&(c=!0))}var k=Array.isArray(t.value)?t.value:[t.value];t.tier1=Array.isArray(t.key)?t.key.join("."):i,p=!1;var S=!0;"in_array"==t.filter.type&&"has_none"==t.operator&&(0==_.length&&(p=!0,r=!0),S=!1),k.map((function(e){if(!p&&S){var n=E(t.filter.type,0,t.operator,e,_);"AND"!=a||n||(S=!1),"OR"==a&&n&&(p=!0,f=!0,r=!0)}})),"AND"==a&&S&&(p=!0,r=!0),p||(r=!1)}else r=!1}})),!1!==s)if(s.length>0)n=m(m({},n),{},d({},u,s)),c?null==i[n.User.id]&&(i[n.User.id]=1,p.push(n)):r=!1;else{if(r=!1,null==i[n.User.id])return;Array.isArray(p)&&(p=p.filter((function(e){return e.User.id!=n.User.id})))}else{if(null==n.User)return;if(null!=n.User&&null==i[n.User.id])return;Array.isArray(p)&&(p=p.filter((function(e){return e.User.id!=n.User.id})))}}})),r})),r.length>0?r:n}},610:function(e,t,n){"use strict";n.d(t,{x:function(){return ve}});n(82526),n(41817),n(32165),n(66992),n(78783),n(33948),n(91038),n(82772),n(96649),n(96078),n(9653),n(69070),n(38880),n(54747),n(49337),n(33321),n(19601),n(92222),n(21249),n(57327),n(41539),n(26699),n(32023),n(24603),n(28450),n(74916),n(88386),n(39714),n(77601),n(69826),n(47941),n(15306),n(91058),n(47042);var r=n(67294),i=n(55877),a=n(37101),o=n(24445),l=n(73727),s=n(16550),c=n(72898),u=n(89974),m=n(81001),d=n(8937),p=n(3685),f=n(28641),_=n(54949),g=n(23334),v=n(88653),y=n(88519),h=n(75732),b=n(12508),E=n(87674),w=n(74971),A=n(45447),k=n(75035),S=n(20159),C=n(50268),O=n(34526),P=n(1740),x=n(57346),j=n(86375),N=n(39280),T=n(12053),B=n(8573),I=n(22287),z=n(63249),D=n(92536),Z=n(22356),M=n(68257),F=n(61724),R=n(62239),L=n(15466),U=n(87458),q=n(51259);function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}var G=["stage","change"],V=["model","change"],Y=["model","change"],H=["stage","model","change"],Q=["stage","state","change"],J=["stage","state","change"],K=["stage","state","changeTeam"],X=["stage","changeTeam","dispatch","state"],ee=["stage","change","dispatch","state"],te=["stage","change","dispatch","state"],ne=["stage","change","state","preview"],re=["stage","change","state"],ie=["stage","state","dispatch","change"],ae=["base_route"];function oe(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==W(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===W(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _e=(0,a.injectIntl)((0,F.Z)(j.Z)),ge=(0,a.injectIntl)((0,F.Z)(k.Z)),ve=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=de((0,r.useState)(!1),2),a=i[0],o=i[1];return(0,r.useEffect)((function(){n&&$.get("/stages/team_stats/".concat(e,"/").concat(t),(function(e){o(e)}),"JSON")}),[]),a},ye=function(e){if(null==e||0==e.length)return!1;var t=!0,n=!0;return e.map((function(e){var r,i;t&&0==(null!==(r=null==e?void 0:e.sections)&&void 0!==r?r:[]).length&&(t=!1),n&&0==(null!==(i=null==e?void 0:e.candidates)&&void 0!==i?i:[]).length&&(n=!1)})),!(!t||!n)},he=function(e){var t,n,i,a,l=null!==(t=null==e?void 0:e.stage_id)&&void 0!==t&&t;return r.createElement("div",{className:"is_react"},r.createElement("div",{className:"builder_cont"},r.createElement(P.O,{relative_selection:!0,active:"".concat(e.nav_active),sections:null!==(n=null==e?void 0:e.nav_sections)&&void 0!==n?n:[]}),r.createElement(m.Z,{is_adaptable:!1,not_awesome:!0,add_public_css_vars:!1},r.createElement("div",null,(i="This section will be enabled when you have added players and their positions in the team.",(0,o.ex)(i,e.intl,a)),!1!==l&&r.createElement(f.Z,{_class:{other:"gui_not_in_top_small"}},r.createElement(u.Z,{_href:"#stages/".concat(l,"/team/settings")},"Add players and positions"))))))},be=function(e){var t,n,i,a,o,l,s=e.stage,c=e.change,u=me(e,G),d=null!==(t=null==u?void 0:u.is_test)&&void 0!==t&&t,p=!d&&null!=u.is_editing&&u.is_editing,f=null!==(n=null==u?void 0:u.display_empty_message)&&void 0!==n&&n,_=null===(i=null==u?void 0:u.display_ui)||void 0===i||i;if(!1!==f)return r.createElement(m.Z,{fit_to_window:"content",off_content:u.header_message},r.createElement(Z.Z,{promo:u.promotion,is_builder:!0,page:"quiz",menus:u.promo_menu,layout_extra_classes:"is_new_game empty_team_builder",only_contents:!0},r.createElement("div",{style:{width:"100%",height:"100%"}},r.createElement("img",{src:"".concat(window.cdn_url,"img/blank_1x1.png"),width:"100%"}),r.createElement("div",{className:"is_fullscreen relative_to_container empty_game_warning not_awesome orangeBg knk-arrow-l-big"},r.createElement("p",null,f)))));var g={stage:{Stage:ce({},s)},promotion:{Promotion:u.promotion},is_builder:!0,is_editing:p,onTeamChosen:u.onTeamChosen,is_playable:null!==(a=null==u?void 0:u.force_playable)&&void 0!==a?a:d,prizes:u.prizes,players:u.players,given_prize:u.preview,areaChanged:function(e,t){d||s.teams.map((function(n){n.sections.map((function(n){n.id==e&&(n.position=t,c("teams",s.teams))}))}))},initial_state:u.initial_state,current_team:null!==(o=null==u?void 0:u.current_team)&&void 0!==o?o:0};return _?r.createElement(m.Z,{fit_to_window:"content",block_non_contents:!0,off_content:u.header_message},r.createElement(Z.Z,{promo:u.promotion,is_builder:!0,page:"quiz",menus:u.promo_menu,display_header:null!==(l=null==u?void 0:u.display_header)&&void 0!==l?l:null,layout_extra_classes:"is_new_game"},r.createElement(M.Z,g),u.children)):r.createElement(m.Z,{fit_to_window:"content",block_non_contents:!0,extra_classes:"centered_game",off_content:u.header_message},r.createElement(M.Z,le({},g,{display_ui:_,canvas_ref:u.canvas_ref})),u.children)},Ee=function(e){var t,n=e.model,i=e.change,a=me(e,V),l=function(e,t){return(0,o.ex)(e,a.intl,t)},s=de((0,r.useState)(!1),2),c=s[0],u=(s[1],{auto_url:"/promotions/auto_img/".concat(a.promotion_id),auto_type:"stages",display_custom_dragging_instructions:"Upload the image",_size:{width:240,height:288}});return r.createElement(h.Z,{disabled:c},r.createElement(C.Z,{model:n,change:i,errors:null!=a.errors&&(null==a?void 0:a.errors[n.id])},r.createElement(k.Z,{name:"name",_class:{size:60},autotranslate:!1,value:null!==(t=null==n?void 0:n.name)&&void 0!==t?t:l("Player name")},l("***Name")),r.createElement(k.Z,{name:"dorsal",max_length:2,_class:{size:40}},"T-shirt number"),r.createElement(A.hs,le({image:n.full_image,name:"image",small_input:!0},u),"Image")))},we=function(e){var t,n,i=e.model,a=e.change,l=me(e,Y),s=de((0,r.useState)(!1),2),c=s[0],u=(s[1],{auto_url:"/promotions/auto_img/".concat(l.promotion_id),auto_type:"stages",display_custom_dragging_instructions:"Upload the image",_size:{fit:200}});return r.createElement(h.Z,{disabled:c},r.createElement(C.Z,{model:i,change:a,errors:null!=l.errors&&(null==l?void 0:l.errors[i.id])},r.createElement(k.Z,{name:"name",_class:{first:!0,size:50},autotranslate:!1,placeholder:"Your team name"},(t="***Name",(0,o.ex)(t,l.intl,n))),r.createElement(k.Z,{name:"short_name",_class:{size:50},max_length:5},"Short name"),r.createElement(A.hs,le({image:i.full_team_image,name:"team_image",small_input:!0},u),"Team image")))},Ae=function(e){var t,n,i,a,l,s=e.stage,c=e.model,m=e.change,d=me(e,H),p=function(e,t){return(0,o.ex)(e,d.intl,t)},f=de((0,r.useState)(!1),2),_=f[0],g=f[1],y={auto_url:"/promotions/auto_img/".concat(s.promotion_id),auto_type:"stages",display_custom_dragging_instructions:"Upload the image",small_input:!0,_size:{width:240,height:288}};return r.createElement("div",null,r.createElement(C.Z,{model:c,change:m,errors:null!=d.errors&&(null==d?void 0:d.errors[c.id])},r.createElement(k.Z,{name:"name",_class:{size:60},autotranslate:!1},p("***Name")),r.createElement(k.Z,{name:"min",_class:{size:60},placeholder:"1"},"Min. players"),r.createElement(k.Z,{name:"max",_class:{size:60},placeholder:"1"},"Max. players"),"exact"==s.team_scoring&&r.createElement(k.Z,{name:"points",_class:{size:60},placeholder:"1"},"Points per hit"),r.createElement(v.Z,{name:"color",color:null!==(t=null==c?void 0:c.color)&&void 0!==t?t:(0,o.Af)(null!==(n=null==d?void 0:d.promotion)&&void 0!==n?n:{}),_class:{size:60}},"Background color"),r.createElement(v.Z,{name:"text_color",color:null!==(i=null==c?void 0:c.text_color)&&void 0!==i?i:(0,o.Zu)(null!==(a=null==d?void 0:d.promotion)&&void 0!==a?a:{}),_class:{size:60}},"Text color"),r.createElement(A.hs,le({image:c.full_decoration_image,name:"decoration_image",small_input:!0},y,{label_props:{_extra_component:"desktop"==window.platform?r.createElement(u.Z,{onClick:function(){return g(!0)}},"Info"):null}}),"Background image")),r.createElement(O.Z,{items:d.candidates,selected_items:d.candidates.filter((function(e){var t;return(null!==(t=null==c?void 0:c.candidates)&&void 0!==t?t:[]).includes(e.id)})),title:"Players",open_button_label:"Add players",layer_title:"Add players to the position",layer_subtitle:"".concat(p("Section"),": <strong>").concat(null==c?void 0:c.name,"</strong>"),change:d.change_section_players,parent_id:c.id,intl:d.intl,item_icon:"knk-football-team-shirt",deleteItem:function(e){m("candidates",c.candidates.filter((function(t){return t!=e})))},filterFunc:function(e,t){return new RegExp(t,"i").test(e.name+e.dorsal)},formatItemName:function(e){return(0,R.yn)(e,d.intl)}}),_&&r.createElement(q.Z,{sport_type:null!==(l=null==s?void 0:s.team_sport_type)&&void 0!==l?l:"football",close:function(){return g(!1)},design_url:"#stages/".concat(s.id,"/team/design")}))},ke=function(e){var t,n,i,a=e.stage,s=(e.state,e.change),c=me(e,Q),m=function(e,t){return(0,o.ex)(e,c.intl,t)},p=de((0,r.useState)(!1),2),_=p[0],g=p[1],v=null!==(t=null==a?void 0:a.team_sport_type)&&void 0!==t?t:"football",h="";switch(v){case"football":case"basketball":h="knk-".concat(v,"-ball");break;default:h="knk-entries-sided"}var b=null!==(n=null==a?void 0:a.teams)&&void 0!==n?n:[],E=[];b.map((function(e,t){var n,i,a;E.push({title:r.createElement(r.Fragment,null,null!==(n=null==e?void 0:e.name)&&void 0!==n?n:"".concat(m("Team")," #").concat(t+1),r.createElement("span",null," (",r.createElement(u.Z,{onClick:function(){return g(e.id)},autotranslate:!1},m("Edit","lowercase")),")")),id:e.id,icon:h,full_image:null!==(i=null==e?void 0:e.full_team_image)&&void 0!==i?i:null,ribbons:[[{title:c.intl.formatMessage({id:"{total} players in team"},{total:(null!==(a=null==e?void 0:e.candidates)&&void 0!==a?a:[]).length}),color:"gray"}]],description:null!=e.short_name&&""!=e.short_name?"(".concat(e.short_name,")"):null})}));var A=function(e){c.saveStage(e)},k=["team_viewer"];1==E.length?k.push("is_single_team"):k.push("is_vs_teams");var S=1!=E.length;return r.createElement(d.Gs,{pm:c.promoModel,has_tabs:!0,full_main_bg:!1},r.createElement(P.O,{relative_selection:!0,active:"".concat(c.nav_active),sections:null!==(i=null==c?void 0:c.nav_sections)&&void 0!==i?i:[]}),r.createElement("div",{className:"content_builder without_sidebar gui_is_not_padded gui_full_height"},r.createElement("section",{className:"not_awesome"},r.createElement(L.Z,{items:E,_class:k.join(" "),actions:function(e){return r.createElement(r.Fragment,null,r.createElement(l.rU,{to:"/edit/".concat(e,"/candidates"),className:"alone_button gui_flex_submit mainButton gui_pos_rel in_top"},m("Edit players")))},extra_actions:S?function(e){return r.createElement(y.Z,{color:"white",icon:"knk-delete redIcon",onClick:function(){return function(e){if(s("teams",b.filter((function(t){return t.id!=e}))),a.team_result){for(var t in a.team_result)a.team_result[t].team_id==e&&delete a.team_result[t];s("team_result",ce({},a.team_result))}A((function(){}))}(e)}},"Delete team")}:null},1==E.length&&r.createElement("div",{className:"add_team"},r.createElement(T.Z,{icon:"knk-add-item",onClick:function(){return e=Ie(a.team_sport_type),void s("teams",[].concat(oe(b),[Be(a.team_sport_type,1,2,e)]));var e},_class:{other:"is_fullscreen relative_to_container not_circled"}}),r.createElement("p",{className:"add_label"},m("Opponent")))))),!1!==_&&r.createElement(w.Z,{_class:{size:"small"},backButton:function(){return g(!1)}},r.createElement("div",null,r.createElement(B.ZP,null,"Team settings"),r.createElement(we,{model:b.find((function(e){return e.id==_})),promotion_id:a.promotion_id,change:function(e,t){s("teams",a.teams.map((function(n){return n.id!=_?n:ce(ce({},n),{},ue({},e,t))})))},stage:a,errors:{},intl:c.intl}),r.createElement(f.Z,{in_floating:!0},r.createElement(N.Z,{onClick:function(e,t){return A(t)}},"Save changes")))))},Se=function(e){var t,n,i,a=e.stage,o=(e.state,e.change),c=me(e,J),u=(0,s.UO)().id,m="".concat(c.basename,"/edit/").concat(u),d=[{label:"Go back",link:"".concat(c.basename,"/settings"),icon:"knk-go-prev"},{label:"Players",link:"".concat(m,"/candidates"),icon:"knk-users"},{label:"Positions",link:"".concat(m,"/positions"),icon:"knk-city"}],p=a.teams.find((function(e){return e.id==u})),f=function(e){var t=a.teams.map((function(t){return t.id!=u?t:e}));o("teams",t),c.saveStage()},_=0;return a.teams.map((function(e,t){e.id==u&&(_=t)})),r.createElement(r.Fragment,null,r.createElement(l.UT,{basename:m,hashType:"noslash"},r.createElement(s.rs,null,r.createElement(s.AW,{exact:!0,path:"/candidates"},r.createElement(Ce,{stage:a,changeTeam:f,intl:c.intl,nav_sections:d,nav_active:"/candidates",candidates:null!==(t=null==p?void 0:p.candidates)&&void 0!==t?t:[],current_team:_,team:p,promoModel:c.promoModel})),r.createElement(s.AW,{exact:!0,path:"/positions"},r.createElement(Oe,{stage:a,changeTeam:f,intl:c.intl,nav_sections:d,promotion:c.promotion,nav_active:"/positions",candidates:null!==(n=null==p?void 0:p.candidates)&&void 0!==n?n:[],sections:null!==(i=null==p?void 0:p.sections)&&void 0!==i?i:[],current_team:_,team:p,promoModel:c.promoModel})))))},Ce=function(e){var t,n,i,l,s,c=e.stage,u=(e.state,e.changeTeam),f=me(e,K),_=de((0,r.useState)(f.candidates),2),g=_[0],v=_[1],y=null!==(t=null==f?void 0:f.team)&&void 0!==t&&t,h=[];return null!=window.langs&&window.langs.map((function(e){h.push(e.I18nPromotion.lang)})),r.createElement(d.ZP,{pm:f.promoModel},r.createElement(p.Z,{onSave:function(e){var t=ce(ce({},y),{},{candidates:g});if(null!=y.candidates&&g.length!=y.candidates.length){var n,r=function(e,t){var n=!1,r=e.map((function(e){return e.id}));return t.map((function(e){if(null!=e.candidates)return e.candidates=e.candidates.filter((function(e){var t=r.includes(e);return t||(n=!0),t})),e})),!!n&&t}(g,null!==(n=null==y?void 0:y.sections)&&void 0!==n?n:[]);!1!==r&&(t.sections=r)}u(t),e()}},r.createElement(P.O,{relative_selection:!0,active:"".concat(f.nav_active),sections:null!==(n=null==f?void 0:f.nav_sections)&&void 0!==n?n:[]}),r.createElement(S.ZP,{icon:"knk-football-team-shirt",_class:{other:"in_top in_bottom"}},r.createElement("p",null,r.createElement(a.FormattedMessage,{id:"You're editing the players for {team}",values:{team:r.createElement("strong",null,null!==(i=null==y?void 0:y.name)&&void 0!==i?i:"".concat((l="Team",(0,o.ex)(l,f.intl,s))," #").concat(f.current_team))}}))),r.createElement("article",{className:"gui_not_in_top_huge"},r.createElement(b.Z,{section_title:"Players",section_icon:"knk-users",onChange:v,has_translation:!0,locales:h,add_upload:{auto_url:"/promotions/auto_img/".concat(c.promotion_id),auto_type:"stages",contract:{name:"name",image:"image"}},img_size:{width:240,height:288},add_options:["bulk","images"],field_types:[{type:"team_candidate",label:"Add player",translate:[{key:"name",type:"input"}],title:function(e){return(0,R.yn)(e,f.intl)}}],sortable:!0,fields:g,ul_styles:{maxHeight:"calc(100vh - 300px)"},delete_all:!0},r.createElement(Ee,{promotion_id:c.promotion_id,errors:{},intl:f.intl})))),r.createElement(m.Z,{is_adaptable:!1,_bg_styles:{overflowX:"hidden"}},r.createElement("div",{className:"not_awesome"},r.createElement("section",{className:"team_configuration only_list"},r.createElement("ul",{className:"candidates_in_section"},g.map((function(e,t){return r.createElement(R.QY,{key:"candidate_".concat(t),candidate:e,stage:c,only_list:!0},r.createElement(R.Xu,null))})))))))},Oe=function(e){var t,n,i,l=e.stage,s=e.changeTeam,c=(e.dispatch,e.state,me(e,X)),u=function(e,t){return(0,o.ex)(e,c.intl,t)},m=de((0,r.useState)(!1),2),f=(m[0],m[1]),g=de((0,r.useState)(c.sections),2),v=g[0],y=g[1],h=null!==(t=null==c?void 0:c.team)&&void 0!==t?t:{},E=function(e){e.length!=v.length&&(e=e.map((function(e){return delete e.position,e}))),y(e)},w=function(e,t){s(ce(ce({},h),{},ue({},e,t)))},A=[];return null!=window.langs&&window.langs.map((function(e){A.push(e.I18nPromotion.lang)})),r.createElement(d.ZP,{pm:c.promoModel},r.createElement(p.Z,{onSave:function(e){s(ce(ce({},h),{},{sections:v})),e()}},r.createElement(P.O,{relative_selection:!0,active:"".concat(c.nav_active),sections:null!==(n=null==c?void 0:c.nav_sections)&&void 0!==n?n:[]}),r.createElement(S.ZP,{icon:"knk-football-team-shirt",_class:{other:"in_top in_bottom"}},r.createElement("p",null,r.createElement(a.FormattedMessage,{id:"You're editing the positions for {team}",values:{team:r.createElement("strong",null,null!==(i=null==h?void 0:h.name)&&void 0!==i?i:"".concat(u("Team")," #").concat(c.current_team))}}))),r.createElement("article",{className:"gui_not_in_top_huge"},r.createElement(b.Z,{section_title:"Positions",section_icon:"knk-city",onChange:E,has_translation:!0,locales:A,field_types:[{type:"team_section",label:"Add position",translate:[{key:"name",type:"input"}],title:function(e){var t;return null!==(t=null==e?void 0:e.name)&&void 0!==t?t:u("Position")}}],fields:v},r.createElement(Ae,{edit:f,candidates:c.candidates,promotion_id:l.promotion_id,promotion:c.promotion,stage:l,errors:{},intl:c.intl,change_section_players:function(e,t){v.find((function(e){return e.id==t})).candidates=e,E(oe(c.sections))}})),r.createElement(C.Z,{model:h,change:w},r.createElement(k.Z,{name:"num_players",placeholder:"5",_class:{size:50}},"Total players"),v.length>1&&r.createElement(_.Z,{name:"autocollapse_positions"},"Collapse positions by default")))),r.createElement(be,{change:w,stage:l,sections:v,candidates:c.candidates,promotion:c.promotion,promo_menu:c.promoModel.CustomMenus.models,intl:c.intl,is_editing:!1,view:c.view,current_team:c.current_team,initial_state:"chose_team"}))},Pe=function(e){var t,n,i=e.stage,l=e.change,s=(e.dispatch,e.state,me(e,ee)),m=function(e,t){return(0,o.ex)(e,s.intl,t)},_=de((0,r.useState)(i.team_result),2),v=_[0],y=_[1],h=de((0,r.useState)(!1),2),b=h[0],E=h[1],A=de((0,r.useState)(!1),2),k=A[0],O=A[1],x=de((0,r.useState)(!1),2),j=x[0],I=x[1],Z=de((0,r.useState)(!1),2),M=Z[0],F=Z[1],L=de((0,r.useState)(null!=i.team_result),2),U=L[0],q=L[1],W=de((0,r.useState)(0),2),G=W[0],V=W[1],Y=(0,r.useRef)(),H=ve(i.promotion_id,i.id),Q=function(e){var t=Y.current.to_image();$.post((0,o.R8)("/stages/team_result_image/".concat(i.promotion_id,"/").concat(i.id)),{image:t},(function(t){e(t.image,t.full_image)}),"JSON")},J=[];if(i.teams.map((function(e,t){var n,r,i=null!==(n=null==e?void 0:e.short_name)&&void 0!==n?n:null!==(r=null==e?void 0:e.name)&&void 0!==r?r:"";""==i&&(i="".concat(m("Team")," #").concat(t+1)),J.push({label:i,icon:"knk-football-team-shirt",onClick:function(){return V(t)},selected:G==t})})),!ye(i.teams))return r.createElement(he,{stage_id:i.id,nav_active:s.nav_active,nav_sections:s.nav_sections,intl:s.intl});if(!U)return r.createElement(d.ZP,{pm:s.promoModel},r.createElement(p.Z,{onSave:s.saveStage},r.createElement(P.O,{relative_selection:!0,active:"".concat(s.nav_active),sections:null!==(n=null==s?void 0:s.nav_sections)&&void 0!==n?n:[]}),r.createElement(P.Z,{active:G,sections:J,_class:{other:"not_in_builder team_picker_tabs is_not_bordered"},force_show:!0,children_class:"gui_is_not_padded"},r.createElement(f.Z,null,r.createElement(z.Z,{squared:!0,active:M,color:"transparent",icon:"whiteIcon blueBg knk-percent",icon_off:"blueIcon knk-percent",onClick:function(){return F(!M)},tooltip:r.createElement(D.Z,{position:"left",with_icon:!1},M?"Click to sort by T-shirt number":"Click to sort by percentage")}))),r.createElement("article",{className:"result_team_picker"},r.createElement(R.ZP,{key:"list_".concat(G),stage:i,is_builder:!0,team:i.teams[G],promotion:s.promotion,result_pick:!0,onSelect:function(e){var t=ce(ce({},i.team_result||{}),e);y(t)},next:function(e,t){null!=t&&t();var n=ce(ce({},i.team_result||{}),e);if(G<i.teams.length-1)return l("team_result",n),y(n),void V(G+1);setTimeout((function(){Q((function(e,t){l("team_result",n),y(n),l("team_result_image",e),l("full_team_result_image",t),s.saveStage(),q(!0)}))}),200)},players:v,candidate_order:M?"percentage":"id",stats:H}))),r.createElement(be,{change:l,stage:i,players:v,promotion:s.promotion,promo_menu:s.promoModel.CustomMenus.models,intl:s.intl,initial_state:"position_team",display_ui:!1,force_playable:!0,canvas_ref:function(e){return Y.current=e},display_empty_message:0==Object.keys(null!=v?v:{}).length&&m("Please, first select the final team among the players list."),header_message:r.createElement(r.Fragment,null,r.createElement(S.ZP,{title:"Select the players who form the winner team",_class:{other:"in_top in_bottom"}},r.createElement("p",null,m("Participants will score points by matching their team with the winner team.")," ",m("Once you have confirmed the winner team, you will have the options to manage the scoring mode and publish the winner team.")," ",r.createElement("strong",null,m("You can also reset the winner team anytime.")))))},r.createElement("div",{className:"owner_download_btn not_awesome".concat(U?" visible":"")},r.createElement(c.wL,{icon:"knk-download",color:!1,onClick:function(){return e=Y.current.to_image(),(t=document.createElement("a")).href=e,t.download="final_team.jpeg",document.body.appendChild(t),t.click(),void document.body.removeChild(t);var e,t},tooltip:r.createElement(D.Z,{with_icon:!1,position:"top"},"Download image")}))));var K=[{k:"0",v:m("No")},{k:"only_logged",v:m("Yes, only visible to participants")},{k:"all",v:m("Yes, visible to everyone")}];return r.createElement(d.ZP,{pm:s.promoModel},r.createElement(p.Z,{onSave:s.saveStage},r.createElement(P.O,{relative_selection:!0,active:"".concat(s.nav_active),sections:null!==(t=null==s?void 0:s.nav_sections)&&void 0!==t?t:[]}),r.createElement("article",null,r.createElement(C.Z,{model:i,change:l},r.createElement(g.Z,{_class:{first:!0,size:50},name:"team_scoring",values:[{k:"simple",v:"Per player"},{k:"exact",v:"Per player and position"}],label_props:{tooltip:r.createElement(D.Z,{position:"bottom",autotranslate:!1},"<strong>".concat(m("Per player"),":</strong> ").concat(m("1 point will be given for each player who appears in the final team, even if the position does not match."),"<br /><br /><strong>").concat(m("Per player and position"),":</strong> ").concat(m("1 point will be given for each player who appears in the final team and also matches the position.")))}},"Scoring mode")),r.createElement(S.ZP,null,r.createElement("p",null,r.createElement(a.FormattedMessage,{id:"Click on the {button} button to update the points of each participant based on the winner team and the scoring mode.",values:{button:r.createElement("strong",null,m("Recalculate scores"))}}),m("")),r.createElement("p",null,r.createElement(a.FormattedMessage,{id:"To change players of the winner team, click on {link}.",values:{link:r.createElement(u.Z,{onClick:function(){return y({}),l("team_result",""),V(0),void q(!1)}},"reset winner team")}}))),r.createElement("div",{className:"not_in_top"},r.createElement(f.Z,{_class:{other:"gui_flex_end gui_not_in_bottom_small"}},r.createElement(c.ZP,{color:"green",disabled:!U,onClick:function(){return O(!0)}},"Recalculate scores")))),r.createElement("article",{className:"gui_not_in_top_huge"},r.createElement(C.Z,{model:i,change:l},r.createElement(g.Z,{name:"team_results_publish",values:K},"Do you want to publish a page with the winner team?")),null!=i.team_results_publish&&"0"!=i.team_results_publish&&r.createElement(C.Z,{model:i,change:l},r.createElement(ge,{name:"team_results_button",placeholder:m("See winner team")},"Link title to the page"),r.createElement(_e,{name:"team_results_description",placeholder:"<h1>".concat(m("Winner team"),"</h1>")},"Introduction message")))),r.createElement(be,{change:l,stage:i,promotion:s.promotion,promo_menu:s.promoModel.CustomMenus.models,intl:s.intl,initial_state:"winner_team"}),k&&r.createElement(w.Z,{_class:{size:"small"},enable_close:!b,backButton:!1!=!b?function(){return O(!1)}:null},r.createElement("div",null,r.createElement(B.ZP,{_class:{icon:"knk-reload"}},"Recalculate scores for participants"),r.createElement(T.Z,null,"This process might take a while."),r.createElement(T.Z,{autotranslate:!1},r.createElement("strong",null,m("Please don't close this layer or refresh the page until the end confimation appears."))),!1!==j&&r.createElement(S.kk,null,r.createElement("p",null,r.createElement(a.FormattedMessage,{id:"{total} users uploaded",values:{total:j.updated}}))),r.createElement(f.Z,{in_floating:!0},r.createElement(N.Z,{onClick:function(e,t){return function(e){E(!0),$.post((0,o.R8)("/stages/recalculate_team/".concat(i.promotion_id,"/").concat(i.id)),(function(t){setTimeout((function(){I(t),E(!1),null!=e&&e()}),1e3)}),"JSON")}(t)}},"Recalculate scores")))))},xe=function(e){var t,n=e.stage,i=e.change,a=(e.dispatch,e.state,me(e,te));if(!ye(n.teams))return r.createElement(he,{stage_id:n.id,nav_active:a.nav_active,nav_sections:a.nav_sections,intl:a.intl});var l=function(e,t){return(0,o.ex)(e,a.intl,t)},s=ve(n.promotion_id,n.id),c=[{k:"0",v:l("No")},{k:"only_logged",v:l("Yes, only visible to participants")},{k:"all",v:l("Yes, visible to everyone")}];return r.createElement(d.ZP,{pm:a.promoModel},r.createElement(p.Z,{onSave:a.saveStage},r.createElement(P.O,{relative_selection:!0,active:"".concat(a.nav_active),sections:null!==(t=null==a?void 0:a.nav_sections)&&void 0!==t?t:[]}),r.createElement("article",null,r.createElement(C.Z,{model:n,change:i},r.createElement(g.Z,{name:"team_stats_publish",values:c,_class:{first:!0}},"Do you want to publish a page with the statistics?")),null!=n.team_stats_publish&&"0"!=n.team_stats_publish&&r.createElement(C.Z,{model:n,change:i},r.createElement(ge,{name:"team_stats_button",placeholder:l("See statistics")},"Link title to the statistics page"),r.createElement(_e,{name:"team_stats_description",placeholder:"<h1>".concat(l("Statistics"),"</h1>")},"Introduction message")))),r.createElement(be,{change:i,stage:n,promotion:a.promotion,promo_menu:a.promoModel.CustomMenus.models,intl:a.intl,stats:s,initial_state:"public_stats"}))},je=function(e){var t,n,i,a,l,s=e.stage,c=e.change,u=(e.state,e.preview),m=me(e,ne);if(!ye(s.teams))return r.createElement(he,{stage_id:s.id,nav_active:m.nav_active,nav_sections:m.nav_sections,intl:m.intl});var f=function(e,t){return(0,o.ex)(e,m.intl,t)},_=de((0,r.useState)({view_page:"success"}),2),v=_[0],y=_[1],b="<h1>".concat(f("This is your winning team!"),"</h1><p>").concat(f("Share it now with your friends so they can also create their own and take part in the competition."),"</p>"),E="<h1>".concat(f("The team of {name}"),"</h1><p>").concat(f("Want to take part in the competition? Build your own team now in less than 2 minutes."),"</p>"),w=null!==(t=null==m||null===(n=m.promotion)||void 0===n||null===(i=n.config)||void 0===i||null===(a=i.share)||void 0===a?void 0:a.networks)&&void 0!==t?t:{twitter:"1",whatsapp:"1",line:"1",telegram:"1"},A="1"==w.twitter,S="1"==w.whatsapp||"1"==w.line||"1"==w.telegram;return r.createElement(d.ZP,{pm:m.promoModel},r.createElement(p.Z,{onSave:m.saveStage},r.createElement(P.O,{relative_selection:!0,active:"".concat(m.nav_active),sections:null!==(l=null==m?void 0:m.nav_sections)&&void 0!==l?l:[]}),r.createElement(C.Z,{model:v,change:function(e,t){return y(ce(ce({},v),{},ue({},e,t)))}},r.createElement(g.Z,{name:"view_page",values:[{k:"success",v:f("Page after creating the team")},{k:"public_share",v:f("Destination page of the shared link")}],_class:{first:!0}},"Select the page to edit")),"success"==v.view_page&&r.createElement(r.Fragment,null,r.createElement("article",{className:"gui_not_in_top_huge"},r.createElement(C.Z,{model:s,change:c},r.createElement(_e,{name:"main_description",placeholder:b},"Introduction message"),r.createElement(ge,{name:"button_label",placeholder:f("Share")},f("Label for '%s' button").replace("%s",f("Share"))))),r.createElement("article",{className:"gui_not_in_top_huge"},r.createElement("header",{className:"gui_section_header_builder"},r.createElement("h3",{className:"section_title knk-share"},f("Content when sharing"))),r.createElement(C.Z,{model:s,change:c},r.createElement(k.Z,{name:"share_title",max_length:90,label_props:{tooltip:r.createElement(D.Z,null,"This is the title of the publication of the viral message on Facebook. Maximum 90 characters.")}},"Title"),r.createElement(I.Z,{name:"share_description",max_length:255,label_props:{tooltip:r.createElement(D.Z,null,"This is the description of the publication of the viral message on Facebook. Maximum 255 characters.")}},"Description")),r.createElement(h.Z,{disabled:!A,message:"Twitter network must be enabled",link:"#share"},r.createElement(C.Z,{model:s,change:c},r.createElement(I.Z,{name:"share_tweet",max_length:280,label_props:{tooltip:r.createElement(D.Z,null,"This is the text of the tweet of the viral message on Twitter. The shared link will be included automatically at the end of this text.")}},"Tweet"))),r.createElement(h.Z,{disabled:!S,message:"Whatsapp, Telegram or Line networks must be enabled",link:"#share"},r.createElement(C.Z,{model:s,change:c},r.createElement(I.Z,{name:"share_instant",max_length:200,label_props:{tooltip:r.createElement(D.Z,null,"This is the message that users will send through Instant Messaging Apps. The shared link will be automatically included at the end of the mensaje. This option is only available for users connnected via smartphone. Maximum length: 200 characters")}},"Instant Messaging Apps (Whatsapp, Telegram, Line)"))))),"public_share"==v.view_page&&r.createElement("article",{className:"gui_not_in_top_huge"},r.createElement(C.Z,{model:s,change:c},r.createElement(_e,{name:"team_shared_description",placeholder:E},"Introduction message"),r.createElement(ge,{name:"team_shared_button_label",placeholder:f("Build my team")},f("Label for '%s' button").replace("%s",f("Build my team")))))),r.createElement(be,{change:c,stage:s,promotion:m.promotion,promo_menu:m.promoModel.CustomMenus.models,intl:m.intl,preview:u,initial_state:v.view_page,display_header:"success"==v.view_page}))},Ne=function(e){var t,n,i,a,l,s,c=e.stage,u=e.change,m=(e.state,me(e,re));if(!ye(c.teams))return r.createElement(he,{stage_id:c.id,nav_active:m.nav_active,nav_sections:m.nav_sections,intl:m.intl});var f=function(e,t){return(0,o.ex)(e,m.intl,t)},v={auto_url:"/promotions/auto_img/".concat(c.promotion_id),auto_type:"stages",display_custom_dragging_instructions:"Upload the image",small_input:!0,_size:{width:800,height:1200}},y=10,h=[{k:"none",v:"".concat(f("No mask")," (").concat(f("default","lowercase"),")")},{k:"circle",v:f("Circle mask")},{k:"rect",v:f("Square mask")},{k:"shirt",v:f("T-shirt mask")}],b=null!==(t=null===(n=m.promotion)||void 0===n?void 0:n.promo_type)&&void 0!==t?t:"1",E=parseInt(b)<2;return r.createElement(d.ZP,{pm:m.promoModel},r.createElement(p.Z,{onSave:function(e){m.saveStage(e)}},r.createElement(P.O,{relative_selection:!0,active:"".concat(m.nav_active),sections:null!==(i=null==m?void 0:m.nav_sections)&&void 0!==i?i:[]}),r.createElement("article",null,r.createElement(C.Z,{model:c,change:u},r.createElement(A.hs,le({image:""!=c.full_bg_image?c.full_bg_image:void 0,name:"bg_image",_class:{first:!0}},v),"Background image")),r.createElement(C.Z,{model:c,change:function(e,t){u("team_player_scale",Math.round(t)/100)}},r.createElement(x.Z,{min:120,max:350,type:"zoom",name:"team_player_scale",value:100*(null!==(a=null==c?void 0:c.team_player_scale)&&void 0!==a?a:1),default:140,step:10,_class:{size:60}},"Player scale")),r.createElement(C.Z,{model:c,change:u},r.createElement(g.Z,{name:"team_player_style",values:h,_class:{size:60},label_props:{tooltip:r.createElement(D.Z,null,"".concat(f("If the player has an image, the mask will be applied to the player's image. If the player has no image, the mask will apply to the background image of the player's position."),"<br /><br />").concat(f("You can modify this background image from the position settings.")))}},"Player style"),r.createElement(_.Z,{name:"team_hide_member_names",value:null!==(l=null==c?void 0:c.team_hide_member_names)&&void 0!==l&&l},"Hide player names in the field"),r.createElement(_.Z,{name:"team_enable_drag_members",value:null===(s=null==c?void 0:c.team_enable_drag_members)||void 0===s||s,label_props:{tooltip:r.createElement(D.Z,{autotranslate:!1},"".concat(f("By selecting this option, participants will be able to adjust the position of the players on the pitch manually by drag'n'drop. This option is ideal for participants to customise the field formation of their ideal team."),"<br /><br />").concat(f("If you do not select this option, the players will automatically be displayed in the areas you have marked for each position. Participants will not be able to adjust the position of the players.")))}},"Allow manual positioning of players on the pitch"))),r.createElement("article",{className:"gui_not_in_top_huge"},r.createElement("header",{className:"gui_section_header_builder"},r.createElement("h3",{className:"section_title knk-obj-rect"},f("Margins"))),r.createElement(S.ZP,null,r.createElement("p",null,f("Use the margins to block some areas so the players can't overlap there.")),r.createElement("p",null,f("These blocked areas can be used to position some logos or important imformation within the background image.")),r.createElement("p",null,f("You'll see the blocked area in red in the side preview."))),r.createElement(C.Z,{model:c.team_margin,change:function(e,t){null==c.team_margin&&(c.team_margin={top:y,right:y,bottom:y,left:y}),u("team_margin",ce(ce({},c.team_margin),{},ue({},e,t)))}},["top","right","bottom","left"].map((function(e){return r.createElement(x.Z,{key:"margin_".concat(e),min:E&&"bottom"==e?30:0,max:100,name:e,value:null!=c.team_margin?c.team_margin[e]:y,default:y,step:1,_class:{size:60},autotranslate:!1},f("".concat(e," margin"),"ucfirst"))}))))),r.createElement(be,{change:u,stage:c,promotion:m.promotion,promo_menu:m.promoModel.CustomMenus.models,intl:m.intl,initial_state:"position_team",is_editing:!0}))},Te=function(e){var t,n=e.stage,i=(e.state,e.dispatch,e.change),a=me(e,ie),l=de((0,r.useState)(!1),2),s=l[0],u=l[1],m=de((0,r.useState)(0),2),_=m[0],g=m[1];if(!ye(n.teams))return r.createElement(he,{stage_id:n.id,nav_active:a.nav_active,nav_sections:a.nav_sections,intl:a.intl});var v,y;return r.createElement(d.ZP,{pm:a.promoModel},r.createElement(p.Z,null,r.createElement(P.O,{relative_selection:!0,active:"".concat(a.nav_active),sections:null!==(t=null==a?void 0:a.nav_sections)&&void 0!==t?t:[]}),r.createElement("article",null,r.createElement(S.ZP,{_class:{other:"in_top"}},r.createElement("p",null,(v="Score",(0,o.ex)(v,a.intl,y)),": ",r.createElement("strong",null,_))),r.createElement(f.Z,null,r.createElement(c.ZP,{icon:"knk-reload",onClick:function(){return u(-1),g(0),void setTimeout((function(){u(null!=e?e:s)}),0);var e}},"Reset")))),-1==s?null:r.createElement(be,{candidates:a.candidates,change:i,stage:n,promotion:a.promotion,promo_menu:a.promoModel.CustomMenus.models,onTeamChosen:function(e){g(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"exact",r=0;for(var i in t)null!=e[i]&&("exact"==n&&t[i].section_id!=e[i].section_id||r++);return r}(e,n.team_result,n.team_scoring))},is_test:!0,intl:a.intl,preview:s}))},Be=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0;switch(e){case"football":t=[{id:(0,i.v4)(),name:"Goal keeper",type:"team_section",min:"1",max:"1",candidates:[]},{id:(0,i.v4)(),name:"Defenders",type:"team_section",min:"2",max:"4",candidates:[]},{id:(0,i.v4)(),name:"MidFielders",type:"team_section",min:"2",max:"4",candidates:[]},{id:(0,i.v4)(),name:"Strikers",type:"team_section",min:"2",max:"4",candidates:[]}];var o={id:(0,i.v4)(),name:"Team ".concat(n+1),type:"team",candidates:[],sections:t,num_players:11};return a&&(o.sections[0].candidates=a.slice(0,1).map((function(e){return e.id})),o.sections[1].candidates=a.slice(1,5).map((function(e){return e.id})),o.sections[2].candidates=a.slice(5,8).map((function(e){return e.id})),o.sections[3].candidates=a.slice(8,11).map((function(e){return e.id})),o.candidates=a),o;case"basketball":t=[{id:(0,i.v4)(),name:"Guards",type:"team_section",position:{w:"0.6",h:1/3/r,x:"0.2",y:0+.5*n},min:"1",max:"2"},{id:(0,i.v4)(),name:"Forwards",type:"team_section",position:{w:"1",h:1/3/r,x:"0",y:1/3/r+.5*n},min:"1",max:"2"},{id:(0,i.v4)(),name:"Centers",type:"team_section",position:{w:"0.6",h:1/3/r,x:"0.2",y:2/3/r+.5*n},min:"1",max:"2"}];o={id:(0,i.v4)(),name:"Team ".concat(n+1),type:"team",candidates:[],sections:t,num_players:5};return a&&(o.sections[0].candidates=a.slice(0,1).map((function(e){return e.id})),o.sections[1].candidates=a.slice(1,3).map((function(e){return e.id})),o.sections[2].candidates=a.slice(3,6).map((function(e){return e.id})),o.candidates=a),o;default:return o={id:(0,i.v4)(),name:"Team ".concat(n+1),type:"team",candidates:[],sections:[],num_players:10}}},Ie=function(e){var t=11;switch(e){case"football":t=11;break;case"basketball":t=5}for(var n,r=[],a=1;a<t+1;a++)r.push((n=a,{id:(0,i.v4)(),type:"team_candidate",name:"Player ".concat(n),dorsal:n}));return r};(0,a.injectIntl)((function(e){e.base_route;var t=me(e,ae),n=function(e,n){return(0,o.ex)(e,t.intl,n)},i="/stages/".concat(t.stage.id,"/team"),a=[{label:"Go back",link:"/stages/".concat(t.stage.id,"/options"),icon:"knk-go-prev"},{label:"Teams",link:"".concat(i,"/settings"),icon:"knk-users"},{label:"Design",link:"".concat(i,"/design"),icon:"knk-artist-mode"},{label:"Share",link:"".concat(i,"/share"),icon:"knk-share"},{label:"Winner team",link:"".concat(i,"/result"),icon:"knk-on"},{label:"Statistics",link:"".concat(i,"/stats"),icon:"knk-stats"},{label:"Test game",link:"".concat(i,"/test"),icon:"knk-developers"}],u=t.stage;if(null==u.teams){var m=de((0,r.useState)(!1),2),p=m[0],_=m[1],g=de((0,r.useState)(!1),2),v=g[0],y=g[1],h=r.createElement(f.Z,{_class:{other:"gui_flex_center"}},r.createElement(c.ZP,null,"Select")),b=[{title:n("Football"),icon:"knk-football-ball",description:t.intl.formatMessage({id:"Quick preconfiguration for the {sport} team editor."},{sport:n("Football","lowercase")}),enabled:"football"==p,onClick:function(){return _("football")},extra_content:h},{title:n("Basketball"),icon:"knk-basketball-ball",description:t.intl.formatMessage({id:"Quick preconfiguration for the {sport} team editor."},{sport:n("Basketball","lowercase")}),enabled:"basketball"==p,onClick:function(){return _("basketball")},extra_content:h},{title:n("***Other"),icon:"knk-entries-sided",description:n("The editor includes many options to support any sport."),enabled:"other"==p,onClick:function(){return _("other")},extra_content:h}],w=[{title:n("Single team"),icon:"knk-shield",description:n("The user will build only 1 team of a match."),enabled:"single"==v,onClick:function(){return y("single")},extra_content:h},{title:n("Two teams"),custom_icon:r.createElement("span",null,r.createElement("span",{className:"is_icon knk-shield"}),r.createElement("span",{style:{position:"absolute",fontWeight:"bold",paddingBlockStart:"1.3em",paddingInlineStart:"2px"}},"vs"),r.createElement("span",{className:"is_icon knk-shield"})),description:n("The user will build the 2 teams of a match."),enabled:"versus"==v,onClick:function(){return y("versus")},extra_content:h}],A=function(e){!function(e,t,n){for(var r=[],i=1,a={top:"30",right:"30",bottom:"30",left:"30"},o=0;o<t;o++)r.push(Be(e,o,t,Ie(e)));switch(e){case"football":break;case"basketball":i=1.4,a={top:"30",right:"0",bottom:"30",left:"0"}}n("team_player_scale",i),n("team_margin",a),n("team_sport_type",e),n("teams",r)}(p,"versus"==v?2:1,t.change),null!=e&&e()};return r.createElement(d.Gs,{pm:t.promoModel,has_tabs:!0},r.createElement(P.O,{sections:[{label:"Go back",link:"/stages/".concat(t.stage.id,"/options"),icon:"knk-go-prev"}]}),r.createElement("div",{className:"content_builder without_sidebar"},r.createElement("section",{className:"not_awesome"},r.createElement("div",null,r.createElement("div",{className:"gui_section_header in_top alone_section_header cleared_header only_title"},r.createElement(B.ZP,{_class:{other:"in_top"}},"Build your team")),r.createElement("div",null,r.createElement(E.Z,{_class:{other:"in_top"},autotranslate:!1},"1. ",n("Select a sport")),r.createElement(U.Z,{items:b,promotion:{}})),r.createElement("div",{className:"gui_not_in_top_huge"},r.createElement(E.Z,{_class:{other:"in_top"},autotranslate:!1},"2. ",n("Number of teams to build")),r.createElement(U.Z,{items:w,promotion:{}})),r.createElement("div",{className:"gui_not_in_top_big"},r.createElement(f.Z,null,r.createElement(N.Z,{disabled:!1===p||!1===v,onClick:function(e,t){return A(t)},tooltip:!1===p||!1===v?r.createElement(D.Z,{position:"right",with_icon:!1},"First, select above the sport and the number of teams"):null},"Continue")))))))}var k={change:t.change,intl:t.intl,nav_sections:a,stage:u,saveStage:t.saveStage,promotion:t.promotion,promoModel:t.promoModel};return r.createElement(l.UT,{basename:i,hashType:"noslash"},r.createElement(s.rs,null,r.createElement(s.AW,{exact:!0,path:"/settings"},r.createElement(ke,le({},k,{nav_active:"/settings"}))),r.createElement(s.AW,{path:"/edit/:id"},r.createElement(Se,le({},k,{basename:i,nav_active:"/edit"}))),r.createElement(s.AW,{exact:!0,path:"/design"},r.createElement(Ne,le({},k,{nav_active:"/design"}))),r.createElement(s.AW,{exact:!0,path:"/share"},r.createElement(je,le({},k,{nav_active:"/share"}))),r.createElement(s.AW,{exact:!0,path:"/result"},r.createElement(Pe,le({},k,{nav_active:"/result"}))),r.createElement(s.AW,{exact:!0,path:"/stats"},r.createElement(xe,le({},k,{nav_active:"/stats"}))),r.createElement(s.AW,{exact:!0,path:"/test"},r.createElement(Te,le({},k,{nav_active:"/test"})))))}))},8937:function(e,t,n){"use strict";n.d(t,{Gs:function(){return g}});n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),n(47042),n(91038),n(74916),n(77601),n(19601),n(96649),n(96078),n(9653),n(69070),n(47941),n(57327),n(38880),n(54747),n(49337),n(33321);var r=n(67294),i=n(38967),a=n(77943),o=n(29043),l=n(20170);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t,n=null===(t=null==e?void 0:e.has_tabs)||void 0===t||t,i=(null==e?void 0:e.header_props)||{},o=["builder_main",n?"with_tabs":"without_tabs"];return r.createElement(r.Fragment,null,r.createElement(a.Z,i),r.createElement("div",{className:["gui_whole_builder_contents","without_menu"].join(" ")},r.createElement("div",{className:o.join(" ")},e.children)))},_=function(e){var t,n,a,l,s,c,u,p=d((0,r.useState)(!0),2),f=p[0],_=p[1],g=null===(t=null==e?void 0:e.has_tabs)||void 0===t||t,v=(null==e?void 0:e.header_props)||{},y=["gui_whole_builder_contents"];f&&y.push("with_pinned_menu");var h=["builder_main",g?"with_tabs":"without_tabs"];return r.createElement(r.Fragment,null,r.createElement(i.Z,m({},v,{promoType:null!==(n=null===(a=window)||void 0===a?void 0:a.actual_promotion_type)&&void 0!==n?n:null,pm:e.pm})),r.createElement("div",{className:y.join(" ")},r.createElement("div",{className:h.join(" ")},e.children),r.createElement(o.Z,{promoType:null!==(l=null===(s=window)||void 0===s?void 0:s.actual_promotion_type)&&void 0!==l?l:null,pm:e.pm,questions:null!==(c=null==e||null===(u=e.pm)||void 0===u?void 0:u.questions)&&void 0!==c?c:null,onTogglePin:function(e){_(e)}})))},g=function(e){var t,n,i,a=null!==(t=null==e?void 0:e.not_padded)&&void 0!==t&&t,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return null==o.main_classes&&(o.main_classes=""),o.main_classes+=" builder_whole_cont",(null===(n=null==e?void 0:e.full_main_bg)||void 0===n||n)&&(o.main_classes+=" main_bg"),a||(o.main_classes+=" gui_is_padded_huge"),o.has_tabs=null!==(i=null==e?void 0:e.has_tabs)&&void 0!==i&&i,r.createElement(v,o)},v=function(e){var t,n,i=d((0,r.useState)(!0),2),a=i[0],o=i[1];(0,r.useEffect)((function(){o(!1)}),[]);var s=null===(t=null==e?void 0:e.has_tabs)||void 0===t||t,c=[null!=e.main_classes?e.main_classes:"builder_cont"],u=null===(n=null==e?void 0:e.has_promotion)||void 0===n||n?_:f;return r.createElement(u,e,s&&r.createElement("nav",{id:"nav_tabs",style:{position:"relative",zIndex:"1"}}),r.createElement("div",{className:c.join(" ")},!a&&e.children,a&&r.createElement(l.Z,null,"Loading section")))};t.ZP=v},9163:function(e,t,n){"use strict";n.d(t,{F3:function(){return b}});n(82526),n(96649),n(96078),n(41817),n(9653),n(69070),n(38880),n(49337),n(33321),n(32165),n(78783),n(47042),n(91038),n(19601),n(66992),n(41539),n(33948),n(92222),n(57327),n(26699),n(32023),n(21249),n(82772),n(54747),n(24603),n(28450),n(74916),n(88386),n(39714),n(77601),n(69826),n(47941);var r=n(67294),i=n(54949),a=(n(28641),n(10882)),o=(n(12508),n(75035)),l=n(23334);n(74971);var s=n(15945),c=n(50268),u=(n(1740),n(39280),n(22287));n(92536),n(24445);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}var d=["form"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var b=function(e){var t,n,m,_=e.form,g=h(e,d),b=f((0,r.useState)(null!==(t=null==g?void 0:g.user)&&void 0!==t?t:{}),2),E=b[0],w=b[1],A=f((0,r.useState)(null!==(n=null==g?void 0:g.errors)&&void 0!==n?n:{}),2),k=A[0],S=A[1];(0,r.useEffect)((function(){null!=g.user&&w(g.user)}),[g.user]);var C=function(){var e={};_.map((function(t){switch(t.type){case"field":case"checkbox":case"dropdown":null!=t.mandatory&&"false"!=t.mandatory&&(null!=E[t.id]&&""!=E[t.id]||(e[t.id]="This field is mandatory"));break;case"attach":case"date":null!=E[t.id]&&""!=E[t.id]||(e[t.id]="This field is mandatory")}}));var t=function(e,t){var n={};return e.map((function(e){var r=t[e.id];if(null!=e.validation&&0!=e.validation)switch(e.validation){case"1":e.valid_values.split("\n").includes(r)||(n[e.id]="Invalid value");break;case"2":new RegExp(e.regexp,"i").test(r)||(n[e.id]="Invalid value")}null!=e.mandatory&&e.mandatory&&"false"!=e.mandatory&&(null!=t[e.id]&&""!=t[e.id]||null!=e.short_title&&null!=t[e.short_title]&&""!=t[e.short_title]||(n[e.id]="This field cannot be empty"))})),n}(_,E),n=v(v({},e),t);return S(n),0==Object.keys(n).length};(0,r.useEffect)((function(){var e=C();null!=g.onChange&&g.onChange(E,e)}),[E]);var O=null==g.showFormErrors||g.showFormErrors;if(0==_.length||0==Object.keys(_).length)return null;var P=function(e,t){null!=g.fileUpload&&g.fileUpload(e,t,(function(e){w((function(n){var r=v(v({},n),{},y({},t.id,e.full));return t.short_title&&(r[t.short_title]=e.full),r}))}))},x=null!==(m=null==g?void 0:g.public_form)&&void 0!==m&&m;return r.createElement(c.Z,{classname:g.model_classes,model:E,change:function(e,t){var n=_.find((function(t){return t.id==e}));n&&"attach"==n.type&&null!=t?P(t,n):(n&&"date"==n.type&&null!=t&&(t="".concat(t.year,"-").concat(t.month,"-").concat(t.day," 00:00:00")),w((function(r){var i=v(v({},r),{},y({},e,t));return n.short_title&&(i[n.short_title]=t),i})))},errors:O?k:{},use_wrapper:g.use_wrapper},_.map((function(e){var t,n,c=(t=e,null==(n=g.loc)||null==t.loc||null==t.loc[n]?t:v(v({},t),t.loc[n])),m={label_props:{_class:{other:"hb_secondaryFont"}},key:c.id,name:c.id,mandatory:c.mandatory};switch(null!=g.extra_field_props&&(m=v(v({},m),g.extra_field_props)),c.type){case"field":return!(null==c||!c.large||"false"==c.large||"0"==c.large)?r.createElement(u.Z,m,c.title):r.createElement(o.Z,m,c.title);case"dropdown":var d=[{k:"",v:"---"}];return d=null!=c.values?d.concat(c.values.split("\n").filter((function(e){return""!=e})).map((function(e){return{k:e,v:e}}))):d,r.createElement(l.Z,p({values:d},m),c.title);case"checkbox":var f=null==E[c.id]?null!=c.checked&&c.checked:E[c.id],_=x?i.X:i.Z;return r.createElement(_,p({value:f},m),c.title);case"date":return r.createElement(a.Z,p({min_year:c.min_year,max_year:c.max_year},m),c.title);case"attach":var y=[];switch(c.mediatype){case"text":y=["DOC","TXT"];break;case"image":y=["JPEG","PNG","GIF"];break;case"audio":y=["MP3"];break;case"application":y=["PDF"];break;default:y=["JPEG","PNG","GIF","MP3","PDF","DOC","TXT"]}return m.file=null!=E[c.id]?E[c.id]:"",r.createElement(s.Z,p({allowed:c.mediatype,change:P,_accepted_formats:y},m),c.title)}})))}},34526:function(e,t,n){"use strict";n(24603),n(28450),n(74916),n(88386),n(39714),n(77601),n(26699),n(32023),n(92222),n(57327),n(41539),n(21249),n(82526),n(41817),n(32165),n(66992),n(78783),n(33948),n(47042),n(91038),n(19601);var r=n(67294),i=n(37101),a=n(24445),o=n(20379),l=n(72898),s=n(28641),c=n(88519),u=n(87674),m=n(74971),d=n(8573),p=n(12053),f=n(96029);n(75035);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function g(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e,t){return new RegExp(t,"i").test(e.name)},E=function(e){var t,n,i,a,o=null!==(t=null==e?void 0:e.status)&&void 0!==t&&t,l=null===(n=null==e?void 0:e.show_actions)||void 0===n||n,c=null!==(i=null==e?void 0:e.custom_actions)&&void 0!==i&&i,u=["gui_sortable_list_item","gui_flexbox","gui_flex_start","gui_flex_col","gui_flex_nowrap","gui_flex_align_center"];return null!==(a=null==e?void 0:e.is_empty)&&void 0!==a&&a&&u.push("is_empty"),r.createElement("li",{className:u.join(" ")},r.createElement("div",{className:"item_header"},r.createElement("div",{className:"item_title_container"},e.children),l&&r.createElement(s.Z,null,o?e.button_on:e.button_off),c&&r.createElement(s.Z,null,c)))},w=function(e){var t,n,i,c,u,_,y,h,w,A,k,S=v((0,r.useState)(null!==(t=null==e?void 0:e.selected_items_ids)&&void 0!==t?t:[]),2),C=S[0],O=S[1],P=v((0,o.yo)(e.items,null!==(n=null==e?void 0:e.filterFunc)&&void 0!==n?n:b),2),x=P[0],j=P[1],N=v((0,r.useState)(null===(i=e.display_all_in)||void 0===i||i),2),T=N[0],B=(N[1],v((0,r.useState)(null===(c=e.display_all_out)||void 0===c||c),2)),I=B[0],z=(B[1],function(e){C.includes(e)?O((function(t){return t.filter((function(t){return t!=e}))})):O((function(t){return[].concat(g(t),[e])}))});return r.createElement(m.Z,{_class:{size:"small"},backButton:e.close},r.createElement("div",{className:"tabs_in_layer stage_list_with_tabs"},r.createElement(d.ZP,null,null!==(u=null==e?void 0:e.layer_title)&&void 0!==u?u:"Add items"),null!=e.layer_subtitle&&""!=e.layer_subtitle&&r.createElement(p.Z,{autotranslate:!1},e.layer_subtitle),r.createElement("div",{className:"gui_flexbox_auto gui_flex_space_between gui_not_in_bottom"},(T||I)&&r.createElement(s.Z,null,T&&r.createElement(l.ZP,{icon:null!==(_=null==e?void 0:e.all_in_icon)&&void 0!==_?_:"knk-plus",onClick:function(){O((function(e){return x.map((function(e){return e.id}))}))}},null!==(y=null==e?void 0:e.all_in_label)&&void 0!==y?y:"All in"),I&&r.createElement(l.ZP,{icon:null!==(h=null==e?void 0:e.all_out_icon)&&void 0!==h?h:"knk-minus",onClick:function(){O((function(e){return[]}))}},null!==(w=null==e?void 0:e.all_out_label)&&void 0!==w?w:"All out")),r.createElement(f.Z,{name:"search",_class:{first:!0},change:function(e,t){j(t)}})),x.length>0&&r.createElement("ul",{className:"gui_overflowable list_with_tabs"},x.map((function(t,n){var i,a=C.includes(t.id),o=null!==(i=null==e?void 0:e.item_icon)&&void 0!==i?i:"knk-arrow-r-big";!1===o&&(o="without_icon");var s=t.name;return null!=e.formatItemName&&(s=e.formatItemName(t,e.intl)),r.createElement(E,{key:"item_".concat(n),status:a,button_on:r.createElement(l.wL,{color:"red",icon:"knk-off",onClick:function(){return z(t.id)}}),button_off:r.createElement(l.ZP,{color:"green",icon:"knk-add-item",onClick:function(){return z(t.id)}},"Select")},r.createElement("strong",{className:"".concat(o," item_title cutTextOnOverflow")},r.createElement("span",null,s)))}))),x.length<1&&r.createElement("ul",{className:"list_with_tabs"},r.createElement(E,{show_actions:!1},r.createElement("span",{className:"without_icon item_title cutTextOnOverflow"},(A="There are no results.",(0,a.ex)(A,e.intl,k))),r.createElement("span",{className:"additional_info"},""))),r.createElement(s.Z,{in_floating:!0},r.createElement(l.ZP,{onClick:function(){return e.confirmSelection(C)}},"Confirm"),r.createElement(l.kq,{onClick:function(){return e.close()}},"Close"))))};t.Z=(0,i.injectIntl)((function(e){var t,n,i,o,m,d,p=v((0,r.useState)(!1),2),f=p[0],g=p[1],y=null!==(t=null==e?void 0:e.selected_items)&&void 0!==t?t:[],h=null!==(n=null==e?void 0:e.empty_message)&&void 0!==n&&n,b=[];return y.map((function(e){b.push(e.id)})),r.createElement("div",{className:"gui_not_in_top list_in_list"},r.createElement("div",{className:"gui_section_header_builder"},r.createElement(u.Z,{_class:{other:"block_title"}},null!==(i=null==e?void 0:e.title)&&void 0!==i?i:"Items"),r.createElement(s.Z,null,r.createElement(l.ZP,{_class:{other:"addButton"},onClick:function(){return g(!0)}},null!==(o=null==e?void 0:e.open_button_label)&&void 0!==o?o:"Add items"))),r.createElement("ul",{className:"gui_overflowable list_with_tabs"},y.map((function(t,n){var i,a=null!==(i=null==e?void 0:e.item_icon)&&void 0!==i?i:"knk-arrow-r-big";!1===a&&(a="without_icon");var o=t.name;return null!=e.formatItemName&&(o=e.formatItemName(t,e.intl)),r.createElement(E,{key:"selected_item_".concat(n),show_actions:!1,custom_actions:r.createElement(c.Z,{squared:!0,color:"red",icon:"knk-off",_position:"left",onClick:function(){return e.deleteItem(t.id)}})},r.createElement("strong",{className:"".concat(a," item_title cutTextOnOverflow")},r.createElement("span",null,o)))})),0==y.length&&!1!==h&&r.createElement(E,{is_empty:!0},r.createElement("p",null,"[ ",(m=h,(0,a.ex)(m,e.intl,d))," ]"))),f&&r.createElement(w,_({},e,{selected_items_ids:b,close:function(){return g(!1)},confirmSelection:function(t){e.change(t,e.parent_id),g(!1)},intl:e.intl})))}))},79269:function(e,t,n){"use strict";n(47941),n(82772),n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),n(47042),n(91038),n(74916),n(77601),n(96649),n(96078),n(9653),n(69070),n(57327),n(38880),n(54747),n(49337),n(33321),n(91058),n(92222),n(21249),n(54678);var r=n(67294),i=n(37101),a=n(24445),o=n(79361),l=n.n(o),s=(n(41766),n(72898)),c=n(89974),u=n(62762),m=n(46264),d=n(39280),p=n(31065),f=n(63249),_=n(3152),g=n(7384),v=n(81246),y=n(39572);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var b=["stage"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var O=function(e){var t,n,i=e.stage,o=C(e,b),l=function(e,t){return(0,a.ex)(e,o.intl,t)},s=null!=i.instructions_button&&""!=i.instructions_button?i.instructions_button:l("Start Game"),c=null!=o.fail_message&&""!=o.fail_message?o.fail_message:"If you leave the page before finishing the game, your score will be 0.",u=null!==(t=null==o?void 0:o.instructions_as_game)&&void 0!==t&&t,m=null!==(n=null==o?void 0:o.instructions_at_top)&&void 0!==n&&n,p=["game_instructions","gui_main_text_color_on_bg","mod_align_param","main_text_flex"];u&&p.push("as_game");var f=["instructions_contents"];return u||f.push("graphic_instructions"),r.createElement(j,null,m&&null!=i.instructions_description&&""!=i.instructions_description&&r.createElement(g.Z,{_class:{font_size:"small_p",other:"fill_description not_in_bottom gui_main_text_color_on_bg"}},i.instructions_description),r.createElement("article",{className:p.join(" ")},i.instructions_img&&r.createElement("img",{className:"instructions_img",src:i.full_instructions_img,alt:""}),!m&&null!=i.instructions_description&&""!=i.instructions_description&&r.createElement(g.Z,{_class:{font_size:"small_p",other:"fill_description"}},i.instructions_description),r.createElement("div",{className:f.join(" ")},o.children),r.createElement("div",{className:"instructions_cta"},r.createElement("div",{className:"gui_big_button hb_secondaryFont flex_button"},r.createElement(d.Z,{_fullclass:"",onClick:function(e,t){return o.setInitGame(t)},autotranslate:!1},s)),r.createElement("p",{className:"warning knk-alert gui_small_icon in_label"},l(c)))))},P=(0,r.forwardRef)((function(e,t){var n,i,a,o,l=e.stage,s=(e.promotion,null===(n=null==e?void 0:e.display_countdown)||void 0===n||n),c=null===(i=null==e?void 0:e.display_score)||void 0===i||i,m=null===(a=null==e?void 0:e.display_attemps)||void 0===a||a,d=(0,r.useRef)(0),f=k((0,r.useState)(0),2),_=f[0],g=f[1],v=(0,r.useReducer)((function(e,t){switch(t.type){case"SET_SCORE":var n={score:t.score};return null!=l.crush_min&&(n.attempts_left=parseInt(l.crush_min)-t.moves),w(w({},e),n);case"SET_ATTEMPTS":return w(w({},e),{},{attempts_left:t.attempts_left});default:return e}}),{attempts_left:parseInt(l.crush_min),score:0}),h=k(v,2),b=h[0],E=h[1];(0,r.useEffect)((function(){var e=A();return function(){clearTimeout(e)}}),[]),(0,r.useEffect)((function(){E({type:"SET_ATTEMPTS",attempts_left:e.stage.crush_min})}),[e.stage.crush_min]),(0,r.useImperativeHandle)(t,(function(){return{setScore:function(t,n){if(n==parseInt(l.crush_min)){var r=e.timer.current;r&&(d.current=r.getElapsedAndStop())}E({type:"SET_SCORE",score:t,moves:n})}}}),[]);var A=function(){return o=setInterval((function(){g((function(e){return e-1})),0==_&&clearInterval(o)}),1e3)};return r.createElement("div",{className:"gui_game_header game_participation_info gui_main_text_color_on_bg"},s&&r.createElement("div",{className:"time_counter knk-loading"},_>0?r.createElement(p.Z,{format:"m:s.d",simplified_decimals:!0,display_if_zero:!1,only_digit:!1,in_text:!1,full_labels:!0,stopped:!0,seconds:l.game_time,classes:""}):r.createElement(y.Z,{ref:e.timer,stopped:e.is_builder&&!e.is_test,seconds:l.game_time,onEnd:function(t){null!=e.onEnded&&e.onEnded(!1)},classes:""}),_>0&&r.createElement("div",{className:"gui_pos_abs",style:{width:"100%",top:"0"}},r.createElement("img",{src:window.cdn_url+"img/blank_1x1.png",width:"100%",alt:""}),r.createElement("div",{className:"is_fullscreen relative_to_container game_landing is_"+e.theme},r.createElement("div",null,r.createElement(u.Z,{only_digit:!0,value:_}))))),c&&r.createElement("div",{className:"gui_total_points countdown_row knk-goal"},r.createElement(u.Z,{only_digit:!0,value:b.score})),m&&r.createElement("div",{className:"gui_total_attempts countdown_row knk-me".concat(b.attempts_left<6?" almost_there":"")},r.createElement(u.Z,{only_digit:!0,value:b.attempts_left})))})),x=function(e){return null!=e.multiparticipation&&e.multiparticipation&&null!=e.participate_result&&null!=e.participate_result.best&&e.participate_result.best?r.createElement(v.Z,{custom_success_color:e.custom_success_color}):r.createElement("div",{className:"icon_container"},r.createElement("div",{className:"icon ep-thumbs-up-empty"}))},j=function(e){var t,n,i=null===(t=null==e?void 0:e.is_whole)||void 0===t||t,a=null!==(n=null==e?void 0:e.game_type)&&void 0!==n?n:"",o=["main_contents_flex"];return i&&o.push("gui_game_whole"),""!=a&&o.push("is_".concat(a)),r.createElement("section",{className:o.join(" ")},e.children)},N=function(e){var t=e.participate_result||{ranking:10},n=null!=e.multiparticipation&&e.multiparticipation,a=null!=e.has_ranking&&e.has_ranking,o=null==e.stage?"/entries/".concat(e.promo_id):"/entries/".concat(e.promo_id,"/#s:").concat(e.stage.id);return r.createElement("div",{className:"score_resumee"},n&&null!=t&&null!=t.ranking&&a&&r.createElement("div",{className:"position_in_ranking"},r.createElement("p",null,r.createElement(i.FormattedMessage,{id:"You are in position {pos} in the {ranking}",values:{pos:r.createElement("strong",null,t.ranking),ranking:r.createElement(c.Z,{_class:{other:"original_color_item"},_href:o},"Ranking")}}))),r.createElement("div",{className:"game_resumee"},r.createElement("p",null,e.title,":"),r.createElement("ul",null,e.scoring_data.map((function(e,t){return r.createElement("li",{key:t},r.createElement("span",null,e.label,":"),r.createElement("span",null,e.value))})))))},T="INSTRUCTIONS",B="VERIFYING",I="TIMEUP",z="GAMEPLAY",D="INVALID",Z="SUCCESS",M=function(e){var t=k((0,r.useState)(!1),2),n=t[0],i=t[1];return Howler.volume(n?0:1),r.createElement("div",{className:"game_config_controls"},r.createElement(f.Z,{squared:!0,active:!n,icon:"ep-sound-on",icon_off:"ep-sound-off",onClick:function(){return i(!n)}}))};t.Z=(0,i.injectIntl)((function(e){var t,n,i,o,c,u,d=function(t,n){return(0,a.ex)(t,e.intl,n)},p=(0,r.useRef)(),f=(0,r.useRef)(0),g=(0,r.useRef)(0),v=(0,r.useRef)(0),y=e.stage.Stage,h=(0,r.useRef)(),b=null!==(t=null==e?void 0:e.display_audio_controls)&&void 0!==t&&t;(0,r.useEffect)((function(){var e=document.getElementById("main");e&&(e.style.height="auto")}),[]);var E=[{label:d("score","ucfirst"),value:(0,a.uf)(300)},{label:d("Bonus time"),value:(0,a.uf)(52)},{label:d("Total score"),value:(0,a.uf)(352)}],A=function(e){var t=null;switch(e){case"instructions":case"main":t=T;break;case"settings":t=z;break;case"score":"success"==y.display_status&&(t=Z),"fail_time"==y.display_status&&(t=I)}return t},S=null!=e.section?e.section:"main",C=null!=e.is_builder&&e.is_builder,F=C?A(S):null,R=null!==(n=null==e?void 0:e.is_test)&&void 0!==n&&n,L=null!==(i=null==e?void 0:e.promotion)&&void 0!==i?i:{},U=null!==(o=null==e?void 0:e.game_type)&&void 0!==o?o:null,q=k((0,r.useReducer)((function(e,t){switch(t.type){case"SET_STATUS":return w(w({},e),{},{state:t.state});case"SET_VALID_GAME":return w(w({},e),{},{state:Z});case"SET_INVALID_GAME":return w(w({},e),{},{state:D&&!R});case"SET_HASH":return w(w({},e),{},{hash:t.hash});case"START":return w(w({},e),{},{state:z,hash:t.hash});case"SET_VERIFY":return w(w({},e),{},{state:B,solved:t.solved});case"SET_SOLVED":return w({},e);case"RESULT":var n=null!=t.scores?t.scores:E,r=null!=t.next_participation&&t.next_participation,i=null!=t.participate_result?t.participate_result:{};return w(w({},e),{},{state:t.success?Z:I,fail:!t.success,time:t.time,next_participation:r,participate_result:i,scores:n});case"RESTART":return v.current=0,w(w({},e),{},{state:T,start:!1,success:!1,fail:!1,solved:!1});default:return e}}),{state:null==F?T:F,hash:"",next_participation:!1,participate_result:{},scores:E}),2),W=q[0],G=q[1];(0,r.useEffect)((function(){G({type:"RESTART"})}),[y.reset]),(0,r.useEffect)((function(){G({type:"SET_STATUS",state:A(S)})}),[y.display_status,S]);var V=function(t){if(!C||R){var n={info:(0,a.Yz)((0,a.n_)({hash:e.gp_hash,stage_id:y.id})),type:"gamestart"};setTimeout((function(){R?setTimeout((function(){G({type:"START",hash:""}),null!=t&&t()}),1500):$.post("/promotions/action/"+y.promotion_id,n,(function(e){G({type:"START",hash:e.hash}),null!=t&&t()}),"json")}),1e3)}else null!=t&&t()},Y=function(){e.canPlayAgain((function(){G({type:"RESTART"})}))},H=function(e){null==W.participate_result.url||(window.location.href=W.participate_result.url)},Q=function(t,n,r,i){var o=(null==W?void 0:W.hash)||e.gp_hash,l={page:"stage_".concat(y.id),type:"gameplay",info:(0,a.Yz)((0,a.n_)({timegame:y.game_time,time:n,attempts:r,solved:t,hash:o}))};G({type:"SET_VERIFY",solved:t}),$.post("/promotions/action/"+y.promotion_id,l,(function(e){var t=!0;0==e.status&&(t=!1),t?null!=i&&i(e):G({type:"SET_INVALID_GAME"})}),"json")},J=function(e){var t=0,n=y.game_time-e;return t+=10*(n=n>0?n:0),(0,a.uf)(t,2)};if(W.state==Z){var K=null!=y.game_color_ok&&y.game_color_ok,X=null!=L.public_entries&&"0"!=L.public_entries;return r.createElement(j,{game_type:U},r.createElement("div",{className:"game_result is_ok is_fullscreen relative_to_container"+(K?" custom_color":""),style:K?{backgroundColor:K}:null},r.createElement("div",{className:"g"},r.createElement(x,{scoring_data:W.scores,custom_success_color:K,multiparticipation:e.multiparticipation,participate_result:W.participate_result}),r.createElement("h1",{className:"status_title"},null!=y.game_feedback_ok&&""!=y.game_feedback_ok?y.game_feedback_ok:d("Good job!")),r.createElement(N,{title:d("Results"),stage:y,scoring_data:W.scores,multiparticipation:e.multiparticipation,promo_id:L.id,has_ranking:X,participate_result:W.participate_result})),r.createElement(_.Z,{custom_color:K,multiparticipation:e.multiparticipation,login_type:L.login_type,status:"ok",allow_retry:W.participate_result.retries>1,retries:W.participate_result.retries,prize:W.participate_result.prize,next_participation:W.next_participation,continueGame:function(){return H()},restartGame:function(){return Y()},intl:e.intl,is_builder:C})))}if(W.state==D){var ee=null!=W.hash?W.hash:e.gp_hash;return r.createElement(j,{game_type:U},r.createElement("div",{className:"blackBg"},r.createElement("div",{className:"game_result is_ko is_fullscreen relative_to_container is_verifying blackBg"},r.createElement("div",{className:"g"},r.createElement("div",{className:"icon_container"},r.createElement("div",{className:"icon ep-thumbs-down-empty"})),r.createElement("div",{className:"is_qr not_in_top"},r.createElement(l(),{value:ee,size:150})),r.createElement("h1",{className:"status_title"},d("Invalid game"))))))}if(W.state==B){var te=W.solved?" is_ok":" is_ko";te+=y.game_color_ok_time&&W.solved||y.game_color_ko_time&&!W.solved?" custom_color":"";var ne=W.solved?y.game_color_ok_time?y.game_color_ok_time:"#75C400":y.game_color_ko_time?y.game_color_ko_time:"var(--ep-red-color)";return r.createElement(j,{game_type:U},r.createElement("div",{className:"game_result is_fullscreen relative_to_container is_verifying"+te},r.createElement("div",{className:"flex_button gui_big_button hb_secondaryFont gui_flex_center gui_custom_color gui_withoutEvents"},r.createElement(s.ZP,{_fullclass:"original_color_item inlined_flex_btn",autotranslate:!1},r.createElement("span",null,d("Verifying")),r.createElement(m.Z,{color:ne})))))}if(W.state==I||1==W.fail){var re=y.game_color_ko_time,ie=y.game_color_ko_time?" custom_color":"",ae=y.game_color_ko_time?{backgroundColor:y.game_color_ko_time}:null,oe=null!=y.game_feedback_ko_time&&""!=y.game_feedback_ko_time?y.game_feedback_ko_time:d("***Time's up!");return r.createElement(j,{game_type:U},r.createElement("div",{className:"game_result is_ko is_fullscreen relative_to_container"+ie,style:ae},r.createElement("div",{className:"g"},r.createElement("div",{className:"icon_container"},r.createElement("div",{className:"icon ep-delete-circle"})),r.createElement("h1",{className:"status_title"},oe)),r.createElement(_.Z,{custom_color:re,multiparticipation:e.multiparticipation,status:"ko",allow_retry:W.participate_result.retries>1,retries:W.participate_result.retries,next_participation:W.next_participation,continueGame:function(){return H()},restartGame:function(){return Y()},intl:e.intl,is_builder:C})))}var le=function(t){h.current.stopGame(t,(function(){!function(t,n,r,i){var o=(0,a.uf)(n),l=J(r),s=parseFloat(o)+parseFloat(l),c=[{label:d("score","ucfirst"),value:t?o:0},{label:d("Bonus time"),value:t?l:0},{label:d("Total score"),value:t?(0,a.uf)(s,2):0}];R?setTimeout((function(){G({type:"RESULT",success:t,time:r,next_participation:!1,participate_result:{},scores:c})}),1500):Q(t,r,i,(function(n){if(n.status){for(var a=r+""+W.hash,o="",l=0;l<a.length;l++){var u=(a[l].charCodeAt(0)<<2)%123;u<32&&(u+=32),o+=String.fromCharCode(u)}var m={points:s=t?s:0,gp:W.hash,signedRequest:o,time:r,attempts:i};e.submitQuiz(s,m,(function(e){var n=!1;if(null!=e.next_participation&&!1!==(n=e.next_participation)&&!0!==n){var i=moment.duration(moment(n).diff(moment()));n=i.humanize()}setTimeout((function(){G({type:"RESULT",success:t,time:r,next_participation:n,participate_result:e,scores:c,verify:!1})}),1e3*(t?1:0))}))}}))}(t,f.current,g.current.getElapsedInSeconds(),v.current)}))},se=null!=y.theme?y.theme:"light",ce={stage:y,promotion:L,is_builder:C,is_test:R,is_playable:e.is_playable,adaptToContainer:function(e){var t=null!=window.parent_location_w&&null!=window.parent_location_h?Math.min(window.parent_location_w,window.parent_location_h)+70:700;(0,a.Fz)(t),null!=e&&e(Math.floor(document.querySelector(".gui_game_wrapper").clientWidth)),(0,a.ab)()},doHit:function(e){v.current++,v.current==y.crush_min&&g.current.getElapsedAndStop()},forceStop:function(){g.current.getElapsedAndStop()},onScore:function(e){f.current=e,p.current.setScore(e,v.current)},onEnded:le,hitsRef:v,intl:e.intl};if(W.state==T){var ue,me,de,pe,fe=null!==(ue=null==e?void 0:e.instructions_as_game)&&void 0!==ue&&ue,_e=null!==(me=null==e?void 0:e.instructions_at_top)&&void 0!==me&&me;return fe?r.createElement(O,{game_type:U,stage:y,setInitGame:V,fail_message:e.fail_message,instructions_as_game:!0,instructions_at_top:_e,intl:e.intl},r.createElement(j,{is_whole:!1,game_type:U},r.createElement("section",{className:"is_wrapper"},r.createElement("section",{className:"gui_game_wrapper is_".concat(se)},r.createElement("img",{src:"".concat(window.cdn_url,"img/blank_1x1.png"),className:"img_pusher",width:"100%",alt:""}),r.createElement("div",{className:"canvas_content"},r.cloneElement(e.children,w(w({},ce),{},{game_header:p,key:"instructions",ref:h,is_instructions:!0}))),r.createElement("div",{className:"overlayed_instructions"},null!==(pe=null==e?void 0:e.instructions)&&void 0!==pe?pe:d("Missing intructions")))))):r.createElement(O,{game_type:U,stage:y,setInitGame:V,fail_message:e.fail_message,intl:e.intl},null!==(de=null==e?void 0:e.instructions)&&void 0!==de?de:d("Missing intructions"))}return r.createElement(j,{game_type:U},r.createElement("section",{className:"is_wrapper"},r.createElement(P,{ref:p,theme:se,stage:e.stage.Stage,promotion:null!==(c=null==e||null===(u=e.promotion)||void 0===u?void 0:u.Promotion)&&void 0!==c?c:{},is_builder:C,is_test:R,hitsRef:v,timer:g,onEnded:le,display_countdown:e.display_countdown,display_score:e.display_score,display_attemps:e.display_attemps}),r.createElement("section",{className:"gui_game_wrapper is_".concat(se)},r.createElement("img",{src:"".concat(window.cdn_url,"img/blank_1x1.png"),className:"img_pusher",width:"100%",alt:""}),r.createElement("div",{className:"canvas_content"},r.cloneElement(e.children,w(w({},ce),{},{game_header:p,ref:h})))),e.legend,b&&r.createElement(M,null)))}))},37244:function(e,t,n){"use strict";n(74916),n(15306),n(68304),n(30489),n(41539),n(81299),n(12419),n(69070),n(96649),n(96078),n(82526),n(41817),n(9653),n(32165),n(66992),n(78783),n(33948);var r=n(67294),i=n(20804);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),r)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(u,e);var t,n,a,c=s(u);function u(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c.call(this,e,t)}return t=u,(n=[{key:"render",value:function(){var e=this.props.prize,t=null!=e.bg_preset?e.bg_preset:"minimal";return r.createElement("div",{className:"img_preview_bg",style:{backgroundImage:e.full_image?"url("+e.full_image+")":null}},e.full_image&&r.createElement("img",{src:window.cdn_url+"img/blank_120x63.png",width:"100%"}),e.video&&r.createElement(i.Z,{video_url:e.video,video_thumb:e.video_thumb}),!e.full_image&&!e.video&&r.createElement("div",{className:"preset_prize_bg preset_"+t},this.props.children,r.createElement("img",{className:"preset_img",src:"/img/prize_bg_presets/"+t+".png",width:"100%"}),r.createElement("div",{className:"over_title hb_mainFontWeightRoman"},r.createElement("div",{className:"gui_text_align_center"},r.createElement("div",{dangerouslySetInnerHTML:{__html:e.title?e.title.replace(/\n/g,"<br />"):""}})))))}}])&&o(t.prototype,n),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(r.Component);t.Z=u},18691:function(e,t,n){"use strict";n.d(t,{Nr:function(){return D},TW:function(){return G},aj:function(){return W}});n(92222),n(91058),n(82526),n(41817),n(21249),n(74916),n(15306),n(26699),n(32023),n(57327),n(41539),n(47941),n(82772),n(19601),n(32165),n(66992),n(78783),n(33948),n(91038),n(47042),n(77601),n(96649),n(96078),n(9653),n(69070),n(38880),n(54747),n(49337),n(33321);var r=n(67294),i=n(37101),a=n(20379),o=n(75830),l=n(24445),s=n(72898),c=n(85096),u=n(61827),m=n(22609),d=n(20804),p=n(4546),f=n(59614),_=n(94940),g=n(53167);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}var y=["direction","type"],h=["current_media","is_in_cart","custom_cover_color","closeEntryAsLayer","is_selected","gallery_count","intl","vote_info","main_color","media","openEntryAsLayer","goNextMedia","goPrevMedia","participation"],b=["current_media","custom_cover_color","gallery_count","main_color","media"],E=["is_votable","is_selected","is_picked_to_vote","has_available_cart_galleries_to_vote","intl","voteForEntry","user","voting_enable_ranking","vote_info","main_color","promotion","stage","participation"],w=["is_selected","in_registered","vote_info","participation","media","current_media","stage","closeEntryAsLayer"],A=["in_registered","is_in_cart","album_title","closeEntryAsLayer"],k=["in_registered","is_in_cart","is_selected","album_title","album_description","closeEntryAsLayer","user"],S=["user","selected_entry","promotion","stage"];function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}function I(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var z=function(e,t){return(0,l.KF)([0,-.45,.3,-.15,.2,-.6,.5][t],e)},D=function(e,t){var n,r,i,a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=null!==(n=null==e?void 0:e.voting_public_name_display)&&void 0!==n?n:"1",c=null!==(r=null==e?void 0:e.gallery_hide_username)&&void 0!==r&&r;if(null!=e.voting_public_name_display&&(c="0"==s),c)return!1;var u=t.name;if(!o&&(0,l.UE)(t,"first_name")&&(0,l.UE)(t,"last_name")&&(u="".concat(t.first_name," ").concat(t.last_name)),"1"==s)return u;var m=null!==(i=null==t||null===(a=t.quiz_entry)||void 0===a?void 0:a.form)&&void 0!==i&&i;return!1!==m&&null!=m[s]&&""!=m[s]?m[s]:u},Z=function(e){var t=e.direction,n=e.type;I(e,y);null==n&&(n="detailed");var i=50;null==t&&(t=1);var a=(null!=window.is_rtl&&window.is_rtl?-1:1)*t,o=a>0?null:"translate(".concat(i," 0) scale(").concat(a," 1)");return"simple"==n?r.createElement("svg",{className:"triangled_icon_bg",width:"".concat(i,"px"),height:"".concat(i,"px"),viewBox:"0 0 ".concat(i," ").concat(i)},r.createElement("g",{transform:o},r.createElement("polygon",{className:"bg",points:"0,0.14 0,50 50,0"}))):r.createElement("svg",{className:"triangled_icon_bg",width:"".concat(i,"px"),height:"".concat(i,"px"),viewBox:"0 0 ".concat(i," ").concat(i)},r.createElement("g",{transform:o},r.createElement("polygon",{className:"shadow",fill:"rgba(0, 0, 0, 0.75)",points:"2,49 49,2 50,2 50,0 23,23 0,50 2,50"}),r.createElement("path",{className:"bg",d:"M50,0c0,0-11.41,0.5-25,0.5c-6.25,0-24.5,0-24.5,0c0,0,0,18.25,0,24.5C0.5,38.59,0,50,0,50s18.25-19.25,24.5-25.5S50,0,50,0z"}),r.createElement("path",{className:"darken",fill:"rgba(0, 0, 0, 0.1)",d:"M0,50c0,0,18.25-19.25,24.5-25.5l-24-24c0,0,0,18.25,0,24.5C0.5,38.59,0,50,0,50z"}),r.createElement("path",{className:"lighten",fill:"rgba(255, 255, 255, 0.1)",d:"M50,0c0,0-19.25,18.25-25.5,24.5l-24-24c0,0,18.25,0,24.5,0C38.59,0.5,50,0,50,0z"})))},M=function(e){var t=e.current_media,n=e.is_in_cart,i=e.custom_cover_color,a=e.closeEntryAsLayer,o=e.is_selected,c=e.gallery_count,g=e.intl,v=e.vote_info,y=e.main_color,b=e.media,E=e.openEntryAsLayer,w=e.goNextMedia,A=e.goPrevMedia,k=e.participation,S=I(e,h);if(0===c)return null;var C=function(e,t){return(0,l.ex)(e,g,t)},O=!(!o||"mobile"!=window.platform),P=b.length>5,x=b[0],j="text"==x.type||"url"==x.type||parseInt(x.width)>=parseInt(x.height)?"l":"p",N=!(null==v||null==v.already_voted||!v.already_voted),T={},M=m.Z,F="";if(o){T=(0,l.c$)(b[t]);var R=!1!==i?i:null!=b[t].main_color?b[t].main_color:y;switch(T.main_color=z(R,t),F=null!=b[t].type?b[t].type:"image"){case"pdf":M=p.Z;break;case"text":M=f.Z,T.text=T.file.text;break;case"url":M=_.Z,T.url=T.file.url,T.title=T.file.title,T.description=T.file.description;break;case"video":case"vimeo":case"youtube":M=d.Z,T.controls="1",T.display_place="multimedia";break;case"cover":M=u.Z;var L=D(S.stage,k);!1!==L&&(T.author=L,T.date=k.created)}}return r.createElement("div",{className:"entry_gallery_container"},o&&"cover"==F&&r.createElement(M,B({type:"big"},T)),N&&o&&r.createElement("span",{className:"voted_mark on_big redIcon ep-heart"},r.createElement(Z,{direction:1})),o&&r.createElement("a",{className:"close_mark on_big knk-off original_color_item close_layer_btn",onClick:a},r.createElement(Z,{direction:-1,type:"simple"})),r.createElement("div",{className:"entry_gallery"},!o&&r.createElement("img",{src:"".concat(window.cdn_url,"img/blank_15x12.png"),width:"100%",alt:""}),o&&r.createElement("div",{className:"big selected"+(O||1==c?" without_nav":"")},"cover"!=F&&r.createElement(M,B({type:"big"},T,{autoplay:!1}))),!n&&O&&r.createElement("ul",{className:"entry_minimal_nav"},b.map((function(e,n){var i=["original_color_item"];return o&&t==n&&i.push("selected"),r.createElement("li",{key:"nav_".concat(n),className:i.join(" ")})}))),!O&&!(1==c&&o)&&r.createElement("ul",{className:"gui_media_gallery is_"+j+" has_"+c+(P?" has_more":"")},o&&c>1&&r.createElement("li",{className:"nav"},r.createElement(s.ZP,{color:"transparent",icon:"knk-arrow-l-big",_class:{other:"entries_navigation prev_btn"},onClick:A})),b.map((function(e,a){var l=null!=e.type?e.type:"image",s=[],c=!1!==i?i:null!=e.main_color?e.main_color:y;switch(l){case"video":case"vimeo":n||s.push("original_color_item with_media_icon ep-video");break;case"youtube":o||(e.full_path=e.thumbnail),n||s.push("original_color_item with_media_icon ep-video");break;case"cover":e.main_color=z(c,a),o&&(e.title=C("Cover"));break;case"audio":n||s.push("original_color_item with_media_icon ep-audio");break;case"pdf":n||s.push("original_color_item with_media_icon ep-pdf"),e.filename=e.cover_name;break;case"text":n||s.push("original_color_item"),e.main_color=z(c,a),o&&(e.title=C("Text"));break;case"url":n||s.push("original_color_item"),e.main_color=z(c,a)}var d=!(!P||o||4!=a)&&b.length-5+1;return!o&&a>4?null:(o&&t==a&&s.push("selected"),r.createElement("li",{key:a,className:s.join(" "),onClick:function(){return E(k.id,a)}},"cover"==l&&r.createElement(u.Z,B({},e,{type:o?"thumb":"gallery"})),"text"==l&&r.createElement(f.Z,B({},e,{type:o?"thumb":"gallery"})),"url"==l&&r.createElement(_.Z,B({},e,{type:o?"thumb":"gallery"})),"cover"!=l&&"text"!=l&&"url"!=l&&r.createElement(m.Z,{file:e,type:o?"thumb":"gallery",type_media:l}),d&&r.createElement("span",{className:"more_imgs"},r.createElement("span",{className:"original_color_item"},"+",d))))})),o&&c>1&&r.createElement("li",{className:"nav"},r.createElement(s.ZP,{color:"transparent",icon:"knk-arrow-r-big",_class:{other:"entries_navigation next_btn"},onClick:w})))))},F=function(e){var t=e.current_media,n=e.custom_cover_color,i=e.gallery_count,a=e.main_color,o=e.media;I(e,b);return 0===i?null:r.createElement("ul",{className:"entry_gallery_listed"},o.map((function(e,i){var s=(0,l.c$)(e),c=!1!==n?n:null!=o[t].main_color?o[t].main_color:a,g=m.Z;switch(null!=e.type?e.type:"image"){case"video":case"vimeo":case"youtube":g=d.Z,s.controls="1",s.display_place="multimedia";break;case"text":s.device="mobile",s.text=s.file.text,s.main_color=z(c,i),g=f.Z;break;case"url":s.device="mobile",s.url=s.file.url,s.title=s.file.title,s.description=s.file.description,s.main_color=z(c,i),g=_.Z;break;case"pdf":s.device="mobile",g=p.Z;break;case"cover":s.main_color=z(c,i),g=u.Z}return r.createElement("li",{key:i},r.createElement(g,B({},s,{type:"big"})),null!=e.caption&&""!=e.caption&&r.createElement("div",{className:"user_comment",dangerouslySetInnerHTML:{__html:e.caption.replace(/\n/g,"<br />")}}))})))},R=function(e){var t=e.is_votable,n=e.is_selected,a=e.is_picked_to_vote,o=e.has_available_cart_galleries_to_vote,u=e.intl,m=e.voteForEntry,d=e.user,p=e.voting_enable_ranking,f=e.vote_info,_=e.main_color,g=e.promotion,v=e.stage,y=e.participation;I(e,E);if(!t&&!p)return null;var h=function(e,t){return(0,l.ex)(e,u,t)},b=h("vote"),w=h("voted"),A=null!=f.points?f.points:0,k=!(a||!o),S=EP.isColorBright(_)?"black":"white",C=["vote_button","gui_pos_rel","original_color_item","custom_text_color","".concat(S,"Color")],O=null==g.config.share||null==g.config.share.status||"0"!=g.config.share.status;return r.createElement("div",{className:"footer_container",style:n?{width:"100%"}:null},p&&n&&r.createElement("span",{className:"vote_label in_top in_detail"},r.createElement(i.FormattedPlural,{value:A,one:r.createElement(i.FormattedMessage,{id:"{num} point",values:{num:A}}),other:r.createElement(i.FormattedMessage,{id:"{num} points",values:{num:A}})})),r.createElement("div",{className:"participation_footer original_color_item"+(k?"":" is_pending_vote")},r.createElement("div",{className:"participation_actions solid_buttons"},p&&!n&&r.createElement("span",{className:"vote_label in_top"},r.createElement(i.FormattedPlural,{value:A,one:r.createElement(i.FormattedMessage,{id:"{num} point",values:{num:A}}),other:r.createElement(i.FormattedMessage,{id:"{num} points",values:{num:A}})})),p&&!n&&r.createElement("span",{className:"vote_label in_top short_version"},A),t&&r.createElement("div",{className:"flex_button hb_secondaryFont in_top adaptable_button gui_actions"},r.createElement(s.ZP,{_fullclass:C.join(" "),onClick:a?null:function(){return m(d)},autotranslate:!1},a?w:b)),n&&O&&r.createElement(c.Z,{promotion:g,stage:v,user:y,sharing_type:t?"gallery_voteme":"gallery_view"}))))},L=function(e){var t,n,i=e.is_selected,a=e.in_registered,o=e.vote_info,l=e.participation,c=e.media,u=e.current_media,m=e.stage,d=e.closeEntryAsLayer,p=I(e,w),f=!(null==o||null==o.already_voted||!o.already_voted),_=null!=p.is_listed&&p.is_listed,v=window.is_rtl?"mod_align_right":"mod_align_left",y=null!==(t=null==m?void 0:m.voting_public_name_display)&&void 0!==t?t:"1",h="0"==y;return null==m.voting_public_name_display&&null!==(n=null==m?void 0:m.gallery_hide_username)&&void 0!==n&&n&&(h=!0),r.createElement("div",{className:"participation_info"},!(i&&h&&!_)&&r.createElement("strong",{className:"name"+(i?a?"":" hb_mainColorText":"")},f&&(!i||_)&&r.createElement("span",{className:"voted_mark redIcon ep-heart"}),!h&&r.createElement("span",{className:"participant_data"},"1"==y&&r.createElement(g.Z,{user:l}),r.createElement("span",{className:"user_name ".concat(v)},r.createElement("span",{className:"original_color_item".concat(i?"":" gui_cutTextOnOverflow ".concat(v))},D(m,l))))),i&&_&&r.createElement(s.wL,{icon:"knk-off",_class:{other:"close_layer_btn"},onClick:d}),i&&r.createElement("div",{className:"user_textual_participation"+(h&&!_?" without_name":"")},!h&&r.createElement("div",{className:"user_created"},moment(l.created).format("llll")),!_&&null!=c[u].caption&&""!=c[u].caption&&r.createElement("div",{className:"user_comment original_color_item",dangerouslySetInnerHTML:{__html:c[u].caption.replace(/\n/g,"<br />")}})))},U=function(e){var t=e.in_registered,n=e.is_in_cart,i=(e.album_title,e.closeEntryAsLayer),a=I(e,A),o=(0,l.Af)(a.promotion);return r.createElement("div",{className:"gui_single_entry_contents is_listed"},r.createElement("div",{className:"gui_gallery_layer_bg",onClick:i}),r.createElement("div",{className:"main_c"},r.createElement("div",{className:"gui_entry_info"},r.createElement(L,B({is_listed:!0,in_registered:t,closeEntryAsLayer:i},a))),r.createElement(R,B({main_color:o},a)),r.createElement("div",{className:"c"},r.createElement(F,B({is_in_cart:n,main_color:o},a)))))},q=function(e){var t,n,i=e.in_registered,a=e.is_in_cart,o=e.is_selected,c=(e.album_title,e.album_description,e.closeEntryAsLayer),u=e.user,m=I(e,k),d=null!==(t=null==m?void 0:m.is_in_ranking)&&void 0!==t&&t,p=null!==(n=null==m?void 0:m.is_preview)&&void 0!==n&&n,f=(0,l.Af)(m.promotion);return r.createElement("div",{className:"gui_single_entry_contents"},null!=m.removeFromCart&&r.createElement(s.wL,{icon:"knk-off redIcon whiteButton",color:!1,_class:{other:"remove_vote"},onClick:function(){return m.removeFromCart(u)}}),o&&r.createElement("div",{className:"gui_gallery_layer_bg",onClick:c}),r.createElement("div",{className:"main_c"},o&&r.createElement("img",{className:"landscape_size",src:"".concat(window.cdn_url,"img/blank_120x63.png"),width:"100%",alt:""}),r.createElement("div",{className:"c"},r.createElement(M,B({is_selected:o,closeEntryAsLayer:c,is_in_cart:a,main_color:f},m)),!a&&(!d||o)&&!p&&r.createElement("div",{className:"gui_entry_info"},r.createElement(L,B({is_selected:o,in_registered:i,closeEntryAsLayer:c},m)),!d&&!i&&r.createElement(R,B({main_color:f,is_selected:o,user:u},m))))))},W=(0,i.injectIntl)((function(e){var t=x((0,o.c)((function(){return{type:"GALLERY",collect:function(e){return{isDragging:e.isDragging()}},item:e.user}})),2),n=t[0].isDragging,i=t[1];return(0,r.useEffect)((function(){null!=e.onDragStart&&e.onDragStart(n)}),[n]),r.createElement(G,B({},e,{isDragging:!1,draggable:!0,ref:i}))})),G=r.forwardRef((function(e,t){var n,i,o,l,s,c,u,m,d,p,f=e.user,_=e.selected_entry,g=e.promotion,v=e.stage,y=I(e,S);if(0==f)return null;var h=f.Participation;(0,a.$t)("comp/multigallery.css");var b=null!==(n=null==y?void 0:y.is_votable)&&void 0!==n&&n,E=null!==(i=null==y?void 0:y.is_forced)&&void 0!==i&&i,w=null!==(o=null==y?void 0:y.is_in_cart)&&void 0!==o&&o,A=null!==(l=null==y?void 0:y.is_preview)&&void 0!==l&&l,k=null!==(s=null==y?void 0:y.in_registered)&&void 0!==s&&s,C=(c=null==y?void 0:y.is_in_ranking,!(w||!0!==_&&_!=h.id)),P=null!==(u=null==y?void 0:y.has_voting_sidebar)&&void 0!==u&&u,N=null!==(m=null==y?void 0:y.draggable)&&void 0!==m&&m,T=!(!h||null==h.quiz_entry.title||""==h.quiz_entry.title)&&h.quiz_entry.title,z=!(!h||null==h.quiz_entry.description||""==h.quiz_entry.description)&&h.quiz_entry.description,D=!1!==T,Z=null!=h.quiz_entry&&null!=h.quiz_entry.media?j(h.quiz_entry.media):[];D&&(Z=[{type:"cover",title:T,description:z,main_color:null,width:500,height:300}].concat(j(Z)));var M=(0,r.useReducer)((function(e,t){switch(t.type){case"OPEN_ENTRY":return O(O({},e),{},{current_media:t.media_index});case"NEXT_MEDIA":if(0==h)return e;var n=(e.current_media+1)%Z.length;return O(O({},e),{},{current_media:n});case"PREV_MEDIA":if(0==h)return e;var r=e.current_media-1;return r<0&&(r=Z.length-1),O(O({},e),{},{current_media:r});default:return e}}),{current_media:null!==(d=null==y?void 0:y.open_media_index)&&void 0!==d?d:0}),F=x(M,2),R=F[0],L=F[1],W=(0,r.useRef)(!A),G=function(e){var t=document.querySelector(".ep_global_contents"),n=null==t||!t.classList.contains("is_rtl");switch(e.keyCode){case 27:ee();break;case 37:n?K():X();break;case 39:n?X():K()}},V=function(){return parseInt(window.innerWidth)<800},Y=x((0,r.useState)(V()),2),H=Y[0],$=Y[1],Q=function(){$(V())};(0,r.useEffect)((function(){return Q(),window.addEventListener("resize",Q),function(){window.removeEventListener("resize",Q)}}),[]),(0,r.useEffect)((function(){var e=null;if(N)return y.isDragging?W.current=!1:e=setTimeout((function(){W.current=!0}),200),function(){clearTimeout(e)}}),[y.isDragging]),(0,r.useEffect)((function(){return C?(document.addEventListener("keydown",G),function(){document.removeEventListener("keydown",G)}):function(){document.removeEventListener("keydown",G)}}),[C]);var J=Math.min(5,Z.length),K=function(){J>1&&L({type:"PREV_MEDIA"})},X=function(){J>1&&L({type:"NEXT_MEDIA"})},ee=function(){null!=y.closeEntryAsLayer&&y.closeEntryAsLayer()};(0,a.oq)({leftSwipe:X,rightSwipe:K,enabled:!1!==R.current_participation});var te=["single_entry_in_gallery","original_color_item"];C&&(te.push("in_layer_mode"),P&&te.push("with_votes")),k&&!A&&te.push("awesome"),E&&te.push("in_forced_mode");var ne=(null==f?void 0:f.StageVote)||{},re=!(!y.votes_casted||!y.votes_casted.includes(ne.id)),ie=!!(y.votes_casted&&y.votes_casted.filter((function(e){return 0==e})).length>0),ae=null!==(p=null==v?void 0:v.voting_enable_ranking)&&void 0!==p&&p,oe=C&&H?U:q,le=null!=h.quiz_entry.color&&""!=h.quiz_entry.color&&h.quiz_entry.color;return r.createElement("li",{id:null!=y.item_id?y.item_id:null,ref:t,className:te.join(" "),style:null!=y.style?y.style:{}},r.createElement(oe,B({album_description:z,album_title:T,closeEntryAsLayer:ee,custom_cover_color:le,current_media:R.current_media,gallery_count:J,goNextMedia:X,goPrevMedia:K,has_cover:D,in_registered:k,intl:y.intl,is_in_cart:w,is_picked_to_vote:re,has_available_cart_galleries_to_vote:ie,is_selected:C,is_votable:b,is_preview:A,media:Z,openEntryAsLayer:function(e,t){W.current&&(L({type:"OPEN_ENTRY",media_index:t}),null!=y.openDetailLayer&&y.openDetailLayer(e))},participation:h,promotion:g,stage:v,user:f,vote_info:ne,voteForEntry:function(e){null!=y.voteForEntry&&y.voteForEntry(e)},voting_enable_ranking:ae,removeFromCart:y.removeFromCart},y)))}));t.ZP=(0,i.injectIntl)(G)},20804:function(e,t,n){"use strict";n(74916),n(4723),n(24603),n(28450),n(88386),n(39714),n(82772),n(68304),n(30489),n(41539),n(81299),n(12419),n(69070),n(96649),n(96078),n(82526),n(41817),n(9653),n(32165),n(66992),n(78783),n(33948);var r=n(67294),i=n(24445);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),r)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(u,e);var t,n,a,c=s(u);function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=c.call(this,e,t)).state={playing:null!=e.autoplay&&e.autoplay},n.display_place=null!=e.display_place?e.display_place:"entries",n}return t=u,(n=[{key:"playVideo",value:function(e){e.stopPropagation(),null!=this.props.page&&null!=EP&&null!=this.props.promotion_id&&EP.shotPromoAction("videoplay",this.props.page,this.props.promotion_id),this.setState({playing:!0})}},{key:"parseVideo",value:function(e){if(!e)return{};e.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|videos\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);var t=RegExp.$6,n=void 0;if(RegExp.$3.indexOf("youtu")>-1){var r="youtube",i="https://www.youtube.com/embed/".concat(t),a="https://img.youtube.com/vi/".concat(t,"/hqdefault.jpg"),o="&showinfo=0&controls="+(null!=this.props.controls?this.props.controls:"0")+"&rel=0",l=e.match(/t=(.*?)s\&?/),s=e.match(/e=(.*)s/);l&&null!=l[1]&&(o+="&start="+l[1]),s&&null!=s[1]&&(o+="&end="+s[1])}else RegExp.$3.indexOf("vimeo")>-1&&(r="vimeo",i="https://player.vimeo.com/video/".concat(t),null!=this.props.hash&&(n=this.props.hash),a=null!=this.props.thumbnail_url?"https://i.vimeocdn.com/video/".concat(this.props.thumbnail_url):"/img/video_pre-thumb.jpg",o="");return{id:t,platform:r,video_url:i,thumbnail_url:a,url_info:o,hash:n}}},{key:"render",value:function(){var e=this,t=this.parseVideo(this.props.video_url),n=(t.id,t.video_url),a=t.thumbnail_url,o=null!=t.hash?"&h=".concat(t.hash):"";this.props.video_thumb&&(a=this.props.video_thumb);var l=null!=this.props.main_color?rgb2hex(this.props.main_color,!1):"2951CC",s=null!=this.props.layout&&"public"==this.props.layout?"emulate_public_play_btn":"",c=null!=this.props.classname?this.props.classname:"original_color_item play_video_btn knk-play-round",u=(0,i.ay)(c,this.props._class,"video_play_btn"),m=this.state.playing?null:{backgroundImage:"url(".concat(a,")")};return r.createElement("div",{className:"gui_video_player video_preview regular_video",style:"entries"==this.display_place?m:null,onClick:function(t){return e.playVideo(t)}},r.createElement("div",{style:"multimedia"==this.display_place?m:null},r.createElement("img",{src:window.cdn_url+"img/blank_16x9.png",width:"100%",alt:""}),this.state.playing?r.createElement("iframe",{src:n+"?autoplay=1&html5=1"+t.url_info+"&color="+l+o,className:"video_player",frameBorder:"0",autoPlay:!0,allowFullScreen:!0}):r.createElement("a",{className:u+" "+s})))}}])&&o(t.prototype,n),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(r.Component);t.Z=u},81874:function(e,t,n){"use strict";n.d(t,{BQ:function(){return b},DK:function(){return h}});n(47042),n(21249),n(57327),n(41539),n(54747),n(82526),n(41817),n(32165),n(66992),n(78783),n(33948),n(91038),n(74916),n(77601),n(96649),n(96078),n(9653),n(69070),n(47941),n(38880),n(49337),n(33321);var r=n(67294),i=n(74127),a=n(73286);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(){return Math.random(0,10)},_=function(){return Math.random(0,10)},g={charges:[],generateParticles:!1,Gravity:.1,lastFrameTime:null,mousePos:[null,null],particles:[],particleIndex:0,particlesPerTick:20,particleSize:[5,5],svgHeight:600,svgWidth:800,tickerStarted:!1},v=function(e){var t=Math.random()>.5?1:-1,n=Math.random()>.5?1:-1,r=m(e.vector);if(null!=e.str_variance){var i=2*Math.random()*e.str_variance-e.str_variance;r[0]+=i,r[1]+=i}return null!=e.dir_variance?[r[0]+Math.random()*e.dir_variance[0]*t,r[1]+Math.random()*e.dir_variance[1]*n]:r},y=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"TICKER_STARTED":return c(c({},t),{},{tickerStarted:!0,lastFrameTime:new Date});case"START_PARTICLES":return c(c({},t),{},{generateParticles:!0});case"STOP_PARTICLES":return c(c({},t),{},{generateParticles:!1});case"CREATE_PARTICLES_PARAMS":var r,i=t.particles.slice(0),a=null!==(e=n.params.particles)&&void 0!==e?e:t.particlesPerTick;for(r=0;r<a;r++){var o="function"==typeof n.params.source.x?n.params.source.x():n.params.source.x,s="function"==typeof n.params.source.y?n.params.source.y():n.params.source.y,u={id:t.particleIndex+r,x:o,y:s};null!=n.params.onInvert&&(u.onInvert=n.params.onInvert),null!=n.params.knv&&(u.knv=n.params.knv(u.x,u.y),u.added=!1),u.vector=v(n.params),i.unshift(u)}return c(c({},t),{},{particles:i,particleIndex:t.particleIndex+r+1});case"CREATE_PARTICLES":var m,d=t.particles.slice(0);for(m=0;m<n.N;m++){var p={id:t.particleIndex+m,x:n.x,y:n.y,img:n.img};p.vector=[p.id%2?-f():f(),-3*_()],d.unshift(p)}return c(c({},t),{},{particles:d,particleIndex:t.particleIndex+m+1});case"UPDATE_MOUSE_POS":return c(c({},t),{},{mousePos:[n.x,n.y]});case"TIME_TICK":var y=t.svgWidth,h=t.svgHeight,b=t.lastFrameTime,E=(new Date-b)/(1e3/60),w=t.particles.filter((function(e){var t=!(e.y>h||e.x<0||e.x>y);return t||null==e.knv||e.knv.destroy(),t})).map((function(e){var n=l(e.vector,2),r=n[0],i=n[1];return e.x+=r*E,e.y+=i*E,t.charges.forEach((function(t){var n=e.x-t.x,r=e.y-t.y,i=n*n+r*r,a=(n<0?-1/i:1/i)*t.strength,o=(r<0?-1/i:1/i)*t.strength;e.x+=a,e.y+=o})),e.vector[1]+=t.Gravity*E,i<0&&e.vector[1]>0&&null!=e.onInvert&&(setTimeout((function(){e.onInvert(e.x,e.y)}),0),e.knv.destroy()),e}));return c(c({},t),{},{particles:w,lastFrameTime:new Date});case"RESIZE_SCREEN":return c(c({},t),{},{svgWidth:n.width,svgHeight:n.height});default:return t}},h=function(e){var t=(0,r.useRef)(),n=((0,r.useRef)(),(0,r.useRef)()),o=(0,r.useRef)(),l=(0,r.useRef)();(0,r.useEffect)((function(){var t=null!=e.params?c(c({},g),e.params):g;l.current=(0,i.MT)(y,t)}),[e.params]),(0,r.useEffect)((function(){if(e.stage){var t=e.stage.attrs,n=t.width,r=t.height;l.current.dispatch({type:"RESIZE_SCREEN",width:n,height:r}),e.stage.on("mousedown touchstart",s),e.stage.on("mouseup touchend",u),e.stage.on("mousemove touchmove",m)}}),[e.stage]),(0,r.useEffect)((function(){if(t.current&&e.canvas_context){n.current=t.current.canvas._canvas,o.current=n.current.getContext("2d"),l.current.dispatch({type:"TICKER_STARTED"});var r,i=e.canvas_context?e.canvas_context.getCanvas().pixelRatio:1;return function t(){var a=l.current.getState(),s=!1;if(e.canvas_context){var c=a.mousePos[0]*i-50,u=a.mousePos[1]*i-50,m=a.particleSize[0],d=a.particleSize[1];s=e.canvas_context.getImageData(c,u,m,d)}a.generateParticles&&l.current.dispatch({type:"CREATE_PARTICLES",N:a.particlesPerTick,x:a.mousePos[0],y:a.mousePos[1],img:s}),l.current.dispatch({type:"TIME_TICK"});var p=l.current.getState().particles;if(p){o.current.clearRect(0,0,n.current.width,n.current.height);for(var f=0;f<p.length;f++){var _=p[f],g=_.x,v=_.y,y=_.img;s&&o.current.putImageData(y,g*i,v*i)}}r=window.requestAnimationFrame(t)}(),function(){cancelAnimationFrame(r)}}}),[t.current,e.canvas_context]);var s=function(e){l.current.dispatch({type:"START_PARTICLES"});var t=e.target.getStage().getPointerPosition();l.current.dispatch(c({type:"UPDATE_MOUSE_POS"},t))},u=function(){l.current.dispatch({type:"STOP_PARTICLES"})},m=function(e){var t=e.target.getStage().getPointerPosition();l.current.dispatch(c({type:"UPDATE_MOUSE_POS"},t))};return r.createElement(a.Layer,{ref:t,listening:!1})},b=(0,r.forwardRef)((function(e,t){var n=(0,r.useRef)(),o=(0,r.useRef)(),l=(0,r.useRef)(),s=(0,r.useRef)(),u=(0,r.useRef)();(0,r.useEffect)((function(){var t=null!=e.params?c(c({},g),e.params):g;u.current=(0,i.MT)(y,t)}),[e.params]),(0,r.useEffect)((function(){if(e.stage){var t=e.stage.attrs,n=t.width,r=t.height;u.current.dispatch({type:"RESIZE_SCREEN",width:n,height:r})}}),[e.stage]),(0,r.useEffect)((function(){if(n.current&&e.canvas_context){l.current=n.current.canvas._canvas,s.current=l.current.getContext("2d"),u.current.dispatch({type:"TICKER_STARTED"});var t,r=e.canvas_context?e.canvas_context.getCanvas().pixelRatio:1;return function e(){var n=u.current.getState(),i=!1;null!=o.current&&(i=o.current),n.generateParticles&&u.current.dispatch({type:"CREATE_PARTICLES",N:n.particlesPerTick,x:n.mousePos[0],y:n.mousePos[1],img:i}),u.current.dispatch({type:"TIME_TICK"});var a=u.current.getState().particles;if(a){s.current.clearRect(0,0,l.current.width,l.current.height);for(var c=0;c<a.length;c++){var m=a[c],d=m.x,p=m.y,f=m.img;i&&s.current.putImageData(f,d*r,p*r)}}t=window.requestAnimationFrame(e)}(),function(){cancelAnimationFrame(t)}}}),[n.current,e.canvas_context]);return(0,r.useImperativeHandle)(t,(function(){return{down:function(e,t){!function(e,t){u.current.dispatch({type:"START_PARTICLES"}),o.current=t,console.log("start party");var n=e.target.getStage().getPointerPosition();u.current.dispatch(c({type:"UPDATE_MOUSE_POS"},n))}(e,t)},up:function(e){u.current.dispatch({type:"STOP_PARTICLES"})},move:function(e,t){!function(e,t){var n=e.target.getStage().getPointerPosition();t&&(o.current=t),u.current.dispatch(c({type:"UPDATE_MOUSE_POS"},n))}(e,t)}}}),[]),r.createElement(a.Layer,{ref:n,listening:!1})}))},60419:function(e,t,n){"use strict";n(68304),n(30489),n(41539),n(81299),n(12419),n(69070),n(96649),n(96078),n(82526),n(41817),n(9653),n(47941),n(57327),n(38880),n(54747),n(49337),n(33321),n(32165),n(66992),n(78783),n(33948);var r=n(67294),i=n(78566),a=n.n(i),o=n(79361),l=n.n(o);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(s,e);var t,n,i,o=f(s);function s(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=o.call(this,e,t)).state={scale:1},n}return t=s,n=[{key:"generateBarcode",value:function(e){var t=document.getElementById(e).toDataURL("image/jpeg"),n={};n.filename=this.props._nameFile,n.promotion_id=this.props._promotionId,n.file=t,$.post("/prizes/generateCloudCode",n)}},{key:"componentDidMount",value:function(){if(null!=this.props._generateCode&&this.props._generateCode){var e=null!=this.props._identifier?this.props._identifier:"",t="code_"+e+"_c";$("#code_"+e+" canvas").attr("id",t),this.generateBarcode(t)}null!=this.props.is_fullscreen&&this.props.is_fullscreen&&this.adaptCodeInWindow()}},{key:"adaptCodeInWindow",value:function(){setTimeout(function(){var e=($(document).width()-60)/$(this.refs.this_code_ref).width(),t=($(document).height()-60)/$(this.refs.this_code_ref).height();this.state.scale=Math.min(e,t),this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.state))}.bind(this),200)}},{key:"render",value:function(){var e=null!=this.props._type?this.props._type:"",t=null!=this.props._height?this.props._height:50,n=null!=this.props._margin?this.props._margin:10,i=null!=this.props._fontSize?this.props._fontSize:10,o=null!=this.props._value?this.props._value:"",s=null!=this.props._identifier?this.props._identifier:"",c=null!=this.props.renderAs?this.props.renderAs:"canvas";if(0==e)return null;var u=2.5;if(null!=this.props.is_fullscreen&&this.props.is_fullscreen)switch(t=.8*Math.min($(window).width(),$(window).height())/4,e){case"EAN13":u=7;break;case"CODE39":u=3;break;case"CODE128":u=5}return r.createElement("div",{ref:"this_code_ref",className:"graphic_code_container",style:{transform:"scale("+this.state.scale+")"}},r.createElement("div",{className:"is_"+e,id:"code_"+s},"qr"==e?r.createElement(l(),{value:o,size:2*t,level:"H",renderAs:c}):r.createElement(a(),{value:o,format:e,width:u,height:2*t,displayValue:!0,renderer:"canvas",margin:n,fontSize:i,id:"code"})))}}],n&&m(t.prototype,n),i&&m(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(r.Component);t.Z=g},9993:function(e,t,n){"use strict";n(43290),n(21249);var r=n(67294),i=n(73286),a="M69.61,36.85L59.44,4.81c-0.21-0.64-0.49-1.26-0.9-1.85c-2.22-3.15-6.59-3.9-9.75-1.69L2.97,33.33c-3.16,2.21-3.92,6.56-1.7,9.71C2.62,44.96,4.79,46,6.99,46H63c3.87,0,7-3.12,7-6.97C70,38.26,69.84,37.54,69.61,36.85zM46.93,16.06l-28,19.51c-0.31,0.21-0.66,0.32-1,0.32c-0.55,0-1.09-0.26-1.43-0.75c-0.55-0.79-0.36-1.87,0.43-2.43l28-19.51c0.79-0.55,1.88-0.36,2.44,0.43C47.91,14.43,47.72,15.51,46.93,16.06z";t.Z=function(e){var t=[a,"M90.66,25C84.38,25,80,29.7,80,35.8c0,6.19,4.74,10.8,11.2,10.8c3.84,0,6.28-1.17,7.77-2.3c0.36-0.32,0.41-0.68,0.18-1.08l-1.17-1.94c-0.23-0.45-0.59-0.5-0.99-0.18c-1.22,0.81-2.8,1.72-5.29,1.72c-3.89,0-6.69-2.39-7.23-5.69h15.41c0.45,0,0.72-0.27,0.77-0.77v-0.72C100.65,29.38,96.63,25,90.66,25z M96.36,33.9H84.52c0.63-3.21,3.03-5.24,6.28-5.24c2.94,0,5.24,2.08,5.56,5.15C96.36,33.81,96.36,33.9,96.36,33.9z","M124.81,25.41h-2.58c-0.45,0-0.72,0.27-0.77,0.72l-0.14,2.03c-1.58-1.81-4.07-3.16-7.41-3.16c-5.69,0-10.08,4.61-10.08,10.8s4.34,10.8,10.03,10.8c3.52,0,6.01-1.58,7.59-3.7l0.14,2.58c0,0.45,0.32,0.72,0.72,0.72h2.48c0.5,0,0.77-0.27,0.77-0.77V26.17C125.57,25.68,125.3,25.41,124.81,25.41z M114.77,42.47c-3.57,0-6.42-2.85-6.42-6.69s2.85-6.69,6.42-6.69c3.89,0,6.46,2.85,6.51,6.69C121.28,39.64,118.66,42.47,114.77,42.47z","M139.34,33.72c-3.52-0.86-4.79-1.4-4.79-2.76c0-1.54,1.4-2.21,3.34-2.21c2.17,0,3.89,0.54,5.65,1.49c0.45,0.27,0.81,0.18,1.04-0.23l1.13-2.08c0.27-0.45,0.18-0.81-0.23-1.04c-1.76-1.04-4.25-1.85-7.36-1.85c-4.88,0-8.13,2.39-8.13,6.14c0,3.7,3.34,5.29,7.41,6.28c3.3,0.81,4.38,1.54,4.38,2.98c0,1.58-1.4,2.44-3.7,2.44c-2.62,0-4.79-0.81-6.37-1.85c-0.41-0.27-0.77-0.18-1.04,0.23l-1.22,2.12c-0.23,0.45-0.18,0.81,0.27,1.04c2.17,1.31,4.83,2.17,8.09,2.17c5.29,0,8.54-2.58,8.54-6.37C146.34,36.34,143.72,34.85,139.34,33.72z","M169.43,25.41h-3.16c-0.41,0-0.72,0.18-0.86,0.59l-6.01,15.04L153.3,26c-0.14-0.41-0.45-0.59-0.86-0.59h-3.48c-0.54,0-0.77,0.36-0.54,0.9L157,46.18l-3.21,7.95c-0.23,0.5,0.05,0.86,0.59,0.86h2.94c0.41,0,0.72-0.23,0.86-0.59l4.11-9.8l7.68-18.29C170.2,25.77,169.97,25.41,169.43,25.41z","M185.52,25c-3.48,0-5.96,1.49-7.59,3.57l-0.14-2.44c0-0.45-0.32-0.72-0.77-0.72h-2.35c-0.45,0-0.77,0.27-0.77,0.77v28.05c0,0.5,0.32,0.77,0.77,0.77h2.94c0.45,0,0.77-0.27,0.77-0.77V43.2c1.54,1.9,3.98,3.39,7.23,3.39c5.74,0,10.03-4.61,10.03-10.8S191.21,25,185.52,25z M184.71,42.47c-3.89,0-6.51-2.85-6.51-6.69c0-3.89,2.62-6.69,6.51-6.69c3.57,0,6.42,2.85,6.42,6.69C191.12,39.64,188.28,42.47,184.71,42.47z","M211.88,25.05c-0.32-0.05-0.68-0.05-1-0.05c-3.7,0-6.19,2.03-7.05,4.47l-0.14-3.34c0-0.45-0.32-0.72-0.77-0.72h-2.35c-0.45,0-0.77,0.27-0.77,0.77v19.24c0,0.5,0.32,0.77,0.77,0.77h2.98c0.5,0,0.77-0.27,0.77-0.77v-10.3c0.05-2.94,2.03-5.83,5.92-5.83c0.45,0,0.86,0.05,1.17,0.14c0.5,0.09,0.81-0.09,0.86-0.63l0.27-2.89C212.6,25.45,212.37,25.09,211.88,25.05z","M225.26,25.05c-6.1,0-11.07,4.61-11.07,10.8c0,6.14,4.97,10.75,11.07,10.75c6.05,0,11.02-4.61,11.02-10.75C236.28,29.65,231.31,25.05,225.26,25.05z M225.26,42.47c-3.61,0-6.51-2.94-6.51-6.64c0-3.8,2.89-6.73,6.51-6.73c3.57,0,6.46,2.94,6.46,6.73C231.72,39.55,228.83,42.47,225.26,42.47z","M265.4,25c-3.3,0-5.87,1.94-7.09,4.2c-1.45-2.58-4.11-4.2-7.59-4.2c-3.25,0-5.87,1.85-7.05,4.11l-0.14-2.98c-0.05-0.45-0.36-0.72-0.81-0.72h-1.9c-0.45,0-0.77,0.27-0.77,0.77v19.24c0,0.5,0.32,0.77,0.77,0.77h2.98c0.5,0,0.77-0.27,0.77-0.77l0.05-11.11c0.27-2.71,2.12-5.24,5.38-5.24c3.07,0,5.06,2.44,5.06,6.19v10.17c0,0.5,0.27,0.77,0.72,0.77h3.03c0.45,0,0.77-0.27,0.77-0.77v-10.3c0-3.34,2.08-6.05,5.38-6.05c3.16,0,5.06,2.44,5.06,6.19v10.17c0,0.5,0.27,0.77,0.72,0.77h3.03c0.45,0,0.72-0.27,0.72-0.77V34.67C274.48,28.84,270.82,25,265.4,25z","M288.74,25.05c-6.1,0-11.07,4.61-11.07,10.8c0,6.14,4.97,10.75,11.07,10.75c6.05,0,11.02-4.61,11.02-10.75C299.77,29.65,294.8,25.05,288.74,25.05z M288.74,42.47c-3.61,0-6.51-2.94-6.51-6.64c0-3.8,2.89-6.73,6.51-6.73c3.57,0,6.46,2.94,6.46,6.73C295.2,39.55,292.31,42.47,288.74,42.47z","M312.99,33.72c-3.52-0.86-4.79-1.4-4.79-2.76c0-1.54,1.4-2.21,3.34-2.21c2.17,0,3.89,0.54,5.65,1.49c0.45,0.27,0.81,0.18,1.04-0.23l1.13-2.08c0.27-0.45,0.18-0.81-0.23-1.04c-1.76-1.04-4.25-1.85-7.36-1.85c-4.88,0-8.13,2.39-8.13,6.14c0,3.7,3.34,5.29,7.41,6.28c3.3,0.81,4.38,1.54,4.38,2.98c0,1.58-1.4,2.44-3.7,2.44c-2.62,0-4.79-0.81-6.37-1.85c-0.41-0.27-0.77-0.18-1.04,0.23l-1.22,2.12c-0.23,0.45-0.18,0.81,0.27,1.04c2.17,1.31,4.83,2.17,8.09,2.17c5.29,0,8.54-2.58,8.54-6.37C319.99,36.34,317.37,34.85,312.99,33.72z"];return null!=e.in_konva&&e.in_konva?r.createElement(r.Fragment,null,t.map((function(t,n){return r.createElement(i.Path,{key:n,data:t,fill:(null==e?void 0:e.fill)||"#FFFFFF"})}))):r.createElement("svg",{width:"320px",height:"55px",viewBox:"0 0 320 55"},t.map((function(e,t){return r.createElement("path",{key:t,d:e})})))}},15466:function(e,t,n){"use strict";n(47941),n(82772),n(41539),n(32165),n(66992),n(78783),n(33948),n(47042),n(91038),n(74916),n(77601),n(19601),n(82526),n(41817),n(21249);var r=n(67294),i=n(73727),a=n(20379),o=n(37101),l=n(24445),s=n(89974),c=n(28641),u=n(20170),m=n(47733),d=n(88e3),p=["item"],f=["item"],_=["items","num_empty"];function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var b=function(e){var t,n,a,o,l,s,c=e.item,u=h(e,p),m=null===(t=null==c?void 0:c.self)||void 0===t||t,d=null!==(n=null==c?void 0:c.role)&&void 0!==n&&n,f=null!==(a=null==c?void 0:c.display_options)&&void 0!==a&&a,_=null!==(o=null==c?void 0:c.use_route)&&void 0!==o&&o,g=null!==(l=null==c?void 0:c.full_link)&&void 0!==l&&l,v=null!==(s=null==u?void 0:u.between_icon)&&void 0!==s&&s,y=["_card","shadow_small","gui_pos_rel"];return m&&y.push("self_agent"),!1===d&&y.push("without_role"),null==u.whole_action||m||y.push("cursor_pointer"),f&&y.push("gui_menu_opened"),!1!==v&&y.push("".concat(v," between_icon")),null!=c.card_classes&&y.push(c.card_classes),_&&!1!==g?r.createElement(i.rU,{className:y.join(" "),to:g},u.children):r.createElement("div",{className:y.join(" "),onClick:function(){null!=u.whole_action&&u.whole_action(c.id,c.self)}},u.children)},E=function(e){var t,n,i,a,o=e.item,u=h(e,f),p=v((0,r.useState)(!1),2),_=p[0],y=p[1],E=null!==(t=null==o?void 0:o.role)&&void 0!==t&&t,w=null!==(n=null==o?void 0:o.not_overflowed)&&void 0!==n&&n,A=null!==(i=null==o?void 0:o.what_is_it_link)&&void 0!==i&&i;return r.createElement(b,g({},u,{item:o,display_options:_}),r.createElement("div",{className:"gui_pos_rel avatar_manager"},null!=o.full_image&&r.createElement("span",{style:{backgroundImage:"url(".concat(o.full_image,")")}},r.createElement("img",{src:"/img/blank_1x1.png",width:"100%"})),null!=o.icon&&null==o.full_image&&r.createElement("span",{className:"with_icon ".concat(o.icon)}),null==o.icon&&null==o.full_image&&r.createElement("span",{className:"account_initials gui_pos_abs blur_while_opened"},(0,l.Qm)({username:o.title})),r.createElement("p",{className:"role blur_while_opened"},!1!==E&&o.role)),r.createElement("div",{className:"_info blur_while_opened"},r.createElement("h4",{className:"title"},o.title),null!=o.link&&r.createElement("p",{className:"linked_item"},o.link),null!=o.extra&&r.createElement("p",{className:"extra"},o.extra),null!=o.description&&r.createElement("p",{className:"description".concat(w?" not_overflowed":"")},o.description,!1!==A&&r.createElement("div",{className:"extra_header_link gui_not_in_top_small"},r.createElement(s.Z,{_href:A,_target:"_blank"},"What is it?"))),null==o.description&&!1!==A&&r.createElement("div",{className:"extra_header_link"},r.createElement(s.Z,{_href:A,_target:"_blank"},"What is it?")),null!=o.notice&&r.createElement("p",{className:"notice",dangerouslySetInnerHTML:{__html:o.notice}}),null!=o.ribbons&&r.createElement("div",null,o.ribbons.map((function(e,t){var n=null;return t>0&&(n={maxHeight:"85px"}),r.createElement(d.Z,{key:"ribbon_group_".concat(t),items:e,style:n,_class:{other:"gui_overflowed_auto gui_flex_center"}})}))),null!=u.actions&&r.createElement(c.Z,{_class:{other:"gui_not_in_top_small ".concat(null!==(a=null==u?void 0:u.action_classes)&&void 0!==a?a:"")}},u.actions(o.id)),null!=o.whole_actions&&o.whole_actions),r.createElement(m.Z,{actions:u.extra_actions,id:o.id,onToggleVisibility:y}))},w=function(e){var t,n=v((0,r.useState)(!1),2),i=n[0],a=(n[1],null!==(t=null==e?void 0:e.between_icon)&&void 0!==t&&t),o=["_card","empty","shadow_small"];return!1!==a&&o.push("".concat(a," between_icon")),r.createElement("div",{className:o.join(" "),onClick:function(){null!=e.empty_click&&e.empty_click()}},r.createElement("div",{className:"gui_pos_rel avatar_manager"},r.createElement("span",{className:"account_initials gui_pos_abs"},i?r.createElement(u.Z,null):"+"),r.createElement("p",{className:"role"})),r.createElement("div",{className:"_info"},r.createElement("h4",{className:"title gui_force_roman"},i?e.progress_label:e.empty_label)))};t.Z=(0,o.injectIntl)((function(e){var t,n,i,o=e.items,l=e.num_empty,s=h(e,_);if(null==o)return null;null==l&&(l=[]);var c=null!==(t=null==s?void 0:s.between_icon)&&void 0!==t&&t;(0,a.$t)("comp/agent_cards.css");var u=["cards_display"];null!=s._class&&u.push(s._class);var m=null!==(n=null==s?void 0:s.num_cols)&&void 0!==n?n:3,d=null!==(i=null==s?void 0:s.min_num_cols)&&void 0!==i?i:1;return"auto"==m&&(m=Math.max(Math.min(o.length,4),d)),r.createElement("div",{className:u.join(" ")},r.createElement("div",{className:"container",style:{gridTemplateColumns:"repeat(".concat(m,", 1fr)")}},o.map((function(e,t){var n=!(t<o.length-1);return r.createElement(E,g({key:"card_".concat(t),item:e},s,{between_icon:n?null:c}))})),l.map((function(e,t){var n=!(t<l.length-1);return r.createElement(w,g({key:"empty_card_".concat(t)},s,{between_icon:n?null:c}))})),s.children))}))},2916:function(e,t,n){"use strict";n(47941),n(82772),n(82526),n(41817),n(32165),n(66992),n(78783),n(33948),n(47042),n(91038),n(74916),n(77601),n(96649),n(96078),n(9653),n(69070),n(57327),n(38880),n(54747),n(49337),n(33321),n(19601),n(92222),n(91058),n(69826),n(41539),n(21249),n(2707),n(38862);var r=n(67294),i=n(73935),a=n(73727),o=n(16550),l=n(48834),s=n(55107),c=n(2265),u=n(37101),m=n(24445),d=n(14626),p=n(20379),f=n(72898),_=n(89974),g=(n(75732),n(87674)),v=n(96029),y=n(20170),h=n(18691),b=n(97790),E=n(20804),w=n(19260),A=n(7384);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}var S=["promotion","stage"],C=["user","stage","promotion"],O=["display_animation","user","stage","promotion"];function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var z=function(e){var t=e.promotion,n=e.stage,i=I(e,S),a=function(e,t){return(0,m.ex)(e,i.intl,t)},o=null!=i.has_more_participations&&i.has_more_participations,l="<h1>"+a("Contest Gallery")+"</h1><p>"+a("These are the multimedia albums of the participants.")+"</p>",s=null!=n.main_description&&""!=n.main_description?n.main_description:l,c=null!=i.is_builder&&i.is_builder,u=null!=n.main_image&&""!=n.main_image&&n.full_main_image,d=null!=n.main_video&&""!=n.main_video&&null!=n.main_video.full_url&&n.main_video,p=!(!i.has_votes_enabled||null==n.voting_enable_ranking)&&n.voting_enable_ranking;return r.createElement("div",{className:"flex_cols"},(u||d)&&r.createElement("div",{className:"flex_col col_1"},r.createElement("div",{className:"mod_align_param main_media_flex"},!d&&u&&r.createElement("img",{src:u,alt:"",style:{maxWidth:"100%"}}),d&&r.createElement(E.Z,{video_url:d.full_url,video_thumb:d.image}))),r.createElement("div",{id:"success_contents",className:"flex_col col_2"},r.createElement("article",{className:"mod_align_param gui_main_text_color_on_bg"},!o&&r.createElement("div",{className:"no_more_participations redBg whiteColor original_color_item not_in_bottom"},a("You already voted. Thank you!")),r.createElement(A.Z,{_class:{font_size:"small_p"}},s),p&&r.createElement("div",{className:"success_actions"},r.createElement("div",{className:"entries_btn hb_secondaryFont"},r.createElement(_.Z,{_href:c?null:"/gallery/".concat(t.id,"/ranking/").concat(n.id)},"View ranking")))),r.createElement("div",{className:"epBox epModule main_contents_flex"},i.children)))},D=function(e){e.user;var t=e.stage,n=e.promotion,a=I(e,C),o=(0,d.u)({width:150,height:120}),l=o.display,s=(o.itemType,o.item),c=o.style;return l?i.createPortal(r.createElement("div",{className:"gui_sortable_item awesome",style:c},r.createElement("ul",null,r.createElement(h.TW,{intl:a.intl,promotion:n,stage:t,selected_entry:!1,user:s,is_in_cart:!0,has_voting_sidebar:!1}))),document.getElementsByTagName("body")[0]):null},Z=function(e){var t=e.display_animation,n=e.user,a=e.stage,o=e.promotion,l=I(e,O);if(!1===n||!t)return null;var s=document.getElementById("gallery_".concat(n.Participation.id));if(null===s)return null;var c=T((0,r.useState)(!1),2),u=c[0],d=c[1],p=s.getBoundingClientRect(),f=document.getElementById("voting_cart").getBoundingClientRect(),_=p.x+(p.width-150)/2,g=p.y+(p.height-120)/2,v=f.x+(f.width-150)/2,y=f.y+(f.height-120)/2,b=24,E=0,w=null,A=null,k=(v-_)/b,S=(y-g)/b,C=function(e){var t=(b-e)/b;return e+t*(0,m.o1)("easeInOutCubic")(t)},P=function(){E==b?(clearInterval(w),d(!0)):(E++,A.style.top="".concat(g+C(E)*S,"px"),A.style.left="".concat(_+C(E)*k,"px"),A.style.opacity="".concat(1-C(E)/b))};return(0,r.useEffect)((function(){return d(!1),setTimeout((function(){clearInterval(w),A=document.getElementById("animated_gallery"),w=setInterval(P,1e3/60)}),200),function(){clearInterval(w)}}),[n]),u?null:i.createPortal(r.createElement("div",{id:"animated_gallery",className:"gui_sortable_item is_animated_vote",style:{left:"".concat(_,"px"),top:"".concat(g,"px")}},r.createElement("ul",null,r.createElement(h.TW,{intl:l.intl,promotion:o,stage:a,selected_entry:!1,user:n,is_in_cart:!0,has_voting_sidebar:!1}))),document.getElementsByTagName("body")[0])},M=function(e){var t=function(t,n){return(0,m.ex)(t,e.intl,n)};(0,p.$t)("comp/multigallery.css");var n=null!=e.stage&&e.stage;if(!n)return null;var i=null!=e.promotion&&e.promotion,a=i.timezone,u=!(!moment.tz(n.start_date,a).isBefore()||!moment.tz(n.end_date,a).isAfter()),d=!!moment.tz(n.end_date,a).isBefore(),_=!u&&!d,E=null!=e.is_builder&&e.is_builder,k=null!=e.is_logged&&e.is_logged,S=!(!k||!window.login_info)&&window.login_info.login_id,C=null!=e.avail_participations?e.avail_participations:{},O=null==C.next_participation||!1!==C.next_participation,x=null!=n.voting_enabled&&n.voting_enabled,N=!(!!(!x||!O)||!u||_),B=947538==e.promotion.id?100:24,I=100,M="votes_".concat(n.id),F=(0,o.UO)().selected_entry,R=(0,o.k6)(),L=(0,r.useRef)(!1),U=(0,r.useRef)(!1),q=(0,r.useRef)(!1),W=function(){var e=[];switch(n.voting_type){case"simple":for(var t=0;t<n.voting_max;t++)e.push(!1);break;case"tiered":case"ponderated":for(var t in n.voting_tiers)e.push(!1)}return e},G=(0,r.useReducer)((function(e,t){switch(t.type){case"ADD_VOTE_CART_SLOT":if("ponderated"==n.voting_type)if(e.vote_cart.find((function(e){return!1!==e&&e.Participation.id==t.participant.Participation.id})))return e;return j(j({},e),{},{vote_cart:e.vote_cart.map((function(e,n){return n!=t.pos?e:t.participant}))});case"ADD_VOTE_CART":var r=[];if(e.vote_cart.find((function(e){return!1!==e&&e.Participation.id==t.participation.Participation.id})))return e;var i=!1;for(var a in e.vote_cart)0==e.vote_cart[a]?i?r.push(e.vote_cart[a]):(r.push(t.participation),i=!0):r.push(e.vote_cart[a]);return j(j({},e),{},{vote_cart:r,animate:t.participation});case"DEL_VOTE_CART":var o=e.vote_cart.map((function(e,n){if(!1===e)return!1;var r=null==t.index||t.index==n;return(e.Participation.id!=t.id||!r)&&e}));return"simple"==n.voting_type&&o.sort((function(e,t){return!1===e?1:!1===t?-1:0})),j(j({},e),{},{vote_cart:o,animate:!1});case"SET_LOADING":return j(j({},e),{},{loading:!0});case"SET_STARTING_CART":var l=(s=t.cart,c=W(),s.length!=c.length?c:s);return j(j({},e),{},{vote_cart:l});case"SET_DRAG_START":return t.drag?j(j({},e),{},{collapsed:!1}):e;case"TOGGLE_COLLAPSED":return j(j({},e),{},{animate:!1,collapsed:!e.collapsed});case"TOGGLE_ADD_CART_ERROR":return j(j({},e),{},{display_message_vote_self:!e.display_message_vote_self});case"SET_RESPONSE":return j(j({},e),{},{response_on_vote:t.response});case"RETURN_TO_GALLERY":return j(j({},e),{},{response_on_vote:!1,loading:!1,vote_cart:W()});default:return e}var s,c}),{animate:!1,collapsed:!0,current_participation:!1,current_media:0,loading:!1,response_on_vote:!1,vote_cart:W(),display_message_vote_self:!1}),V=T(G,2),Y=V[0],H=V[1],Q=T((0,r.useState)(!1),2),J=Q[0],K=Q[1],X=T((0,r.useState)(""),2),ee=X[0],te=X[1],ne=(0,l.yf)("users",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2?arguments[2]:void 0;100==t&&K(!0);var i=!1;if(8===parseInt(n.type))i="/stages/getgalleryvoting/".concat(n.promotion_id,"/").concat(n.id);if(i){var a={start:e,limit:t,offset:r};return null!=F&&(a.ensure_entry=F,U.current=F),$.getJSON((0,m.R8)(i),a,(function(e){K(!1)}))}}),{indexer:function(e,t){},fetch_all_disabled:!0,items_per_page:B,limit:I,pagination:50}),re=T(ne,3),ie=re[0],ae=re[1],oe=re[2],le=T((0,l.Zp)(ie.filtered,B,{total:0==ie.filters.length?ie.total:ie.filtered.length,skip_reset_page:!(ie.filters.length>0)}),3),se=le[0],ce=le[1],ue=le[2];(0,r.useEffect)((function(){setTimeout((function(){null!=window.adaptWidgetHeight&&adaptWidgetHeight()}),500)}),[]),(0,r.useEffect)((function(){return window.addEventListener("focus",me),document.addEventListener("visibilitychange",me),me(),function(){document.removeEventListener("visibilitychange",me),window.removeEventListener("focus",me)}}),[ce.page]),(0,r.useEffect)((function(){if(null!=window.localStorage&&!E){var e=window.localStorage.getItem(M);null!=e&&H({type:"SET_STARTING_CART",cart:JSON.parse(e)})}}),[]),(0,r.useEffect)((function(){if(null!=window.localStorage){var e=!1;for(var t in Y.vote_cart)if(!1!==Y.vote_cart[t]){e=!0;break}e?window.localStorage.setItem(M,JSON.stringify(Y.vote_cart)):window.localStorage.removeItem(M)}}),[Y.vote_cart]);var me=function(){if("visible"==document.visibilityState){if(1!=ce.page)return;q.current=!0,setTimeout((function(){q.current=!1}),1e4)}},de=function(e){1==n.voting_self_unallowed&&S==e.Participation.login_id?H({type:"TOGGLE_ADD_CART_ERROR"}):H({type:"ADD_VOTE_CART",participation:e})},pe=function(){H({type:"SET_LOADING"}),window.localStorage.removeItem(M)},fe=function(e){L.current||(L.current=!0,0!=U.current&&(ie.data.length>I&&ae({type:"REMOVE_ENTRY",uid:U.current}),U.current=!1),oe({last:ie.last,offset:2==e?(e-1)*I:(e-1)*B}))},_e=function(e){e*B>=I&&fe(e),ue(e)},ge=!0;null!=i.config_styles&&null!=i.config_styles.promotion&&null!=i.config_styles.promotion.style&&null!=i.config_styles.promotion.style.main_color_bg&&(ge=EP.isColorBright(i.config_styles.promotion.style.main_color_bg));var ve={intl:e.intl,is_builder:E,has_more_participations:O,has_votes_enabled:x,promotion:i,stage:n};if(J)return r.createElement(z,ve,r.createElement("article",{className:"entries_list",style:{minHeight:"200px"}},r.createElement(y.Z,{autotranslate:!1},t("Loading the gallery"),"...")));if(Y.loading){var ye="Please wait...",he={};!1!==Y.response_on_vote&&(!1!==Y.response_on_vote.prize?(ye="You've won a prize",he._href=Y.response_on_vote.url):null!=n.after_voting_action&&"thanks"==n.after_voting_action?(ye="Continue",he._href=Y.response_on_vote.url):(ye="Back to gallery",he.onClick=function(){window.location.href="/gallery/".concat(n.promotion_id,"/").concat(n.id)}));var be="<h1><strong>"+t("Done!")+"</strong></h1><p>"+t("Thank you for voting.")+"</p>",Ee=null!=n.voting_success_label&&""!=n.voting_success_label?n.voting_success_label:be;return r.createElement("div",{className:"flex_cols"},r.createElement("div",{id:"success_contents",className:"flex_col col_2"},r.createElement("div",{className:"epBox epModule main_contents_flex"},r.createElement("article",{className:"submitting_message gui_pos_rel"+(!1!==Y.response_on_vote?" is_done":"")},r.createElement("article",{className:"mod_align_param template_module gui_main_text_color_on_bg register_text_flex"},r.createElement(A.Z,{parseHTML:!1,_class:{other:"text_message template_submodule"}},r.createElement("h2",null,r.createElement("strong",null,t("Submitting your participation")))),r.createElement("div",{className:"icon_container"},r.createElement("div",{className:"icon knk-check original_color_item"}))),r.createElement("div",{className:"gui_voted_process_animation"},r.createElement("div",{className:"thanks_message"},r.createElement("article",{className:"mod_align_param template_module gui_main_text_color_on_bg register_text_flex"},r.createElement(A.Z,{_class:{other:"template_submodule"}},Ee))),r.createElement("div",{className:"passing_cover_bg"}),r.createElement("ul",{className:"medias_passing_by",style:{width:"calc(100% + 80 * ".concat(Y.vote_cart.length-1,"px + 40px)")}},Y.vote_cart.map((function(e,t){return!1!==e&&r.createElement("div",{key:"voted_".concat(t),style:{marginTop:"".concat(40*Math.random()-20,"px"),marginLeft:"-".concat(80*t,"px"),transform:"rotate(".concat(30*Math.random()-15,"deg)")}},r.createElement(h.TW,{promotion:i,stage:n,selected_entry:!1,user:e,is_in_cart:!0,has_voting_sidebar:!1}))}))))),r.createElement("div",{className:"gallery_continue_btn template_submodule mod_align_center",style:{paddingBottom:"0"}},r.createElement("div",{className:"flex_button gui_big_button hb_secondaryFont"},r.createElement(f.ZP,P({_fullclass:!1===Y.response_on_vote?"disabled_button":""},he),ye))))))}var we=N?h.aj:h.TW,Ae=Y.vote_cart.map((function(e){return e&&e.StageVote.id})),ke=null!=F&&null==se.find((function(e){return e.Participation.id==F})),Se={closeEntryAsLayer:function(){E||R.push("/")},has_voting_sidebar:!!N,intl:e.intl,is_votable:N,onDragStart:function(e){return H({type:"SET_DRAG_START",drag:e})},openDetailLayer:function(e){E||R.push("/".concat(e))},promotion:i,selected_entry:F,stage:n,votes_casted:Ae,voteForEntry:de};return r.createElement(s.W,{backend:c.zr,options:{enableMouseEvents:N,enableTouchEvents:!1}},r.createElement(z,ve,r.createElement("aside",{className:"gui_gallery_filter gui_main_text_color_on_bg"},r.createElement("div",{className:"total_entries hb_secondaryFont"},r.createElement(g.Z,{_class:{other:"hb_secondaryFont",first:!0},autotranslate:!1},t("Total"),": ",0==ie.filters.length?ie.total:ie.filtered.length)),r.createElement("div",{className:"search_form"},r.createElement("div",null,r.createElement(v.Z,{_class:{first:!0},change:function(e,t){fe();var n={key:"search",name:"Name",tier1:["Participation.search_media_values"],tier2:j({},l.Gn.textOperators),tier3:"input"};ae({type:"SETFILTER",filter:{key:"search",value:t,operator:"like",filter:n},unique:!0}),te(t)},value:ee,placeholder:"Search",name:"search"})))),N&&r.createElement(w.Z,{avail_participations:C,collapsed:Y.collapsed,dispatchGallery:H,toggleCollapsed:function(){H({type:"TOGGLE_COLLAPSED"})},is_builder:E,onItemDrop:function(e,t){if("simple"===n.voting_type)de(e);else H({type:"ADD_VOTE_CART_SLOT",participant:e,pos:t})},onSortEnd:function(e){H({type:"SET_STARTING_CART",cart:e})},promotion:i,removeFromCart:function(e,t){H({type:"DEL_VOTE_CART",id:e,index:t})},resetCart:pe,stage:n,users:Y.vote_cart,votingSubmit:function(t,n,r){null!=e.votingSubmit&&e.votingSubmit(t,n,r),pe()},is_logged:k,login_id:S}),r.createElement("ul",{className:"gui_multimedia_gallery has_column_of_".concat(4," gui_main_text_color_on_bg")},ie.filtered.length>0&&ke&&r.createElement(we,P({key:F,user:ie.filtered.find((function(e){return e.Participation.id==F})),is_forced:!0},Se)),r.createElement(D,{intl:e.intl,user:ie.filtered[1],promotion:i,stage:n}),r.createElement(Z,{intl:e.intl,display_animation:Y.collapsed,user:Y.animate,promotion:i,stage:n}),se.map((function(e){return r.createElement(we,P({item_id:"gallery_".concat(e.Participation.id),key:e.Participation.id,user:e},Se))}))),ce.total_pages>1&&r.createElement("nav",{className:"gui_pagination gui_main_text_color_on_bg"},r.createElement(f.wL,{icon:"knk-arrow-l-big",_class:{other:"hb_secondaryFont go_prev_page"},onClick:function(){return _e(ce.page>1?ce.page-1:1)},autotranslate:!1}),ce.pages_arr.map((function(e,t){var n=e==ce.page;return r.createElement(f.ZP,{key:t,_class:{other:"hb_secondaryFont go_"+e+"_page"+(n?" selected"+(ge?" blackColor":" whiteColor"):" blackColor")},onClick:function(){return _e(e)},autotranslate:!1},e)})),r.createElement(f.wL,{icon:"knk-arrow-r-big",_class:{other:"hb_secondaryFont go_next_page"},onClick:function(){return _e(ce.page<ce.total_pages?ce.page+1:ce.total_pages)},autotranslate:!1})),Y.display_message_vote_self&&r.createElement(b.Z,{pm:i,title:"Oops",backButton:function(){return H({type:"TOGGLE_ADD_CART_ERROR"})}},r.createElement(A.Z,{parseHTML:!1,_class:{font_size:"small_p"}},r.createElement("p",null,t("Sorry! You cannot vote for one of your entries."))))))};(0,u.injectIntl)(M);t.Z=(0,u.injectIntl)((function(e){var t="".concat(e.base_route).concat(e.stage.promotion_id,"/").concat(e.stage.id);return r.createElement(a.VK,{basename:t},r.createElement(o.rs,null,r.createElement(o.AW,{path:"/:selected_entry?"},r.createElement(M,e))))}))},57107:function(e,t,n){"use strict";n.d(t,{E:function(){return j}});n(91058),n(92222),n(38862),n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),n(47042),n(91038),n(74916),n(77601),n(96649),n(96078),n(9653),n(69070),n(47941),n(57327),n(38880),n(54747),n(49337),n(33321),n(19601);var r=n(67294),i=n(37101),a=n(24445),o=n(30273),l=n(59143),s=n(40230),c=n(37616),u=n(17277),m=n(219),d=n(22472),p=n(11485),f=n(56490),_=n(7384),g=n(28247),v=n(48837),y=n(2916),h=n(23214),b=n(71490),E=n(29187),w=n(19184),A=n(68257);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=function(e,t,n,r){var i=!(!moment.tz(n.start_date,e).isBefore()||!moment.tz(n.end_date,e).isAfter()),a=!!moment.tz(n.end_date,e).isBefore();return[i,a,!i&&!a,!!(null==t||null!=t.retries&&t.retries>0||r)]};t.Z=(0,i.injectIntl)((function(e){var t,n,i,k,x,j=function(t,n){return(0,a.ex)(t,e.intl,n)},N=P((0,r.useState)(!1),2),T=N[0],B=N[1],I=P((0,r.useState)(""),2),z=(I[0],I[1]),D=P((0,r.useState)(e.ticket),2),Z=D[0],M=D[1],F=P((0,r.useState)(!1),2),R=F[0],L=F[1],U=P((0,r.useState)(!1),2),q=U[0],W=U[1],G=(0,r.useRef)(!1),V=null!==(t=null===(n=window)||void 0===n?void 0:n.is_owner)&&void 0!==t&&t,Y=e.stage.Stage,H=parseInt(e.stage.Stage.type),Q=null!==(i=null==e||null===(k=e.promotion)||void 0===k||null===(x=k.Promotion)||void 0===x?void 0:x.id)&&void 0!==i&&i,J=function(e,t){$.post("/promotions/prereq/".concat(Q),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:Y.id},e),(function(e){null!=t&&t(e)}),"JSON")},K=function(e){if(null!=Y.reqs_type&&null!=Y.reqs_freq&&1==Y.reqs_freq)return M(!1),z(""),void W(!1);Y.type==o.MN.ID_TIMED_CATEGORY.id&&L(!1),null!=e&&e()},X=function(e,t,n){$.post("/promotions/participate/".concat(Q,"/").concat(Y.id),{points:e,user:(0,a.Yz)((0,a.n_)(JSON.parse(JSON.stringify(t)))),ticket:Z},(function(e){(function(e){return 0==e.status&&("prize_closed"==e.reason&&(window.location.href="/promotions/not_allowed/".concat(Q,"/no_more_prizes/").concat(Y.id)),!0)})(e)||void 0!==n&&n(e)}),"JSON")};return isNaN(H)?r.createElement("div",null,j("Wrong stage type.")):T?r.createElement("section",{className:"mod_align_center gui_full_container main_contents_flex"},r.createElement("article",{id:"success_contents",className:"success_container gui_semi_container"},r.createElement("article",{className:"success_status"},r.createElement("div",{className:"thankyou_message"},r.createElement(_.Z,{_class:{other:"mod_align_param gui_main_text_color_on_bg"},style:{minHeight:"200px"}},j("You are being redirected. Please, wait.")),r.createElement(g.Z,null))))):null==Y.reqs_type||0==Y.reqs_type||Z?H==o.MN.ID_FORM_CATEGORY.id?r.createElement(u.Z,S({},e,{participate:function(e){$.post("/promotions/participate/".concat(Q,"/").concat(Y.id),{ticket:Z},(function(e){e.status&&(window.location.href=e.url)}),"JSON")},ticket:Z})):H==o.MN.ID_QUIZ_CATEGORY.id?q?null==q.qr?(setTimeout((function(){window.location.href=q.url}),2e3),r.createElement("section",{className:"mod_align_center gui_full_container main_contents_flex"},r.createElement("article",{id:"success_contents",className:"success_container gui_semi_container"},r.createElement("article",{className:"success_status"},r.createElement("div",{className:"thankyou_message"},r.createElement(_.Z,{_class:{other:"mod_align_param gui_main_text_color_on_bg"},style:{minHeight:"200px"}},j("You are being redirected. Please, wait.")),r.createElement(g.Z,null)))))):r.createElement(v.Z,{promotion:e.promotion.Promotion,stage:Y,is_builder:V,response:q,play_again:function(e,t){return K((function(){t(),W(!1),G.current=!1}))}}):G.current?null:r.createElement(l.Z,{store:e.store,stage:e.stage,is_game:!1,questions:e.questions,promotion:e.promotion,gp_hash:e.gp_hash,submitQuiz:function(e,t,n){B(!0),G.current=!0,X(e,t,(function(e){B(!1),W(e)}))},canPlayAgain:K,multiparticipation:!0,progress_type:Y.quiz_progress_type,enable_change:Y.quiz_enable_change}):H==o.MN.ID_GAME_CATEGORY.id?r.createElement(l.Z,{store:e.store,stage:e.stage,is_game:!0,questions:e.questions,promotion:e.promotion,gp_hash:e.gp_hash,submitQuiz:X,canPlayAgain:K,multiparticipation:!0}):H==o.MN.ID_MEDIA_CATEGORY.id?r.createElement(d.Z,{is_game:!1,stage:e.stage,questions:e.questions,gp_hash:e.gp_hash,promotion:e.promotion.Promotion,submitMedias:function(e,t){$.post("/promotions/participate/".concat(Q,"/").concat(Y.id),{user:JSON.stringify(e),ticket:Z},(function(e){void 0!==t&&t(e)}),"JSON")},canPlayAgain:K,multiparticipation:!1,brackets:e.brackets}):H==o.MN.ID_VOTING_CATEGORY.id?r.createElement(y.Z,{stage:e.stage.Stage,promotion:e.promotion.Promotion,base_route:"/promotions/participate/",votingSubmit:X,avail_participations:{},is_logged:!0}):H==o.MN.ID_ROULETTE_CATEGORY.id?r.createElement(b.Z,S({},e,{canPlayAgain:K,ticket:Z})):H==o.MN.ID_TIMED_CATEGORY.id?R?r.createElement(p.Z,{is_game:!0,stage:e.stage,questions:R,gp_hash:e.gp_hash,promotion:e.promotion.Promotion,main_color:e.promotion.Promotion.config_styles.promotion.style.main_color_bg,submitQuiz:function(e,t,n){$.post("/promotions/participate/".concat(Q,"/").concat(Y.id),{points:e,user:(0,a.Yz)((0,a.n_)(JSON.parse(JSON.stringify({user:t,points:e})))),ticket:Z},(function(e){void 0!==n&&n(e)}),"JSON")},canPlayAgain:K,multiparticipation:!0}):($.get("/promotions/gettrivia/".concat(Q,"/").concat(Y.id),(function(e){var t=JSON.parse(atob(e));L(t)})),r.createElement("div",null,"Loading...")):H==o.MN.ID_BRACKET_CATEGORY.id?r.createElement(s.Z,{is_game:!1,stage:e.stage,questions:e.questions,gp_hash:e.gp_hash,promo_layout:e.promotion.Promotion.config_styles.promotion.style,submitQuiz:function(e,t){$.post("/promotions/participate/".concat(Q,"/").concat(Y.id),{user:(0,a.Yz)((0,a.n_)(JSON.parse(JSON.stringify(e)))),ticket:Z},(function(e){void 0!==t&&t(e)}),"JSON")},canPlayAgain:K,multiparticipation:!1,brackets:e.brackets}):H==o.MN.ID_CRUSH_CATEGORY.id?r.createElement(c.Z,{is_game:!1,stage:e.stage,promotion:e.promotion.Promotion,gp_hash:e.gp_hash,promo_layout:e.promotion.Promotion.config_styles.promotion.style,submitQuiz:X,canPlayAgain:K,multiparticipation:!0}):H==o.MN.ID_GUESSWORD_CATEGORY.id?r.createElement(m.Z,{is_game:!1,stage:e.stage,promotion:e.promotion.Promotion,gp_hash:e.gp_hash,promo_layout:e.promotion.Promotion.config_styles.promotion.style,submitQuiz:X,canPlayAgain:K,multiparticipation:!0,locale:e.locale}):H==o.MN.ID_STORY_CATEGORY.id?r.createElement(f.Z,{stage:e.stage.Stage,participate:function(e){$.post("/promotions/participate/".concat(Q,"/").concat(Y.id),{ticket:Z},(function(t){t.status&&(window.location.href=null!=e?e:t.url)}),"JSON")},ticket:Z}):H==o.MN.ID_REVEAL_CATEGORY.id?r.createElement(E.Z,S({},e,{canPlayAgain:K,ticket:Z})):H==o.MN.ID_TEAM_CATEGORY.id?r.createElement(A.Z,S({},e,{canPlayAgain:K,ticket:Z})):H==o.MN.ID_REVEAL_WIN_CATEGORY.id?r.createElement(h.Z,S({},e,{canPlayAgain:K,ticket:Z})):r.createElement("div",null,j("This kind of stage is not defined yet!")):r.createElement(w.Z,{change:function(e,t){"code"==e&&z(t)},promotion:e.promotion.Promotion,validate:function(e,t){switch(Y.reqs_type){case"1":case"3":J(e,(function(e){1==e.status?(M(e.ticket),null!=t&&t(e)):null!=t&&t(e)}));break;case"4":J(e,(function(e){1==e.status?null!=t&&t(e,(function(){return M(e.ticket)})):null!=t&&t(e)}))}},continue:function(e){$.post("/promotions/prereq/".concat(Q),{id:Y.id},(function(t){M(t.ticket),null!=e&&e(t)}),"JSON")},stage:Y,stages:e.stages,participations:e.participations})}))},23214:function(e,t,n){"use strict";n(47941),n(82772),n(82526),n(41817),n(32165),n(66992),n(78783),n(33948),n(47042),n(91038),n(77601),n(96649),n(96078),n(9653),n(69070),n(57327),n(38880),n(54747),n(49337),n(33321),n(21249),n(74916),n(15306),n(92222),n(69826),n(41539),n(91058);var r=n(67294),i=n(37101),a=n(24445),o=n(20170),l=n(39280),s=n(97790),c=n(27554),u=n(56357),m=n(70335),d=n(69347);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var f=["num_tries","spent_tries","is_winner","try_status","color"],_=["stage","promo"];function g(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var k=function(e){var t,n=e.num_tries,o=e.spent_tries,l=e.is_winner,s=e.try_status,c=e.color,u=A(e,f),d=function(e,t){return(0,a.ex)(e,u.intl,t)},p=null!==(t=null==u?void 0:u.total_w)&&void 0!==t?t:600,_=[];if(null!=n)for(var g=0;g<n;g++)_.push(g+1);if(_.length<2)return null;var v=n-o,y=(null==u?void 0:u.reveal_num)||3;return r.createElement(r.Fragment,null,3==y&&r.createElement("div",{className:"reveal_instructions gui_main_text_color_on_bg mod_align_param"},r.createElement("p",{className:"gui_leveled_text_small_p hb_mainFontWeightLight"},r.createElement("span",null,d("Find 3 of a kind.")),r.createElement("strong",{className:"gui_not_in_start_tiny"},v>0?r.createElement(i.FormattedPlural,{value:v,one:r.createElement(i.FormattedMessage,{id:"You have {num} attempt.",values:{num:v}}),other:r.createElement(i.FormattedMessage,{id:"You have {num} attempts.",values:{num:v}})}):r.createElement("span",null,d("You ran out of moves!"))))),r.createElement("ul",{className:"num_tries"},_.map((function(e,t){var i=t<o,a=o==n-1&&t==_.length-1,d=null!=s[t]?s[t]:null,f=null!=d?{background:d?u.color_ok:u.color_ko}:null;return r.createElement("li",{key:"try_".concat(t),style:f},r.createElement(m.Z,{is_spent:i,last_item:a&&!l,is_winner:d,color:c,icon_w:(p-5*(_.length-1))/_.length}))}))))},S=function(e){var t=e.bg_type,n=e.stage,i=e.main_color,a=null!=n.bg_image&&n.full_bg_image,o=null!=n.bg_image_ok&&n.full_bg_image_ok,l=null!=n.bg_image_ko&&n.full_bg_image_ko,s=(null==n?void 0:n.bg_color)||i,c={};switch(a&&(c.backgroundImage="url(".concat(a,")")),s&&(c.backgroundColor=s),t){case-1:break;case 0:l&&(c.backgroundImage="url(".concat(l,")"));break;case 1:o&&(c.backgroundImage="url(".concat(o,")"))}return r.createElement("div",{className:"game_bg_mod is_fullscreen relative_to_container",style:c})},C=function(e){var t,n,i,o,c=e.stage,u=e.promo,m=A(e,_),d=function(e){null!=m.participate&&m.participate(e)},p=null!==(t=null==m?void 0:m.is_builder)&&void 0!==t&&t,f=m.intl.formatMessage({id:"You have {tries} tries to find {num_prizes} prizes"},{tries:c.reveal_tries,num_prizes:c.reveal_num});return null!=c.instructions_description&&""!=c.instructions_description&&(f=c.instructions_description),r.createElement(s.Z,{only_contents:!0,pm:u,title:(null==c?void 0:c.instructions_title)||"How to play?",backButton:function(e,t){return d(t)},is_builder:p,display_close_button:!1,title_alignment:"center",max_width:"350px"},r.createElement("div",{className:"gui_canvas_instructions"},r.createElement("div",{className:"cta_and_info"},r.createElement("div",{className:"gui_not_in_top_small flex_button gui_big_button hb_secondaryFont register_flex"},r.createElement(l.Z,{_fullclass:"",onClick:function(e,t){return d(t)},autotranslate:!1},null!==(n=null==c?void 0:c.instructions_button)&&void 0!==n?n:(i="Try your luck",(0,a.ex)(i,m.intl,o))))),r.createElement("div",{className:"gui_text_align_center gui_pos_rel",style:{minHeight:"50px"}},c.instructions_img&&r.createElement("img",{className:"instructions_img",src:c.full_instructions_img,alt:""}),r.createElement("div",{className:"instructions_text",dangerouslySetInnerHTML:{__html:f.replace(/\n/g,"<br />")}}))))};t.Z=(0,i.injectIntl)((function(e){var t,n,i,l=null!=e.stage&&e.stage.Stage;if(!1===l)return null;var s=(null==e?void 0:e.is_builder)||!1,m=!(!s||null==e.is_editing)&&e.is_editing,p=null===(t=null==e?void 0:e.is_playable)||void 0===t||t,f=(null==e?void 0:e.display_instructions)||!1,_=b((0,r.useState)(!s),2),v=_[0],h=_[1],E=b((0,r.useState)(null!==(n=e.userInfo)&&void 0!==n?n:{}),2),w=E[0],A=E[1],O=b((0,r.useState)(null!==(i=e.given_prize)&&void 0!==i?i:null),2),P=O[0],x=O[1],j=b((0,r.useState)(null),2),N=j[0],T=j[1],B=(0,r.useRef)(!0),I=(0,r.useRef)(),z=(0,r.useRef)(),D=(0,r.useRef)(),Z=e.promotion.Promotion,M=function e(t){for(var n=document.querySelector(".gui_game_parent");t>0&&null==n;)e(t-1);if(null!=n){var r=Math.min(n.clientWidth,document.querySelector(".flex_cols").clientWidth);if(r>250)return r}return 600};(0,r.useEffect)((function(){setTimeout((function(){T(M(3))}),400);var e=document.querySelector(".main_flex_wrapper");e.classList.remove("is_game"),e.classList.add("is_new_game")}),[]);(0,r.useEffect)((function(){x(e.given_prize)}),[e.given_prize]);var F,R=0==(F=P)||null==F?{id:0}:"prize"==F?{id:"prize"}:e.prizes.find((function(e){return e.id==F})),L=(0,a.Af)(Z),U=(0,a.Zu)(Z);return r.createElement(c.Z,null,r.createElement(d.Z,{ref:z,initial:{num_tries:parseInt(l.reveal_tries),spent_tries:0,is_winner:!1,try_status:[],color:U,color_ok:(null==l?void 0:l.game_color_ok)||"#75C400",color_ko:(null==l?void 0:l.game_color_ko)||"#D8253B",reveal_num:parseInt(l.reveal_num),intl:e.intl},reducer:function(e,t){switch(t.type){case"SPEND_LIFE":return y(y({},e),{},{spent_tries:e.spent_tries+1,try_status:[].concat(g(e.try_status),[t.try_status])});case"IS_WINNER":return y(y({},e),{},{spent_tries:e.spent_tries+1,is_winner:t.is_winner,try_status:[].concat(g(e.try_status),[!0])})}}},r.createElement(k,{total_w:N})),r.createElement("div",{className:"gui_game_parent"},r.createElement("img",{src:"".concat(window.cdn_url,"img/blank_1x1.png"),width:"100%",alt:""}),r.createElement(d.Z,{ref:D,initial:{bg_type:-1,stage:l,main_color:L},reducer:function(e,t){switch(t.type){case"SET_BG_OK":return e.stage.bg_image_ok?y(y({},e),{},{bg_type:1}):e;case"SET_BG_KO":return e.stage.bg_image_ko?y(y({},e),{},{bg_type:0}):e}}},r.createElement(S,null)),null!=N?r.createElement(u.Z,{canvas_size:N,onFinish:function(){B.current=!1,0!=R.id&&z.current.dispatch({type:"IS_WINNER",is_winner:!0}),D.current.dispatch({type:0!=R.id?"SET_BG_OK":"SET_BG_KO"})},prizeType:R,promotion:Z,stage:l,areaChanged:e.areaChanged,onHit:function(e){z.current.dispatch({type:"SPEND_LIFE",try_status:e})},userInfo:w,onFinishGame:function(){null!=w.url&&(window.location.href=w.url)},is_builder:s,is_editing:m,is_playable:p}):r.createElement("div",{className:"is_fullscreen relative_to_container"},r.createElement(o.Z,{force_bg:!0})),(v||f)&&r.createElement(C,{participate:function(t){s||$.post("/promotions/participate/".concat(Z.id,"/").concat(l.id),{spin:!0,ticket:e.ticket},(function(e){if(e.status){var n=e.url.split("/");I.current=n[n.length-2],x(e.spt),A(e),v&&h(!1),null!=t&&t()}else null!=e.url&&(window.location.href=e.url)}),"JSON")},stage:l,promo:Z,is_builder:s,intl:e.intl})))}))},86095:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ta}});n(92222),n(82772),n(41539),n(39714),n(82526),n(41817),n(32165),n(66992),n(78783),n(33948),n(91038),n(47042),n(74916),n(77601),n(96649),n(96078),n(9653),n(69070),n(47941),n(57327),n(38880),n(54747),n(49337),n(33321),n(19601);var r=n(67294),i=n(73935),a=(n(21249),n(68304),n(30489),n(81299),n(12419),n(37101)),o=n(24445),l=n(96486),s=n(72898),c=n(89974),u=n(20170);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function _(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(m,e);var t,n,i,a=v(m);function m(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(n=a.call(this,e,t)).state={is_logged:(0,l.size)(e.user)>0,user:e.user,media_type:e.media_type,elements:[],selected_media:!1,visible_media:"",next:!1,previous:!1,is_loading:!1},n.max_pages=3,n}return t=m,n=[{key:"componentDidMount",value:function(){(0,l.size)(this.state.user)>0&&this.getMediaIG()}},{key:"resetMedia",value:function(){this.setState({selected_media:!1})}},{key:"toggleUsageLayer",value:function(){this.setState({display_usage_layer:!this.state.display_usage_layer})}},{key:"getMediaIG",value:function(e){var t=this;"photo"!=this.state.media_type&&"image"!=this.state.media_type||$(".field_UserPicture").hide(),"video"==this.state.media_type&&$("#mediacontainer").hide(),"both"==this.state.media_type&&$("#mediacontainer").hide();var n=this.state.user,r="";(this.state.next||this.state.prev)&&(r=e>0?"/"+r+"/"+this.state.next:"/"+r+"/"+this.state.prev),this.setState({is_loading:!0}),$.get("/utils/instagram_media/"+n.id+"/"+r,(function(e){t.state.is_loading=!1,(0,l.size)(e.elements)>0&&(t.state.elements=e.elements,t.state.next=null!=e.next&&e.next,t.state.prev=null!=e.prev&&e.prev),t.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.state))}),"JSON")}},{key:"getPrev",value:function(){this.getMediaIG(0)}},{key:"getNext",value:function(){this.getMediaIG(1)}},{key:"selectFromIG",value:function(){this.setState({show:!0}),$(".field_UserPicture").hide(),$(".field_UserMediaIG").hide(),$("#mediacontainer").hide()}},{key:"selectFromDevice",value:function(){$(".field_UserPicture").show(),this.setState({show:!1}),this.props.onClose&&this.props.onClose()}},{key:"setPicture",value:function(e,t){var n=e.link,r=n+"media";$("#UserMediainstagram").val(n),$("#UserMediainstagramCdn").val(e.picture),$("#UserMediainstagramType").val(t),$("#UserComment").length>0&&$("#UserComment").val(e.caption),this.setState({selected_media:r,visible_media:e.picture}),null!=this.props.onSelect&&this.props.onSelect()}},{key:"connect",value:function(){window.location="/utils/instagram/?promotion_id=".concat(this.props.promotion.id)}},{key:"render",value:function(){var e,t,n=this;return this.state.is_logged?r.createElement("div",{className:"field_UserMediaIG"},r.createElement("span",null,(e="Connected as",(0,o.ex)(e,n.props.intl,t)),": @",this.state.user.username),this.props.usage&&r.createElement(c.Z,{_class:{other:"from_device",in_top:!1},onClick:function(){return n.toggleUsageLayer()}},"How will we use your photo?"),!this.state.selected_media&&!this.state.hashtag&&r.createElement(c.Z,{_class:{other:"from_device",in_top:!1},onClick:function(){return n.selectFromDevice()}},"Select from your device"),this.state.selected_media&&r.createElement("div",{className:"gui_instagram_gallery is_selected_media"},r.createElement("ul",{className:"gui_ig_gallery"},r.createElement("li",{id:"gui_selected_media",style:{backgroundImage:"url("+this.state.visible_media+")"}},r.createElement("img",{src:"".concat(window.cdn_url,"img/blank_1x1.png"),width:"100%"}),r.createElement("span",{className:"selected_tick ep-ok"})),r.createElement("li",{className:"change_image",onClick:function(){return n.resetMedia()}},r.createElement("div",{className:"knk-reload"},r.createElement("img",{src:"".concat(window.cdn_url,"img/blank_1x1.png"),width:"100%"}))))),!this.state.selected_media&&(0,l.size)(this.state.elements)>0&&r.createElement("div",{className:"gui_instagram_gallery"+(this.state.is_loading?" is_loading":"")},r.createElement("ul",{className:"gui_ig_gallery"},this.state.elements.map((function(e,t){var i="both"!=n.state.media_type&&n.state.media_type!=e.type,a=["is_".concat(e.type)];return i&&a.push("is_disabled"),r.createElement("li",{key:t,className:a.join(" "),style:{backgroundImage:"url(".concat(e.picture,")")},onClick:function(){return i?null:n.setPicture(e,e.type)}},r.createElement("img",{src:"".concat(window.cdn_url,"img/blank_1x1.png"),width:"100%"}))}))),this.state.is_loading&&r.createElement(u.Z,null,"Fetching pictures"))):r.createElement(s.ZP,{icon:"ep-instagram",onClick:function(){return n.connect()}},"Connect your Instagram account")}}],n&&f(t.prototype,n),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),m}(r.Component),b=(0,a.injectIntl)(h),E=(n(15306),n(20159)),w=n(97790),A=n(7384);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,a=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===k(a)?a:String(a)),r)}var i,a}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(d,e);var t,n,i,m=O(d);function d(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(n=m.call(this,e,t)).state={media_type:e.media_type,next:!1,previous:!1,first_load:!0,display_usage_layer:!1,last_id:!1,hashtag:null!=e.hashtag&&0!=e.hashtag&&e.hashtag.replace("#","").toLowerCase(),history:[!1],is_loading:!1,is_logged:null!=e.user.id&&e.user.id,no_more_calls:!1,page_number:1,selected_media:!1,show:!0,visible_media:!1,reseting:!1},n.max_pages=3,n}return t=d,(n=[{key:"componentDidMount",value:function(){this.getMedia()}},{key:"resetMedia",value:function(){var e=this;$("#UserMediainstagram").val(""),$("#UserMediainstagramCdn").val(""),$("#UserMediainstagramType").val(""),$("#UserComment").val(""),this.setState({reseting:!0,selected_media:!1}),setTimeout((function(){e.setState({visible_media:!1,reseting:!1})}),1e3)}},{key:"toggleUsageLayer",value:function(){this.setState({display_usage_layer:!this.state.display_usage_layer})}},{key:"getMedia",value:function(e){var t=this;if("photo"!=this.state.media_type&&"image"!=this.state.media_type||$(".field_UserPicture").hide(),"video"==this.state.media_type&&$("#mediacontainer").hide(),"both"==this.state.media_type&&$("#mediacontainer").hide(),this.setState({is_loading:!0}),this.state.hashtag&&this.state.hashtag,null==e||this.state.page_number<this.max_pages&&e>0||this.state.page_number>1&&e<0){var n="";(this.state.next||this.state.previous)&&(n=e>0?e+"/"+this.state.next:e+"/"+this.state.previous);var r=this.props.user;$.get("/utils/instagram_media/"+r.id+"/"+n,(function(n){t.state.no_more_calls=!1,t.state.hashtag?(n.elements=n.elements.filter((function(e){return-1!=e.name.indexOf(t.state.hashtag)})),0==(0,l.size)(n.elements)&&(t.reason="hashtag")):"both"!=t.state.media_type?0==(0,l.size)(n.elements)&&(t.reason=t.state.media_type):0==(0,l.size)(n.elements)&&t.setState({no_more_calls:!0}),t.state.no_more_calls||t.setState({media:n,first_load:!1,next:null!=n.next&&n.next,previous:null!=n.previous&&n.previous,page_number:null!=e?t.state.page_number+e:t.state.page_number}),setTimeout((function(){t.setState({is_loading:!1})}),200)}),"JSON")}}},{key:"getPrev",value:function(){this.getMedia(-1)}},{key:"getNext",value:function(){this.getMedia(1)}},{key:"selectFromIG",value:function(){this.setState({show:!0}),$(".field_UserPicture").hide(),$(".field_UserMediaIG").hide(),$("#mediacontainer").hide()}},{key:"selectFromDevice",value:function(){$(".field_UserPicture").show(),this.setState({show:!1}),this.props.onClose&&this.props.onClose()}},{key:"setPicture",value:function(e,t){var n=e.link;$("#UserMediainstagram").val(n),$("#UserMediainstagramCdn").val(e.picture),$("#UserMediainstagramType").val(t),$("#UserComment").length>0&&$("#UserComment").val(e.name),this.setState({selected_media:!0,visible_media:e.picture}),null!=this.props.onSelect&&this.props.onSelect()}},{key:"connect",value:function(){window.location="/utils/social/instagram/login/".concat(this.props.promotion_id,"?rurl=").concat(window.location.href)}},{key:"logout",value:function(){window.location="/utils/social/instagram/logout?rurl="+window.location.href}},{key:"render",value:function(){var e=this,t=function(t,n){return(0,o.ex)(t,e.props.intl,n)},n=(null!=this.state.media&&0!=this.state.media&&this.state.media.elements.length,null!=this.props.media_label&&this.props.media_label,null==this.state.media||0==this.state.media||0!=this.state.media.elements.length),i=null!=this.props.user.username&&this.props.user.username,l=(navigator.userAgent.toLowerCase().indexOf("android"),this.props.hashtag.replace("#","")),m=!1;null!=window.platform_so&&null!=window.platform&&"mobile"==window.platform&&("android"==window.platform_so?m="intent://instagram.com/_u/".concat(i,"/#Intent;package=com.instagram.android;scheme=https;end"):(window.platform_so="ios")&&(m="instagram://user?username=".concat(i)));var d=null!=this.props.privacy_policy&&this.props.privacy_policy;return this.state.show?this.state.is_logged?r.createElement("div",{className:"field_UserMediaIG"},null!=this.props.user.username&&r.createElement("div",{className:"is_logged_sn"},r.createElement(a.FormattedMessage,{id:"Logged as {username}",values:{username:r.createElement(c.Z,{_href:"https://www.instagram.com/"+this.props.user.username,_target:"_blank",_class:{other:"logged_user ep-instagram"}},this.props.user.username)}}),r.createElement(c.Z,{onClick:function(){return e.logout()}},"Change")),r.createElement("div",{className:"is_logged_sn"},r.createElement(a.FormattedMessage,{id:"Displaying posts with hashtag {hashtag}",values:{hashtag:r.createElement("strong",null,"#",l)}})),this.props.usage&&r.createElement(c.Z,{_class:{other:"from_device",in_top:!1},onClick:function(){return e.toggleUsageLayer()}},"How will we use your photo?"),!this.state.selected_media&&!this.state.hashtag&&r.createElement(c.Z,{_class:{other:"from_device",in_top:!1},onClick:function(){return e.selectFromDevice()}},"Select from your device"),(this.state.media&&!this.state.selected_media||this.state.first_load)&&r.createElement("div",{className:"gui_instagram_gallery"+(this.state.is_loading?" is_loading":"")},!n&&"hashtag"==this.reason&&r.createElement(E.g7,{_class:{other:"in_top in_bottom"}},r.createElement("p",null,r.createElement(a.FormattedMessage,{id:"You don't have any posts with the hashtag {query}.",values:{query:r.createElement("strong",null,"#",l)}})),r.createElement("ol",null,m&&r.createElement("li",null,r.createElement(c.Z,{_class:{other:"redColor"},_href:m,_target:"_blank"},"Go to Instagram app")),r.createElement("li",null,r.createElement(a.FormattedMessage,{id:"Share a photo on your Instagram profile with the hashtag {query}",values:{query:r.createElement("span",null,"#",l)}})),r.createElement("li",null,r.createElement("span",null,t("REFRESH this page and select your contest photo"))))),!n&&"video"==this.reason&&r.createElement("div",null,t("There are no videos in your last uploads.")),r.createElement("ul",{className:"gui_ig_gallery"},!this.state.first_load&&this.state.media.elements.map((function(t,n){var i=!!("both"!=e.state.media_type&&e.state.media_type!=t.type||e.state.hashtag&&-1==t.name.indexOf(e.state.hashtag)),a=["is_"+t.type];return i&&a.push("is_disabled"),r.createElement("li",{key:n,className:a.join(" "),style:{backgroundImage:"url("+t.picture+")"},onClick:function(){return i?null:e.setPicture(t,t.type)}},r.createElement("img",{src:window.cdn_url+"img/blank_1x1.png",width:"100%"}))})),!this.state.first_load&&1===this.state.media.elements.length&&!this.state.selected_media&&r.createElement("li",{className:"select_media_message"},r.createElement("p",{className:"knk-arrow-l-big"},t("Click on the image to select it")))),(this.state.previous||this.state.next)&&r.createElement("nav",{className:"gui_navigate_to_slide"},r.createElement(s.wL,{disabled:!this.state.previous,color:"transparent",icon:"knk-arrow-l-big",_class:{other:"go_prev"},onClick:function(){return e.getPrev()}}),r.createElement(s.wL,{disabled:!this.state.next||this.state.page_number>=this.max_pages,color:"transparent",icon:"knk-arrow-r-big",_class:{other:"go_next"},onClick:function(){return e.getNext()}})),this.state.is_loading&&r.createElement(u.Z,null,"Fetching pictures"),this.state.reseting&&r.createElement(u.Z,null,"Removing selection")),this.state.selected_media&&r.createElement("div",{className:"gui_instagram_gallery is_selected_media"},r.createElement("ul",{className:"gui_ig_gallery"},r.createElement("li",{id:"gui_selected_media",style:{backgroundImage:"url("+this.state.visible_media+")"}},r.createElement("img",{src:window.cdn_url+"img/blank_1x1.png",width:"100%"}),r.createElement("span",{className:"selected_tick ep-ok"})),r.createElement("li",{className:"change_image",onClick:function(){return e.resetMedia()}},r.createElement("div",{className:"knk-reload"},r.createElement("img",{src:window.cdn_url+"img/blank_1x1.png",width:"100%"}))))),this.props.usage&&this.state.display_usage_layer&&r.createElement(w.Z,{backButton:function(){return e.toggleUsageLayer()},title:"How will we use your photo?"},r.createElement(A.Z,{_class:{font_size:"small_p"},parseHTML:!1},r.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.usage}})),d&&r.createElement("ul",{className:"related_link original_color_item"},r.createElement("li",{className:"link"},r.createElement(a.FormattedMessage,{id:"You will find more information in our {link}.",values:{link:r.createElement(c.Z,{_href:d,_target:"_blank"},"Privacy policy")}}))))):r.createElement(c.Z,{_class:{icon:"ep-instagram",other:"logged_user"},onClick:function(){return e.connect()}},"Connect your Instagram account"):r.createElement(c.Z,{_class:{other:"pick_from_ig"},onClick:function(){return e.selectFromIG()}},"Pick from Instagram")}}])&&S(t.prototype,n),i&&S(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(r.Component),j=(0,a.injectIntl)(x),N=(n(91058),n(53167));function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,a=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===T(a)?a:String(a)),r)}var i,a}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var i=Z(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}(this,n)}}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(l,e);var t,n,i,a=z(l);function l(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=a.call(this,e,t)).in_sidebar=null!=e.in_sidebar&&e.in_sidebar,n.promotion_id=null!=e.promotion_id&&e.promotion_id,n.state={display_menu:!!n.in_sidebar},n.in_sidebar||(n.handleKeyDown=n._handleKeyDown.bind(D(n))),n}return t=l,(n=[{key:"componentWillMount",value:function(){(0,o.pZ)("comp/my_participation.css")}},{key:"componentDidMount",value:function(){this.in_sidebar||document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){this.in_sidebar||document.removeEventListener("keydown",this.handleKeyDown)}},{key:"_handleKeyDown",value:function(e){if(!1===this.state.display_menu||this.in_sidebar)return!1;27===e.keyCode&&this.toggleMenu()}},{key:"toggleMenu",value:function(){if(this.in_sidebar)return!0;this.setState({display_menu:!this.state.display_menu})}},{key:"render",value:function(){var e,t,n,i,a,l=this;if(!this.promotion_id)return null;var s=null!==(e=null===(t=this.props)||void 0===t?void 0:t.login_id)&&void 0!==e&&e,u=null!==(n=null===(i=this.props)||void 0===i?void 0:i.login_data)&&void 0!==n&&n;if(!this.in_sidebar&&(!1===s||!1===u))return null;var m,d,p=null!==(a=null==u?void 0:u.net_type)&&void 0!==a&&a;return!1===p||7==parseInt(p)?null:!this.in_sidebar||s&&u?r.createElement("div",{className:"header_my_participation"+(this.in_sidebar?" in_sidebar":"")},this.state.display_menu&&!this.in_sidebar&&r.createElement("div",{className:"is_fullscreen",onClick:function(){return l.toggleMenu()}}),r.createElement("div",{className:"user_main_info"+(this.in_sidebar?"":" knk-arrow-b-big"),onClick:function(){return l.toggleMenu()}},null!=u.name?r.createElement("span",{className:"logged_name hb_secondaryFont not_uppercase"},u.name):r.createElement("span",{className:"logged_name hb_secondaryFont"},u.first_name,this.in_sidebar?null:" "+u.last_name),r.createElement(N.Z,{user:u,width:1.7,height:1.7})),(this.state.display_menu||this.in_sidebar)&&r.createElement("ul",{className:"gui_dropper_menu"},r.createElement("li",null,r.createElement(c.Z,{_class:{icon:"knk-me",other:"hb_secondaryFont"+(this.in_sidebar?" gui_small_icon":"")},_href:"/users/my_participation/"+this.promotion_id},"My participation")),r.createElement("li",null,r.createElement(c.Z,{_class:{icon:"knk-logout",other:"hb_secondaryFont"+(this.in_sidebar?" gui_small_icon":"")},_href:"/promotions/logout/"+this.promotion_id},"Logout")))):r.createElement("div",{className:"header_my_participation in_sidebar not_logged_in"},r.createElement("div",{className:"user_main_info knk-annonymous-users"},r.createElement("p",null,(m="Already a participant?",(0,o.ex)(m,l.props.intl,d))),r.createElement(c.Z,{_href:"/login/"+this.promotion_id,_target:"_top"},"Sign in")))}}])&&B(t.prototype,n),i&&B(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.Component),F=(0,a.injectIntl)(M),R=n(87674);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J(r.key),r)}}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var i=H(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}(this,n)}}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function Q(e,t,n){return(t=J(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){var t=function(e,t){if("object"!==L(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===L(t)?t:String(t)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(s,e);var t,n,i,l=V(s);function s(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),Q(Y(n=l.call(this,e,t)),"logout",(function(){"facebook"==n.state.logged.network&&(fbEnsureUserStatus((function(){"connected"==user_status&&FB.logout((function(e){}))})),void 0!==n.state.promotion_id&&$.get("/utils/fblogout/"+n.state.promotion_id)),$.get("/utils/social/"+n.state.logged.network+"/logout"),void 0!==n.props.onLogout&&n.props.onLogout(n.state.logged.network),n.setState({logged:!1})})),n.state={logged:!1,data:n.props.data},n.nets=[],e.data.social_login_fb&&n.nets.push({network:"facebook"}),e.data.promotion_id&&(n.state.promotion_id=e.data.promotion_id),e.data.social_login_fb&&n.checkFB(),null!=e.user&&(n.state.logged=e.user,void 0!==e.onLogin&&e.onLogin(n.state.logged)),n}return t=s,(n=[{key:"checkFB",value:function(){var e=this;EP.getFBUser((function(t){void 0===t.error&&e.logged({status:1,id:t.id,username:t.name,name:t.name,first_name:t.first_name,last_name:t.last_name,email:t.email,avatar:"https://graph.facebook.com/"+t.id+"/picture?access_token="+FB.getAuthResponse().accessToken},"facebook")}))}},{key:"login",value:function(e){var t=this;if("facebook"!==e){var n=navigator.userAgent.toLowerCase(),r=!0;(n.indexOf("android")>-1||n.indexOf("blackberry")>-1||n.indexOf("ipad")>-1||n.indexOf("iphone")>-1||n.indexOf("windows phone")>-1||n.indexOf("ipod")>-1||n.indexOf("webos")>-1)&&(r=!1),r&&(this.popup=window.open("","_blank","width=500,height=400,scrollbars=no"),this.popup.onbeforeunload=function(){})}else fbEnsureUserStatus((function(){if("connected"==user_status)t.checkFB();else{var e=null!=t.state.data.permissions?t.state.data.permissions:"email";FB.login((function(e){e.authResponse&&t.checkFB()}),{scope:e})}}))}},{key:"logged",value:function(e,t){var n=q(q({},e),{},{network:t});this.setState({logged:n}),void 0!==this.props.onLogin&&this.props.onLogin(n)}},{key:"render",value:function(){var e=this,t=function(t,n){return(0,o.ex)(t,e.props.intl,n)},n=this.state.data,i=null!=this.props.data.social_login_mandatory&&this.props.data.social_login_mandatory;if(!1===n.social_login)return null;var l=!1;return this.state.logged&&(this.state.logged.network,l="https://www.facebook.com/"+this.state.logged.id),r.createElement("div",null,this.state.logged?r.createElement("div",{className:"is_logged_sn"},r.createElement(a.FormattedMessage,{id:"Logged as {username}",values:{username:r.createElement(c.Z,{_href:l,_target:"_blank",_class:{other:"logged_user ep-"+this.state.logged.network}},this.state.logged.name)}}),this.state.logged.network&&r.createElement(c.Z,{onClick:this.logout},"Logout")):r.createElement("div",{className:"social_network_signin"+(i?" is_mandatory":"")},i?r.createElement("p",{className:"label hb_secondaryFont"},t("Log in to continue"),":"):r.createElement("p",null,t("Register easily with"),":"),r.createElement("div",{className:"networks_list gui_ribbons"},this.nets.map((function(t,n){return r.createElement(c.Z,{key:n,_class:{other:"with_icon ep-"+t.network},onClick:function(){return e.login(t.network)}},"Log in")})))))}}])&&W(t.prototype,n),i&&W(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(r.Component),X=(0,a.injectIntl)(K),ee=n(74221),te=(n(2707),n(64765),n(96029)),ne=n(98057),re=n(99722),ie=n(30273);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return(t=ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ue(r.key),r)}}function ue(e){var t=function(e,t){if("object"!==ae(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ae(t)?t:String(t)}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pe(e);if(t){var i=pe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}var fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(c,e);var t,n,i,s=de(c);function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=s.call(this,e,t)).state={custom_layer_title:!1,loaded:!1,participants:[],search_value:"",total:null!=e.total?e.total:0},n.is_builder=null!=e.is_builder&&e.is_builder,n.scrollable_element=window.document,n.onChangeDebounced=(0,l.debounce)(n.onChangeDebounced,1e3),n}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this;this.fetchParticipants(1,(function(t){return e.fetched(t.data)})),this.setState(le({},this.state)),(0,o.Fz)()}},{key:"fetched",value:function(e){this.state.participants=this.state.participants.concat(e),this.state.loaded||(this.state.loaded=!0),this.setState(le({},this.state))}},{key:"fetchParticipants",value:function(e,t){var n=this,r={};e&&(r.page=e);var i=""!=this.state.search_value&&this.state.search_value;i&&(r.search=i),this.is_builder?(this.setState({loaded:!0,searching:!1,total:(0,l.size)(this.props.participants)}),t({data:this.props.participants.sort((function(e,t){return e.User.points<t.User.points?1:-1})),hasMore:!1})):$.get("/users/current_users/"+this.props.promotion.id,r,(function(e){n.setState({loaded:!0,searching:!1,total:e.total}),t&&t({data:e.entries,hasMore:!1})}),"JSON")}},{key:"search",value:function(e,t){this.state[e]=t,this.setState({loaded:!1}),this.onChangeDebounced()}},{key:"onChangeDebounced",value:function(){var e=this;this.setState({participants:[]}),this.fetchParticipants(1,(function(t){return e.fetched(t.data)}))}},{key:"on_view_detail",value:function(e){this.setState({custom_layer_title:e})}},{key:"render",value:function(){var e=this,t=function(t,n){return(0,o.ex)(t,e.props.intl,n)},n=[];this.state.participants.map((function(e,t){n.push(e)}));var i=this.props.stages,s=(0,l.size)(i)>0&&(i[0].Stage.type==ie.MN.ID_QUIZ_CATEGORY.id||i[0].Stage.type==ie.MN.ID_TIMED_CATEGORY.id);return r.createElement("div",{className:"gui_ranking"},r.createElement("div",{className:"gui_search"},r.createElement(te.Z,{_class:{size:50,other:"gui_flex_center"},name:"search_value",placeholder:"Search by name",model:this.state,change:function(t,n){return e.search(t,n)}})),r.createElement("div",null,this.state.loaded?r.createElement("div",{className:"gui_not_in_top_big"},(0,l.size)(n)>0?r.createElement(ne.Z,{fetch:function(t,n){return e.fetchParticipants(t,n)},fetched:this.fetched.bind(this),_maxHeight:{minHeight:"500px"},scroll_on_document:!0},r.createElement("table",{cellSpacing:"0",cellPadding:"0",style:{width:"100%"}},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"hb_secondaryFont"},t("Participants")),r.createElement("th",{className:"hb_secondaryFont gui_only_wide_screen gui_text_align_center"},t("Date and time")))),r.createElement("tbody",null,n.map((function(e,n){var i=e.User,a="";return a=i.first_name||i.last_name?i.first_name+" "+i.last_name:i.username?i.username:i.name?i.name:t("Unknown"),r.createElement("tr",{key:n},r.createElement("td",{width:"50%"},r.createElement("div",null,r.createElement("div",{className:"gui_participant_avatar gui_only_wide_screen"},r.createElement(N.Z,{user:i})),r.createElement("p",{className:"gui_participant_name hb_mainFontWeightBold"},r.createElement("span",{className:"gui_cutTextOnOverflow"},a)))),r.createElement("td",{className:"gui_only_wide_screen"},r.createElement("div",{className:"gui_text_align_center"},r.createElement("p",{style:{width:"100%"}},moment(i.created).format("L")+" "+moment(i.created).format("LT")))))}))))):r.createElement("p",null,t("There are no participants"))):r.createElement("div",{className:"is_loading_contents",style:{height:"200px"}},r.createElement(u.Z,null,"Loading last users"))),this.state.display_participations&&this.state.participation&&r.createElement(w.Z,{pm:this.props.promotion,title:!1!==this.state.custom_layer_title?r.createElement(a.FormattedMessage,{id:"{name} - {custom}",values:{name:this.state.participation.from,custom:this.state.custom_layer_title}}):r.createElement(a.FormattedMessage,{id:"{name} - {total} participations",values:{name:this.state.participation.from,total:(0,l.size)(this.state.participation.participations)}}),backButton:function(){return e.toggleParticipations()}},r.createElement(re.Z,{participations:this.state.participation.participations,is_game:!0,is_quiz:s,on_view_detail:this.on_view_detail.bind(this),promotion:this.props.promotion,in_layer:!0})))}}])&&ce(t.prototype,n),i&&ce(t,i),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component),_e=(0,a.injectIntl)(fe);function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ye=function(e){var t,n,i=ge((0,r.useState)(!1),2),a=i[0],o=i[1],l=null!==(t=null==e||null===(n=e.promotion)||void 0===n?void 0:n.Promotion)&&void 0!==t&&t;return!1===l?null:r.createElement("div",{className:"gui_participants_display"},"[",r.createElement(c.Z,{_class:{other:"hb_secondaryFont"},onClick:function(){return o(!0)}},"View"),"]",a&&r.createElement(w.Z,{pm:l,title:"Participants",backButton:function(){return o(!1)}},r.createElement(_e,{promotion:l,limit_entries:"100",ranking:!1})))},he=(n(69826),n(54678),n(26833),n(42236)),be=n(60419);function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){return(t=Ce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ce(r.key),r)}}function Ce(e){var t=function(e,t){if("object"!==Ee(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ee(t)?t:String(t)}function Oe(e,t){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oe(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xe(e);if(t){var i=xe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xe(e)}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oe(e,t)}(s,e);var t,n,i,o=Pe(s);function s(e){var t,n,r,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(a=o.call(this,e)).visible=1==e.prizes.prizes.length&&(null==e.prizes.prizes[0].PrizeType.popup_enabled||e.prizes.prizes[0].PrizeType.popup_enabled),null!=e.force_visible_on_load&&(a.visible=e.force_visible_on_load),a.is_guest=null!==(t=null==e?void 0:e.is_guest)&&void 0!==t&&t,a.state={current:0,generateCodes:null!==(n=null==e||null===(r=e.prizes)||void 0===r?void 0:r.visible)&&void 0!==n&&n,visible:null!=e.prizes.visible?e.prizes.visible&&a.visible:a.visible,validation_portal:null!==(i=null==e?void 0:e.validation_portal)&&void 0!==i&&i},a}return t=s,(n=[{key:"navigate",value:function(e){"next"==e&&(this.state.current++,this.state.current>=(0,l.size)(this.props.prizes.prizes)&&(this.state.current=0)),"prev"==e&&(this.state.current--,this.state.current<0&&(this.state.current=(0,l.size)(this.props.prizes.prizes)-1)),this.setState(Ae({},this.state))}},{key:"togglePopup",value:function(){var e=!this.state.visible;this.state.visible=e,e||(this.state.current=0),this.setState(Ae({},this.state))}},{key:"openWinnerLayer",value:function(e){var t=0;for(var n in this.props.prizes.prizes)if(this.props.prizes.prizes[n].Prize.id==e){t=n;break}this.state.current=parseInt(t),this.togglePopup()}},{key:"getBarCode",value:function(e){return"EAN-13"===e?"EAN13":e}},{key:"getValue",value:function(e,t,n,r){return r&&"123456789"!=n?"qr"==e?"".concat(window.location.protocol,"//").concat(window.location.host,"/users/prizecode/").concat(t,"/").concat(n):r:"EAN-13"==e?"1234567890128":"CODE128"==e?"Example1234":"CODE39"==e?"ABCDEFG":"qr"==e?"example":void 0}},{key:"render",value:function(){var e=this,t=this.props.prizes.prizes,n=(0,l.size)(t);if(0===n)return null;var i=this.state.current>0?this.state.current-1:n-1,o=this.state.current<n-1?this.state.current+1:0,s=n>1?"You've won {prizes} prizes":"You've won {prizes} prize";return r.createElement("div",{className:"prizes_won"},r.createElement("ul",{className:"user_participations_info"},r.createElement("li",{className:"knk-winners hb_mainFontWeightRoman"},r.createElement(a.FormattedMessage,{id:s,values:{prizes:n}}),r.createElement("ul",{className:"won_prizes_textual_list"},t.map((function(t,n){var i,a=null!==(i=null==t?void 0:t.PrizeType)&&void 0!==i&&i;if(e.is_guest)return r.createElement("li",{key:n,className:"prize_item"},r.createElement("span",{style:{fontSize:"1.2em"}},!1!==a&&null!=a.title&&r.createElement("strong",{className:"gui_force_bold"},a.title)));var o=!1;return!1!==a&&null!=a.downloadable&&"0"!=a.downloadable&&(null==t.Prize.id?o="/prizes/prize_export/".concat(a.id):"coupon_maker"!=a.downloadable_origin&&"download"!=a.downloadable_origin||(o="/prize_coupon/".concat(t.Prize.id,"/").concat(t.Prize.hash))),r.createElement("li",{key:n,className:"prize_item"},r.createElement("span",{style:{fontSize:"1.2em"}},!1!==a&&null!=a.title&&r.createElement("strong",{className:"gui_force_bold"},a.title),null!=t.PromoCode&&null!=t.PromoCode.code&&r.createElement("span",null," (",t.PromoCode.code,")"),!1!==a&&null!=a.unique_code&&r.createElement("span",null," (",a.unique_code,")"),!1!==a&&"3"==a.type&&r.createElement("span",null," (",t.Prize.id+t.Prize.qr_code,")")),r.createElement(c.Z,{onClick:function(){return e.openWinnerLayer(t.Prize.id)},_class:{other:"hb_mainFontWeightBold gui_capitalize_text"}},"View"),o&&r.createElement(c.Z,{_href:o,_target:"_blank",_class:{other:"hb_mainFontWeightBold"}},"Download"))}))))),this.state.visible&&!this.is_guest&&r.createElement(he.Z,{prize:t[this.state.current].PrizeType,user_prize:t[this.state.current].Prize,user:t[this.state.current].User,share:t[this.state.current].Share,code:t[this.state.current].PromoCode,navigate:function(t){return e.navigate(t)},disable_navigation:1==t.length,total_prizes:n,actual_prize:this.state.current+1,prev_prize:t[i].PrizeType,next_prize:t[o].PrizeType,autoplay:!0,validation_portal:this.props.prizes.validation_portal,backButton:this.togglePopup.bind(this)}),this.state.generateCodes&&!this.is_guest&&r.createElement("div",{style:{width:"1px",height:"1px",overflow:"hidden"}},t.map((function(t,n){return r.createElement("div",{key:n},null!=t.User.code_filename&&r.createElement(be.Z,{_value:e.getValue(t.PrizeType.CodeSet.code_type,t.PrizeType.id,t.User.id,t.PromoCode.code),_identifier:t.PromoCode.id,_type:e.getBarCode(t.PrizeType.CodeSet.code_type),_generateCode:!0,_height:45,_nameFile:t.User.code_filename,_promotionId:t.PrizeType.promotion_id}))}))))}}])&&Se(t.prototype,n),i&&Se(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(r.Component),Ne=(0,a.injectIntl)(je),Te=(0,a.injectIntl)((function(e){return r.createElement("div",null,r.createElement(c.Z,{onClick:e.close},"Close"),r.createElement("div",{dangerouslySetInnerHTML:{__html:e.data}}))}));function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ue(r.key),r)}}function Ze(e,t){return Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ze(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Re(e);if(t){var i=Re(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fe(e)}(this,n)}}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}function Le(e,t,n){return(t=Ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e){var t=function(e,t){if("object"!==Be(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Be(t)?t:String(t)}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ze(e,t)}(u,e);var t,n,i,a=Me(u);function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),Le(Fe(n=a.call(this,e,t)),"toggleXeerpa",(function(){!1===n.state.fb_config?$.get("/promotions/discovery/".concat(n.register_info.User.promotion_id),(function(e){n.setState({fb_config:e.html})}),"JSON"):n.setState({fb_config:!1})})),Le(Fe(n),"onChangeAvatar",(function(){n.setState({display_upload_msg:"The changes may take a few minutes to apply"})})),n.state={display_participations:!1,participation:!1,is_stage_a_game:!1,fb_config:!1,display_upload_msg:!1},n.participations=null!=e.participations&&e.participations,n.promotion=null!=e.promotion&&e.promotion,n.prizes=null!=e.prizes?e.prizes:[],n.register_info=n.participations.find((function(e){return 0==e.User.stage})),n.participations=n.participations.filter((function(e){return 0!=e.User.stage})),n.total_played_time=0,n.participations.map((function(e,t){n.total_played_time+=parseFloat(e.User.time)})),n.remaining_participations=null!=e.remaining_participations?e.remaining_participations:{},n.stages=null!=e.stages?Object.values(e.stages):{},n.best_participation_indicator="quiz_result",n.best_participation_direction=1,n.participation_frequencies=[{k:"hour",v:"per hour"},{k:"day",v:"per day"},{k:"total",v:"total"}],n}return t=u,(n=[{key:"componentWillMount",value:function(){var e=this;(0,o.pZ)("comp/my_participation.css"),this.stages.map((function(t,n){e.stages[n].Stage.participations=e.participations.filter((function(t){return t.User.stage==e.stages[n].Stage.id})),e.stages[n].Stage.participations_list=e.getStageParticipations(e.stages[n].Stage.id),e.stages[n].Stage.max_value=e.calculateMaxValuePerStage(e.stages[n].Stage.participations),e.stages[n].Stage.best_participation=e.getBestParticipationInStage(e.stages[n].Stage.id),e.stages[n].Stage.prizes_won_in_stage=e.getStagePrizes(e.stages[n].Stage.id);var r=0;e.stages[n].Stage.participations.map((function(e,t){r+=parseFloat(e.User.time)})),e.stages[n].Stage.total_played_time=r}))}},{key:"getStageParticipations",value:function(e){var t=this.stages.filter((function(t){return t.Stage.id==e}))[0];this.state.is_stage_a_game=!1;var n=[];return t.Stage.participations.map((function(e,t){var r=e.User;null==r.score&&null!=r.quiz_result&&""!=r.quiz_result&&(r.score=r.quiz_result),r.has_prize=e.Prize.length>0,n.push(r)})),{participations:n}}},{key:"getStagePrizes",value:function(e){var t=this,n=this.stages.filter((function(t){return t.Stage.id==e}))[0].Stage.participations.filter((function(e){return(0,l.size)(e.Prize)>0})),r=[];return n.map((function(e,n){r.push({Prize:e.Prize[0],User:e.User,PromoCode:e.PromoCode[0],PrizeType:t.prizes.filter((function(t){return t.id==e.Prize[0].prize_type}))[0]})})),r}},{key:"toggleParticipations",value:function(){this.state.display_participations=!this.state.display_participations,this.state.display_participations||(this.state.participation=!1,this.state.is_stage_a_game=!1),this.setState(ze({},this.state))}},{key:"showParticipations",value:function(e){this.state.display_participations||(this.state.participation=this.getStageParticipations(e),this.setState(ze({},this.state)),this.toggleParticipations())}},{key:"getBestParticipationInStage",value:function(e){var t=this,n=function(e,n){return(0,o.ex)(e,t.props.intl,n)},i=this.stages.filter((function(t){return t.Stage.id==e}))[0];if(0==(0,l.size)(i.Stage.participations))return!1;var a=i.Stage.participations.filter((function(e){return e.User[t.best_participation_indicator]==i.Stage.max_value}))[0],s=!1;switch(this.best_participation_indicator){case"time":s=r.createElement("span",null,r.createElement("strong",null,(0,o.uf)(a.User[this.best_participation_indicator])+" "+n("seconds")));break;case"quiz_result":case"points":s=r.createElement("span",null,r.createElement("strong",null,(0,o.uf)(a.User[this.best_participation_indicator])+" "+n("points"))," ",n("in")+" "+(0,o.uf)(a.User.time,3)+" "+n("seconds"))}return s}},{key:"calculateMaxValuePerStage",value:function(e,t,n){var r=0;return(0,l.size)(e)<1||(null==t&&(t=this.best_participation_indicator),null==n&&(n=this.best_participation_direction),n<0&&(r=e[0].User[t]),e.map((function(e,i){var a=parseFloat(e.User[t]);(n>0&&a>r||n<0&&a<r)&&(r=a)}))),r}},{key:"render",value:function(){var e,t,n,i,a,u,m,d=this,p=function(e,t){return(0,o.ex)(e,d.props.intl,t)};if(!this.promotion)return null;var f=null!=this.register_info.User.name&&""!=this.register_info.User.name?this.register_info.User.name:this.register_info.User.first_name+" "+this.register_info.User.last_name;if(!1!==this.state.fb_config)return r.createElement(Te,{data:this.state.fb_config,close:function(){return d.setState({fb_config:!1})}});var _=null!==(e=null===(t=this.register_info)||void 0===t||null===(n=t.User)||void 0===n?void 0:n.unsubscribe_info)&&void 0!==e&&e,g=null!==(i=null===(a=this.register_info.User)||void 0===a?void 0:a.avatar)&&void 0!==i&&i,v=!1!==g&&g.indexOf("blocked")>-1,y=null!==(u=null===(m=this.props)||void 0===m?void 0:m.total_participations)&&void 0!==u?u:0;return r.createElement(r.Fragment,null,!1!==this.state.display_upload_msg&&r.createElement(E.ZP,{title:this.state.display_upload_msg,_class:{other:"in_top"}}),r.createElement("div",{className:"gui_my_participation gui_is_padded gui_main_text_color_on_bg"},r.createElement("div",{className:"registration_info"},r.createElement("div",null,v?r.createElement(N.Z,{user:this.register_info.User,width:70,height:70,display_network_icon:!0}):r.createElement(N.a,{onChangeAvatar:this.onChangeAvatar,user:this.register_info.User,width:90,height:90,display_network_icon:!0})),r.createElement("article",{className:"participation_info gui_main_text_color_on_bg main_text_flex"},r.createElement(A.Z,{parseHTML:!1,_class:{other:"full_name"}},r.createElement("h1",null,f)),r.createElement(A.Z,{parseHTML:!1,_class:{font_size:"small_p",other:"relevant_dates"}},r.createElement("span",{className:"knk-add-user gui_small_icon"},p("Registered on"),": ",moment.tz(this.register_info.User.created,"Europe/Madrid").tz(this.promotion.Promotion.timezone).format("llll")),!1!==_&&r.createElement("span",{className:"knk-email gui_small_icon"},p("Unsubscribed on"),": ",moment.tz(_.created,"Europe/Madrid").tz(this.promotion.Promotion.timezone).format("ll")," (",r.createElement(c.Z,{_href:"https://".concat(window.domain_url,"/emails/resubscribe/").concat(_.id,"/").concat(_.hash),_target:"_blank"},"Subscribe again"),")")),r.createElement("div",{className:"logout"},r.createElement(c.Z,{_href:"/promotions/logout/".concat(this.promotion.Promotion.id),_class:{icon:"knk-logout",other:"hb_secondaryFont"}},"Logout")),this.props.xeerpa&&1==this.register_info.User.net_type&&r.createElement("div",{id:"xeerpa_btn",className:"solid_buttons"},r.createElement("div",{className:"flex_button gui_xeerpa_button gui_custom_color"},r.createElement(s.ZP,{icon:"ep-facebook",_href:"/promotions/my_fb_config/".concat(this.register_info.User.promotion_id)},"My Facebook Preferences"))))),r.createElement("div",{className:"participations_info"},this.stages.map((function(e,t){var n=e.Stage.type==ie.MN.ID_QUIZ_CATEGORY.id||e.Stage.type==ie.MN.ID_TIMED_CATEGORY.id,i=!!e.Stage.is_game,a=!!e.Stage.is_team,o=d.participation_frequencies.filter((function(t){return t.k==e.Stage.participation_frequency}));o=o.length>0?o[0].v:"total";var s=0!=d.promotion.Promotion.code_validator;return r.createElement("div",{className:"stage_info",key:t},(0,l.size)(d.stages)>1&&r.createElement("h3",{className:"in_bottom"},"Stage #",t+1),r.createElement(Ne,{is_guest:7==d.register_info.User.net_type,prizes:{prizes:e.Stage.prizes_won_in_stage,validation_portal:s},force_visible_on_load:!1}),r.createElement(A.Z,{parseHTML:!1,_class:{font_size:"small_p",other:"stage_main_info"}},i&&(0==(0,l.size)(e.Stage.participations)||!1===e.Stage.best_participation)&&r.createElement("p",{className:"participation_frequency without_participations"},1==(0,l.size)(d.stages)?r.createElement("span",null,p("You have not participated yet.")):r.createElement("span",null,p("You have not participated here yet.")),null!=d.remaining_participations.retries&&!0===d.remaining_participations.next_participation&&r.createElement("span",{className:"gui_not_in_start_small hb_mainFontWeightBold"},r.createElement(c.Z,{_href:"/promotions/participate/"+d.promotion.Promotion.id},"Play now")))),r.createElement("div",{dangerouslySetInnerHTML:{__html:"".concat(p("Total participations"),": <strong>").concat(y,"</strong>")}}),((0,l.size)(e.Stage.participations)>0||!1===e.Stage.best_participation&&y<=100)&&r.createElement(re.Z,{stage:e.Stage,participations:e.Stage.participations_list.participations,is_game:i,is_quiz:n&&!0,is_team:a,promotion:d.promotion.Promotion,stages:d.stages,username:f}))})),this.state.display_participations&&this.state.participation&&r.createElement(w.Z,{pm:this.promotion.Promotion,title:f+" ("+(0,l.size)(this.state.participation.participations)+" "+p("participations")+")",backButton:function(){return d.toggleParticipations()}},r.createElement(re.Z,{participations:this.state.participation.participations,is_game:this.state.is_stage_a_game,is_quiz:is_quiz&&has_public_quiz_stats,is_team:is_team,promotion:this.promotion.Promotion,stages:this.stages,username:f})))))}}])&&De(t.prototype,n),i&&De(t,i),Object.defineProperty(t,"prototype",{writable:!1}),u}(r.Component),We=(0,a.injectIntl)(qe),Ge=n(20379),Ve=n(28641),Ye=n(74971),He=n(8573),$e=n(92536),Qe=n(18691),Je=n(55908),Ke=n(63065),Xe=n(62239);function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){st(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ct(r.key),r)}}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lt(e);if(t){var i=lt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ot(e)}(this,n)}}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}function st(e,t,n){return(t=ct(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e){var t=function(e,t){if("object"!==et(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===et(t)?t:String(t)}var ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}(u,e);var t,n,i,c=at(u);function u(e,t){var n,r,i,a,o,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),st(ot(l=c.call(this,e,t)),"actions",(function(e,t,n){l.props.actions&&l.props.actions(n)})),l.state={display_additional_participation:!1,display_participation_details:!1,display_voting_details:!1,display_team_details:!1,display_voting_stage_id:!1},l.display_total=null==e.display_total||e.display_total,l.display_complete_info=null!=e.display_complete_info&&e.display_complete_info,l.display_origin=!(!l.display_complete_info||null==e.display_origin)&&e.display_origin,l.display_prizes=!(!l.display_complete_info||null==e.display_prizes)&&e.display_prizes,l.promotion=null!=e.promotion&&e.promotion,l.stages=null!=e.stages&&e.stages,l.has_game_stages=null!==(n=null==e?void 0:e.has_game_stages)&&void 0!==n&&n,l.has_quiz_stages=null!==(r=null==e?void 0:e.has_quiz_stages)&&void 0!==r&&r,l.has_voting_stages=null!==(i=null==e?void 0:e.has_voting_stages)&&void 0!==i&&i,l.has_team_stages=null!==(a=null==e?void 0:e.has_voting_stages)&&void 0!==a&&a,l.in_scores=null!==(o=null==e?void 0:e.in_scores)&&void 0!==o&&o,l}return t=u,(n=[{key:"componentWillMount",value:function(){(0,o.pZ)("comp/quiz.css")}},{key:"displayDetails",value:function(e,t){var n=this;if(e.Stage.is_voting)$.get("/users/voted_summary/".concat(this.promotion.id,"/").concat(e.StageScore.stage_id,"/").concat(e.StageScore.id),(function(t){n.setState({display_voting_details:t,display_voting_stage_id:e.StageScore.stage_id})}),"JSON");else if(e.Stage.is_team)this.setState({display_team_details:nt(nt({},e.StageScore.quiz_entry),{},{created:e.StageScore.created,score:e.StageScore.score,promotion:this.promotion,stage:this.stages.find((function(t){return t.Stage.id==e.StageScore.stage_id})).Stage,user_id:e.StageScore.id,locale:e.StageScore.locale,intl:this.props.intl})});else if(t=null!=t&&t,this.setState({display_participation_details:e}),!t&&null!=this.props.on_view_detail){var i=this.promotion.timezone,a=moment.tz(e.created,"Europe/Madrid").tz(i);this.props.on_view_detail(a,r.createElement(s.wL,{onClick:function(){return n.closeDetails()},icon:"knk-arrow-l-big",_class:{variable_icon_color:!0}}))}}},{key:"displayAdditionalInformation",value:function(e){this.setState({display_additional_participation:e})}},{key:"render",value:function(){var e,t=this,n=function(e,n){return(0,o.ex)(e,t.props.intl,n)},i=null!=this.props.stage_participations?this.props.stage_participations:{summary:[],total:0},c=null!=this.props.display_date&&this.props.display_date,u=!(!this.promotion||"0"==this.promotion.public_entries);if(this.state.display_participation_details){var m=this.state.display_participation_details,d=null!=m.StageScore.quiz_entry?m.StageScore.quiz_entry:{};e=null!=d.media&&d.media}return r.createElement("div",null,r.createElement(A.Z,{parseHTML:!1,_class:{font_size:"small_p",other:"gui_participations_list"}},null!=i.total&&this.display_total&&r.createElement("div",null,n("Total points"),": ",(0,o.uf)(i.total)),r.createElement("table",{className:"single_user_participations"+(this.display_total?" gui_not_in_top_big":""),cellSpacing:"0",cellPadding:"0",style:{width:"100%"}},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"hb_secondaryFont",style:this.display_complete_info?{width:"8%"}:null}),r.createElement("th",{className:"mod_align_left gui_text_align_start hb_secondaryFont",style:this.display_complete_info?null:{width:"30%"}},n("Stage")),c&&r.createElement("th",{className:"mod_align_left gui_text_align_start hb_secondaryFont",style:this.display_complete_info?{width:"22%"}:null},n("Date")),this.display_origin&&r.createElement("th",{className:"mod_align_left gui_text_align_start hb_secondaryFont",style:this.display_complete_info?{width:"18%"}:null},n("Origin")),u&&r.createElement("th",{className:"mod_align_right gui_text_align_end hb_secondaryFont",style:this.display_complete_info?{width:"10%"}:null},n("score","ucfirst")),(this.display_complete_info||this.has_game_stages||this.has_quiz_stages)&&r.createElement("th",{className:"hb_secondaryFont",style:this.display_complete_info?{width:"12%"}:null}))),r.createElement("tbody",null,i.summary.map((function(e,a){var m,d,p,f,_,g,v,y,h=(0,l.size)(i.summary)-a,b=null!==(m=null==e||null===(d=e.Stage)||void 0===d?void 0:d.is_quiz)&&void 0!==m&&m,E=null!==(p=null==e||null===(f=e.Stage)||void 0===f?void 0:f.is_game)&&void 0!==p&&p,w=null!==(_=null==e||null===(g=e.Stage)||void 0===g?void 0:g.is_voting)&&void 0!==_&&_,A=null!==(v=null==e||null===(y=e.Stage)||void 0===y?void 0:y.is_team)&&void 0!==v&&v,k=!1;null!=e.StageParticipation&&e.StageParticipation.length>0&&e.StageParticipation.map((function(e,t){null!=e.config&&null!=e.config.mediatype&&"image"==e.config.mediatype&&(k=!0)}));var S=t.promotion.timezone,C=moment.tz(e.StageScore[t.in_scores?"modified":"created"],"Europe/Madrid").tz(S),O=null!=e.StageScore.quiz_entry?e.StageScore.quiz_entry:{},P=!1;t.has_game_stages&&E&&(P=!0),t.has_quiz_stages&&b&&(P=!0),t.has_voting_stages&&w&&(P=!0),t.has_team_stages&&A&&(P=!0);var x=null!=O.media,j=!1,N=!1,T="blue",B=!0;switch(e.StageScore.public_entry){case"0":j=n("Status")+": "+n("pending","ucfirst"),N="knk-annonymous-users",T="orange";break;case"2":j=n("This entry is still being processed"),N="knk-loading",B=!1;break;case"3":j=n("Entry error: Some video could not be processed"),N="knk-alert",T="red",B=!1;break;case"4":j=n("Status")+": "+n("Rejected"),N="knk-blocked",T="black"}return r.createElement("tr",{key:"p"+a},r.createElement("td",{className:"ranking_pos mod_align_left gui_text_align_start"},"#",(0,l.size)(i.summary)>10&&h<10?"0"+h:h),r.createElement("td",{className:"mod_align_left gui_text_align_start"},r.createElement("div",{className:"sided_contents"},t.display_complete_info&&null!=e.Stage.icon&&r.createElement($e.Z,{position:"top",icon:e.Stage.icon},e.Stage.stage_type),r.createElement("div",{className:"title is_multilined"},r.createElement("span",{className:"gui_cutTextOnOverflow"},null!=e.Stage.display_title&&""!=e.Stage.display_title?e.Stage.display_title:n("Stage")+(null!=e.Stage.order?" #"+e.Stage.order:""),e.StageScore.code&&r.createElement("em",null,n("Code")+": "+e.StageScore.code))))),c&&r.createElement("td",{className:"mod_align_left gui_text_align_start"},C.format(t.display_complete_info||"desktop"!=window.platform?"L, LT":"LL, LT")),t.display_origin&&r.createElement("td",{className:"mod_align_left gui_text_align_start"},r.createElement("div",{className:"sided_contents"},null!=e.StageScore.ip&&""!=e.StageScore.ip&&r.createElement("span",{style:{flexGrow:"1"}},e.StageScore.ip),null!=e.StageScore.device&&""!=e.StageScore.device&&r.createElement($e.Z,{position:"top",icon:"knk-"+e.StageScore.device},e.StageScore.device_label),null!=e.StageScore.browser&&""!=e.StageScore.browser&&r.createElement($e.Z,{position:"top",icon:"knk-"+e.StageScore.browser},e.StageScore.browser_label))),u&&r.createElement("td",{className:"mod_align_right gui_text_align_end"},r.createElement("span",{className:"gui_flexbox_auto gui_flex_end gui_flex_align_center"},r.createElement("span",null,(0,o.uf)(e.StageScore.score)))),(t.display_complete_info||t.has_game_stages||t.has_quiz_stages)&&r.createElement("td",null,r.createElement(Ve.Z,{_class:{other:"gui_flex_end"}},k&&r.createElement(s.wL,{icon:"knk-information",onClick:function(){return t.displayAdditionalInformation(e)},tooltip:r.createElement($e.Z,{with_icon:!1,position:"top"},"Additional fields")}),t.display_prizes&&null!=e.StageScore.has_prize&&e.StageScore.has_prize&&r.createElement(s.wL,{icon:"knk-winners",tooltip:r.createElement($e.Z,{with_icon:!1,position:"top"},"Won a prize")}),!1!==j&&r.createElement(s.wL,{color:!1,icon:N,_class:{other:T+"Bg whiteIcon not_link_type"},tooltip:r.createElement($e.Z,{with_icon:!1,position:"top",autotranslate:!1},j)}),(P||x)&&B&&r.createElement(s.wL,{onClick:function(){return t.displayDetails(e,x)},icon:"knk-visible",_class:{other:"original_color_item",variable_icon_color:!0}}),(P||x)&&!B&&r.createElement(s.wL,{color:"gray",icon:"knk-visible",_class:{other:"gui_withoutEvents original_color_item disabledItem"}}))))})))),!1!==this.state.display_additional_participation&&r.createElement(Ye.Z,{_class:{size:"small"},backButton:function(){return t.setState({display_additional_participation:!1})}},r.createElement("div",{className:"without_actions"},r.createElement(He.ZP,null,"Additional information in participation"),this.state.display_additional_participation.StageParticipation.map((function(e,t){return r.createElement("div",{key:"cf_"+t},""!=e.title&&r.createElement(R.Z,{autotranslate:!1},e.title),null!=e.config&&null!=e.config.mediatype&&"image"==e.config.mediatype&&r.createElement("img",{src:e.value,width:"100%",alt:""}))})))),!1!==this.state.display_participation_details&&!e&&r.createElement(w.Z,{pm:this.promotion,title:r.createElement(a.FormattedMessage,{id:"Participation detail - {date}",values:{date:moment.tz(this.state.display_participation_details.StageScore.created,"Europe/Madrid").tz(this.promotion.timezone).format("LL")+", "+moment.tz(this.state.display_participation_details.StageScore.created,"Europe/Madrid").tz(this.promotion.timezone).format("LT")}}),backButton:function(){return t.setState({display_participation_details:!1})}},this.state.display_participation_details.Stage.is_game?r.createElement(A.Z,{parseHTML:!1,_class:{font_size:"small_p",font_variant:"Roman",other:"gui_participations_list"},style:{minHeight:"100px"}},r.createElement("section",{className:"gui_quiz_public_stats",style:{marginBottom:"2em"}},r.createElement("article",{className:"gui_flexbox_auto gui_flex_align_center"},r.createElement("p",{className:"question_text"},n("Played time"),":",r.createElement("strong",null,"",this.state.display_participation_details.StageScore.time," ",n("sec")))))):r.createElement(Je.Z,{promotion_id:this.promotion.id,user_id:this.state.display_participation_details.StageScore.id,stage_id:this.state.display_participation_details.StageScore.stage}))),!1!==this.state.display_participation_details&&e&&r.createElement("ul",{className:"gui_multimedia_gallery"},r.createElement(Qe.ZP,{user:{Participation:nt(nt({},this.state.display_participation_details.StageScore),{},{name:this.props.username})},selected_entry:!0,promotion:this.promotion,stage:this.stages.filter((function(e){return e.Stage.id==t.state.display_participation_details.StageScore.stage_id}))[0].Stage,in_registered:!0,closeEntryAsLayer:function(){return t.setState({display_participation_details:!1})}})),!1!==this.state.display_voting_details&&r.createElement(w.Z,{pm:this.promotion,title:"Casted votes",backButton:function(){return t.setState({display_voting_details:!1})}},r.createElement("div",{className:"in_user_list"},r.createElement(Ke.Z,{promotion:this.promotion,participants:this.state.display_voting_details.data,autoload_data:!1,stages:this.stages,stage_id:this.state.display_voting_stage_id,in_layer:!0,is_logged:!1,is_builder:!0,avail_participations:!1}))),!1!==this.state.display_team_details&&r.createElement(w.Z,{pm:this.promotion,title:this.props.intl.formatMessage({id:"The team of {name}"},{name:this.props.username}),backButton:function(){return t.setState({display_team_details:!1})}},r.createElement("div",{className:"in_user_list"},r.createElement(Xe.o7,this.state.display_team_details))))}}])&&rt(t.prototype,n),i&&rt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),u}(r.Component),mt=(0,a.injectIntl)(ut);function dt(e){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dt(e)}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==dt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===dt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vt=(0,a.injectIntl)((function(e){var t,n,i,a,l,m,d,p,f=function(t,n){return(0,o.ex)(t,e.intl,n)};(0,Ge.$t)("comp/my_participation.css");var _=null!==(t=null==e||null===(n=e.promotion)||void 0===n?void 0:n.Promotion)&&void 0!==t&&t;if(!1===_)return null;var g=null!==(i=null==e?void 0:e.prizes)&&void 0!==i?i:[],v=null!==(a=null==e?void 0:e.participations)&&void 0!==a&&a,y=_t((0,r.useState)(!1),2),h=y[0],b=y[1],k=_t((0,r.useState)(!0),2),S=k[0],C=k[1],O=_t((0,r.useState)(!1),2),P=O[0],x=O[1],j=_t((0,r.useState)(!1),2),T=j[0],B=j[1],I=_t((0,r.useState)([]),2),z=I[0],D=I[1],Z=_t((0,r.useState)(0),2),M=Z[0],F=Z[1],R=v.find((function(e){return 0==e.User.stage})),L=v.filter((function(e){return 0!=e.User.stage}));L||function(e){throw new TypeError('"'+e+'" is read-only')}("passed_participations");var U=null!=e.stages?Object.values(e.stages):{},q={summary:[],total:0},W=_t((0,r.useState)({summary:[]}),2),G=W[0],V=W[1],Y=_t((0,r.useState)(!1),2),H=Y[0],Q=Y[1],J=_t((0,r.useState)(!1),2),K=J[0],X=J[1],ee=_t((0,r.useState)(!1),2),te=ee[0],ne=ee[1],re=_t((0,r.useState)(!1),2),ie=re[0],ae=re[1],oe=function(){var e={},t=1,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},G);L.map((function(r){var i,a=(i=r.User.stage,U.find((function(e){return e.Stage.id==i})));if(null!=a&&null!=a.Stage){var o,l,s,c,u,m,d,p,f=null!==(o=null===(l=a=a.Stage)||void 0===l?void 0:l.is_game)&&void 0!==o&&o;f&&!K&&X(!0);var _=null!==(s=null===(c=a)||void 0===c?void 0:c.is_quiz)&&void 0!==s&&s;_&&!H&&Q(!0);var g=null!==(u=null===(m=a)||void 0===m?void 0:m.is_voting)&&void 0!==u&&u;g&&!te&&ne(!0);var v=null!==(d=null===(p=a)||void 0===p?void 0:p.is_team)&&void 0!==d&&d;v&&!ie&&ae(!0),null==e[a.id]&&(e[a.id]=t,t++);var y={Stage:{display_title:a.display_title,is_game:f,is_quiz:_,is_voting:g,is_team:v,order:e[a.id]},StageScore:{id:r.User.id,created:r.User.created,data:"".concat(r.User.first_name," ").concat(r.User.last_name),login_id:r.User.login_id,modified:r.User.modified,quiz_entry:r.User.quiz_entry,score:r.User.quiz_result,stage_id:r.User.stage,locale:r.User.keyword,public_entry:r.User.public_entry}};null!=a.team_candidates&&(y.Stage.team_candidates=a.team_candidates),null!=a.team_sections&&(y.Stage.team_sections=a.team_sections),n.summary.push(y)}})),null!=R.User.login_id&&$.get("/users/entry_summary/".concat(_.id,"/?id=").concat(R.User.login_id),(function(e){q=e,F(e.total),le(e.summary),V(n),C(!1)}),"JSON")},le=function(e){var t=[];e.map((function(e){null!=e.Prize&&e.Prize.length>0&&e.Prize.map((function(e){t.push({Prize:e.Prize,User:e.User,PromoCode:e.PromoCode,PrizeType:g.find((function(t){return t.id==e.Prize.prize_type}))})}))})),D(t)},se=function(){b(!h)},ce=null!=R.User.name&&""!=R.User.name?R.User.name:"".concat(R.User.first_name," ").concat(R.User.last_name),ue=null!=q.total&&!S,me="0"!=_.public_entries;if((0,r.useEffect)((function(){oe()}),[]),!1!==P)return r.createElement(Te,{data:state.fb_config,close:function(){!1===P?$.get("/promotions/discovery/".concat(_.id),(function(e){x(e.html)}),"JSON"):x(!1)}});var de=0!=_.code_validator,pe=null!==(l=null==R||null===(m=R.User)||void 0===m?void 0:m.unsubscribe_info)&&void 0!==l&&l,fe=null!==(d=null===(p=R.User)||void 0===p?void 0:p.avatar)&&void 0!==d&&d,_e=!1!==fe&&fe.indexOf("blocked")>-1;return r.createElement(r.Fragment,null,!1!==T&&r.createElement(E.ZP,{title:T,_class:{other:"in_top"}}),r.createElement("div",{className:"gui_my_participation gui_is_padded gui_main_text_color_on_bg"},r.createElement("div",{className:"registration_info"},r.createElement("div",null,_e?r.createElement(N.Z,{user:R.User,width:6.75,height:6.75,display_network_icon:!0}):r.createElement(N.a,{onChangeAvatar:function(){B("The changes may take a few minutes to apply")},user:R.User,width:90,height:90,display_network_icon:!0})),r.createElement("article",{className:"participation_info gui_main_text_color_on_bg main_text_flex"},r.createElement(A.Z,{parseHTML:!1,_class:{other:"full_name"}},r.createElement("h1",null,ce)),r.createElement(A.Z,{parseHTML:!1,_class:{font_size:"small_p",other:"relevant_dates"}},r.createElement("span",{className:"knk-add-user gui_small_icon"},f("Registered on"),": ",moment.tz(R.User.created,"Europe/Madrid").tz(_.timezone).format("llll")),!1!==pe&&r.createElement("span",{className:"knk-email gui_small_icon"},f("Unsubscribed on"),": ",moment.tz(pe.created,"Europe/Madrid").tz(_.timezone).format("ll")," (",r.createElement(c.Z,{_href:"https://".concat(window.domain_url,"/emails/resubscribe/").concat(pe.id,"/").concat(pe.hash),_target:"_blank"},"Subscribe again"),")")),r.createElement("div",{className:"logout"},r.createElement(c.Z,{_href:"/promotions/logout/".concat(_.id),_class:{icon:"knk-logout",other:"hb_secondaryFont"}},"Logout")),e.xeerpa&&1==R.User.net_type&&r.createElement("div",{id:"xeerpa_btn",className:"solid_buttons"},r.createElement("div",{className:"flex_button gui_xeerpa_button gui_custom_color"},r.createElement(s.ZP,{icon:"ep-facebook",_href:"/promotions/my_fb_config/".concat(R.User.promotion_id)},"My Facebook Preferences"))))),ue?r.createElement("div",{className:"stage_info"},G.summary.length>0?r.createElement("div",null,r.createElement(Ne,{is_guest:7==R.User.net_type,prizes:{prizes:z,validation_portal:de},force_visible_on_load:!1}),r.createElement("div",{className:"participations_info"},me&&r.createElement("div",{className:"user_total_score"},f("Total points"),": ",(0,o.uf)(M)," [",r.createElement(c.Z,{onClick:function(){return se()}},"View"),"]"),r.createElement(mt,{stage_participations:G,promotion:_,stages:U,has_game_stages:K,has_quiz_stages:H,has_voting_stages:te,has_team_stages:ie,display_complete_info:!0,display_date:!0,username:ce}))):r.createElement("div",null,f("You have not participated yet."))):r.createElement(u.Z,null,"Loading data..."),h&&r.createElement(w.Z,{pm:_,title:ce+" - "+f("score"),backButton:function(){return se()}},r.createElement(mt,{stage_participations:G,promotion:_,username:ce}))))})),yt=n(43702),ht=n(18970),bt=n(39280),Et=n(12053),wt=n(45138);function At(e){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(e)}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,a=function(e,t){if("object"!==At(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===At(a)?a:String(a)),r)}var i,a}function St(e,t){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},St(e,t)}function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ot(e);if(t){var i=Ot(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===At(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ot(e){return Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ot(e)}var Pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&St(e,t)}(l,e);var t,n,i,a=Ct(l);function l(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=a.call(this,e,t)).promotion=null!=e.promotion&&e.promotion,n.token=null!=e.token&&e.token,n}return t=l,(n=[{key:"activateLink",value:function(e){var t=this;$.post("/promotions/test_invite/"+this.promotion.id+"/"+this.token,{action:"activate"},(function(n){n.status?(null!=e&&e(),window.location.href="/p/"+t.promotion.id+"?utm_source=test"):alert("Error: "+n.reason)}),"JSON")}},{key:"render",value:function(){var e=this,t=function(t,n){return(0,o.ex)(t,e.props.intl,n)};if(!this.promotion||!this.token)return null;null!=this.promotion.test&&this.promotion.test;var n=moment(this.props.created).add(1,"days").diff(moment(),"seconds");return r.createElement(Ye.Z,{_class:{size:"small"},enable_close:!1},this.props.expired?r.createElement("div",{className:"without_actions"},r.createElement(He.ZP,null,"Test mode"),r.createElement(Et.Z,null,"This invitation is invalid because it's been used on another device or it has expired. Contact the administrator of the promotion to receive another invitation to test.")):r.createElement("div",null,r.createElement(He.ZP,null,"Test mode"),r.createElement(Et.Z,null,"You have received a link to test a promotion."),r.createElement("dl",{className:"invitation_promo_details gui_not_in_bottom_big"},r.createElement("div",null,r.createElement("dt",null,t("Promotion ID")),r.createElement("dd",null,this.promotion.id)),null!=this.promotion.organizer&&r.createElement("div",null,r.createElement("dt",null,t("Organizing brand")),r.createElement("dd",null,this.promotion.organizer)),""!=this.promotion.title&&r.createElement("div",null,r.createElement("dt",null,t("Promotion Title")),r.createElement("dd",null,this.promotion.title))),r.createElement(Et.Z,null,"When you click on it, you'll have 2 hours to test the promotion on this device only. After that, the link will no longer be valid. If you want to test on another device, you need to contact the administrator of the promotion."),r.createElement("div",{className:"gui_flexbox_auto gui_not_in_top"},r.createElement("p",{className:"gui_not_in_end_small"},t("This link will expire in"),":"),r.createElement(wt.Z,{seconds:n,hide_days:!0})),r.createElement(Ve.Z,{in_floating:!0},r.createElement(bt.Z,{icon:"knk-on",onClick:function(t,n){return e.activateLink(n)}},"Confirm and start testing"))))}}])&&kt(t.prototype,n),i&&kt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.Component),xt=(0,a.injectIntl)(Pt),jt=["children"],Nt=["children"];function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}function Bt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var It=function(e){var t,n,i,a=null!==(t=null==e?void 0:e.icon)&&void 0!==t?t:"knk-zipped",o=null!==(n=null==e?void 0:e.link)&&void 0!==n&&n,l=null!==(i=null==e?void 0:e.link_type)&&void 0!==i?i:"button";return r.createElement("div",{className:"flex_cols"},r.createElement("div",{className:"flex_col col_1 iconed_media"},r.createElement("div",{className:"main_media_flex"},r.createElement("span",{className:"icon ".concat(a)}))),r.createElement("div",{className:"flex_col col_2 mod_align_center not_in_top"},r.createElement("article",{className:"gui_leveled_text_small_p"},r.createElement(zt,{seconds:e.seconds,onFinish:e.onFinish},e.title),r.createElement(Dt,null,e.subtitle)),"button"==l&&r.createElement(Zt,o),"link"==l&&r.createElement(Mt,o)))},zt=function(e){var t;if(null==e.children)return null;var n=null!==(t=null==e?void 0:e.seconds)&&void 0!==t&&t;return r.createElement("h1",null,e.children,!1!==n&&r.createElement("div",{className:"dates_mod registration_info"},r.createElement(wt.Z,{seconds:n,onFinish:function(){return e.onFinish()},_class:{other:"value gui_main_text_color_on_bg"}})))},Dt=function(e){return null==e.children?null:r.createElement("p",{dangerouslySetInnerHTML:{__html:e.children}})},Zt=function(e){var t=e.children,n=Bt(e,jt);return null==t?null:r.createElement("article",{className:"template_submodule mod_align_center call_to_action_flex enter_flexwrap"},r.createElement("div",{className:"enter flex_button gui_big_button hb_secondaryFont register_flex"},r.createElement(s.ZP,Tt({_fullclass:""},n),t)))},Mt=function(e){var t=e.children,n=Bt(e,Nt);return null==t?null:r.createElement("article",{className:"template_submodule mod_align_center call_to_action_flex gui_not_in_top_small"},r.createElement(c.Z,n,t))},Ft=(0,a.injectIntl)((function(e){var t,n,i,a,l,s=function(t,n){return(0,o.ex)(t,e.intl,n)},c=null!==(t=null==e?void 0:e.error_type)&&void 0!==t?t:"not_available",u=null!==(n=null==e||null===(i=e.promotion)||void 0===i?void 0:i.Promotion)&&void 0!==n&&n,m=null!==(a=null==e?void 0:e.remaining_participations)&&void 0!==a&&a,d=function(){document.location.href="/p/".concat(u.id)};if((0,r.useEffect)((function(){!1!==c&&""!=c&&"function"==typeof window.onNotAllowed&&window.onNotAllowed(c)}),[]),"not_verified"==c)return r.createElement(It,{icon:"knk-accept-user",title:s("Only verified users can enter this promotion"),subtitle:s("A user is considered as verified by Facebook if he took any of these actions: Registers for mobile, confirms his account via SMS or enters a valid credit card number."),link:{_target:"_blank",_href:"https://www.facebook.com/help/?page=116296378454689",children:"More information"}});if("hash"==c)return r.createElement(It,{title:s("You cannot enter this promotion"),subtitle:"".concat(s("You have reached the maximum of registrations for this computer.")," ").concat(s("Please, try again in our next promotion. Thanks."))});if("no_promotions"==c)return r.createElement(It,{title:s("Currently there are no active promotions.")});if("expired"==c)return r.createElement(It,{title:s("This promotion has expired")});if("ip_delay"==c)return r.createElement(It,{icon:"knk-timecounter",title:s("You cannot enter this promotion right now"),subtitle:s("Somebody has entered this promotion from the same IP as you a few moments ago. Please, try it again later.")});if("filter_by_country"==c){var p,f=(null==e?void 0:e.countries)||{},_=u.countries.split(","),g=[];if(_.length>0&&_.map((function(e){""!=e&&g.push(null!=f[e]?f[e]:e)})),g.length>1){var v=[];g.map((function(e,t){t>=g.length-1||v.push("<strong>".concat(e,"</strong>"))})),p=v.join(", "),p+="".concat(s(" and "),"<strong>").concat(g[g.length-1],"</strong>")}else p="<strong>".concat(g[0],"</strong>");return r.createElement(It,{icon:"knk-geographic-area",title:s("You are not allowed to see this promotion"),subtitle:s("Only available for connection from %s.").replace("%s",p)})}if("extra_verification"==c)return r.createElement(It,{icon:"knk-accept-user",title:s("You need extra verification to continue"),link:{_href:"https://wl.easypromosapp.com/p/12921?ep1=".concat(u.id),children:"Verify my identity"}});if("unavailable"==c){var y,h=null!==(y=null==u?void 0:u.multi_participation)&&void 0!==y&&y;if(h)return r.createElement(It,{icon:"knk-reject-user",title:s("Access blocked"),subtitle:s("Sorry, you can't participate")});if(!h)return r.createElement(It,{icon:"knk-reject-user",title:u.config.block_blacklist_text})}if("invalid_email"==c)return r.createElement(It,{icon:"knk-email",title:s("The submitted email is not valid")});if("no_valid"==c)return r.createElement(It,{title:s("Not valid entry")});if("no_stage_available"==c)return r.createElement(It,{title:s("There is no participation stage available"),link:{_href:"/p/".concat(u.id),children:"Go back"},link_type:"link"});if("not_published"==c)return r.createElement(It,{title:s("The promotion is not published")});if("max_entries"==c)return r.createElement(It,{icon:"knk-entries",title:s("Maximum number of entries reached"),subtitle:s("Try the following promotion, thanks!")});if("no_prizes"==c)return r.createElement(It,{icon:"knk-winners",title:s("All prizes have been given"),subtitle:s("Try the following promotion, thanks!")});if("no_more_prizes"==c)return r.createElement(It,{icon:"knk-drop redIcon",title:s("Sold-Out prizes"),subtitle:s("You can no longer participate because all prizes are sold out."),link:{_href:"/p/".concat(u.id),children:"Go back"},link_type:"link"});if("unavailable_stage"==c)return r.createElement(It,{title:s("This participation stage is not published")});if("roulette_no_prize"==c)return r.createElement(It,{icon:"knk-winners",title:s("The wheel has no more prizes available")});if("test_mode"==c)return r.createElement(It,{icon:"knk-preview",title:s("Test Mode Activated"),subtitle:s("Only the administrators and agents linked to the promotion can access the test.")});if("one_prize"==c)return r.createElement(It,{icon:"knk-winners",title:s("You already won a prize"),subtitle:"".concat(s("Check it out here"),":"),link:{_href:"/users/my_participation/".concat(u.id),children:"View my participations"},link_type:"link"});if("segment"==c)return console.log(e),r.createElement(It,{icon:"knk-blocked",title:s("Restricted access"),subtitle:(l=e.custom_subtitle,decodeURIComponent(atob(l).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))});if("no_more_participations"==c&&!1!==m){var b,E=s("You don't have more participations for this stage.");return!1!==(null!==(b=null==m?void 0:m.participation_frequency)&&void 0!==b&&b)&&("week"==m.participation_frequency&&(E=s("You can participate in %s days")),"day"==m.participation_frequency&&(E=s("You can participate in %s hours")),"hour"==m.participation_frequency&&(E=s("You can participate in %s minutes")),E=E.replace("%s",parseInt(m.remaining)+1)),r.createElement(It,{icon:"knk-user",title:s("No more participations"),subtitle:E,link:{_href:"/users/my_participation/".concat(u.id),children:"View my participations"},link_type:"link"})}return"no_more_participations"==c&&!1===m?r.createElement(It,{icon:"knk-user",title:s("No more participations"),subtitle:s("You don't have more participations for this stage."),link:{_href:"/users/my_participation/".concat(u.id),children:"View my participations"},link_type:"link"}):"not_activated"==c?r.createElement(It,{icon:"knk-blocked",title:s("Promotion not activated")}):"pending"==c?r.createElement(It,{icon:"knk-blocked",title:s("The promotion will be available in"),seconds:null==e?void 0:e.seconds,onFinish:d}):"registration_pending"==c?r.createElement(It,{icon:"knk-timecounter",title:s("The promotion will open in"),seconds:null==e?void 0:e.seconds,onFinish:d}):r.createElement(It,{icon:"knk-zipped",title:s("Not available")})})),Rt=n(75035),Lt=n(50268);function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function qt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ut(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ut(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vt=(0,a.injectIntl)((function(e){var t,n,i,a,l,s,c,u,m=Wt((0,r.useState)({password:""}),2),d=m[0],p=m[1],f=Wt((0,r.useState)({}),2),_=f[0],g=f[1],v=null!==(t=null==e||null===(n=e.promotion)||void 0===n?void 0:n.Promotion)&&void 0!==t&&t;if(!1===v)return null;var y,h,b=null!==(i=null==e?void 0:e.l)&&void 0!==i?i:{};return r.createElement("div",{className:"flex_cols"},r.createElement("div",{className:"flex_col col_2"},r.createElement("div",{className:"".concat(null!==(a=null==b||null===(l=b.register_form)||void 0===l?void 0:l.class)&&void 0!==a?a:""," register_form_flex")},r.createElement("div",{id:"form_add",className:"form_register template_module ep_form gui_form"},r.createElement("div",{className:"gui_main_text_color_on_bg"},r.createElement(Lt.Z,{model:d,change:function(e,t){g({}),p(qt({},e,t))},errors:_},r.createElement(Rt.Z,{name:"password",_type:"password",_class:{first:!0},label_props:{_class:{other:"hb_secondaryFont"}},autotranslate:!1},null!==(s=null==v?void 0:v.password_desc)&&void 0!==s?s:(y="Enter the password to access the promotion",(0,o.ex)(y,e.intl,h)))))),r.createElement("div",{className:"".concat(null!==(c=null==b||null===(u=b.call_to_action)||void 0===u?void 0:u.class)&&void 0!==c?c:""," template_module register_call_to_action_flex")},r.createElement("div",{className:"finalize_form enter flex_button gui_big_button hb_secondaryFont"},r.createElement(bt.Z,{_fullclass:"",onClick:function(e,t){return function(e){if(""==d.password)return g({password:"Please, enter a password"}),void(null!=e&&e());$.post(window.location.href,{code:d.password},(function(t){var n;null!=e&&e(),"valid"==t.result?self.location.href=null!==(n=null==t?void 0:t.rurl)&&void 0!==n?n:"/p/".concat(v.id):g({password:"The password is not valid"})}),"JSON")}(t)}},"Enter"))))))})),Yt=n(25134),Ht=n(23334),$t=n(93379),Qt=n.n($t),Jt=n(7795),Kt=n.n(Jt),Xt=n(90569),en=n.n(Xt),tn=n(3565),nn=n.n(tn),rn=n(19216),an=n.n(rn),on=n(44589),ln=n.n(on),sn=n(14583),cn={};cn.styleTagTransform=ln(),cn.setAttributes=nn(),cn.insert=en().bind(null,"head"),cn.domAPI=Kt(),cn.insertStyleElement=an();Qt()(sn.Z,cn),sn.Z&&sn.Z.locals&&sn.Z.locals;var un=["link"],mn=["replacements"],dn=["winners"];function pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _n(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var gn=function(e){var t,n=["sided_circles"];null!==(t=null==e?void 0:e.reversed)&&void 0!==t&&t&&n.push("reversed");var i=Math.max(140,152.5+Math.round(80*Math.random()-40)),a=Math.max(60,67.5+Math.round(80*Math.random()-40)),o=Math.max(70,80+Math.round(100*Math.random()-50)),l=Math.max(125,135+Math.round(100*Math.random()-50));return r.createElement("div",{className:n.join(" ")},r.createElement("svg",{viewBox:"0 0 ".concat(300," ").concat(600)},r.createElement("g",{style:{transform:"translate(-20px, ".concat(300,"px)")}},r.createElement("g",{style:{transform:"rotate(".concat(360*Math.random()-180,"deg)")}},r.createElement("circle",{className:"st0",cx:"0",cy:"0",r:"112.5"}),r.createElement("g",{className:"animated color_circles"},r.createElement("circle",{className:"st0",cx:i,cy:-o,r:"20"}),r.createElement("circle",{className:"st0",cx:-i,cy:o,r:"20"})),r.createElement("g",{className:"animated white_circles"},r.createElement("circle",{className:"st1",cx:a,cy:-l,r:"15"}),r.createElement("circle",{className:"st1",cx:-a,cy:l,r:"15"}))))))},vn=function(e){return r.createElement("div",{className:"ep_verified_logo"},r.createElement("svg",{viewBox:"0 0 ".concat(300," ").concat(245)},r.createElement("circle",{className:"circle_outter st1",cx:"150",cy:"113",r:"109"}),r.createElement("circle",{className:"circle_inner st2",cx:"150",cy:"113",r:"94"}),r.createElement("polyline",{className:"tick_bg st3",points:"120,214.7 141.2,236.5 180,196.5"}),r.createElement("path",{className:"logo st4 st5",d:"M203.4,101.7l-15.7-50.1c-0.3-1-0.7-2-1.4-2.9c-3.4-4.9-10.2-6.1-15-2.7l-70.7,50.2c-4.9,3.5-6.1,10.3-2.6,15.2c2.1,3,5.4,4.6,8.8,4.6h86.4c6,0,10.8-4.9,10.8-10.9C204,103.9,203.8,102.8,203.4,101.7z M168.4,69.1l-43.2,30.5c-0.5,0.3-1,0.5-1.5,0.5c-0.9,0-1.7-0.4-2.2-1.2c-0.9-1.2-0.6-2.9,0.7-3.8l43.2-30.5c1.2-0.9,2.9-0.6,3.8,0.7C169.9,66.6,169.6,68.3,168.4,69.1z"}),r.createElement("rect",{className:"st5",x:"31",y:"131",width:"238",height:"56"}),r.createElement("path",{className:"st0",d:"M265,135v48H35v-48H265 M273,127h-8H35h-8v8v48v8h8h230h8v-8v-48V127L273,127z"}),r.createElement("path",{className:"st5 st6",d:"M60,150H0l25,25L0,200h60V150z"}),r.createElement("path",{className:"st5 st6",d:"M240,200h60l-25-25l25-25h-60V200z"}),r.createElement("polygon",{className:"st7",points:"60,200 60,183 35,183"}),r.createElement("polygon",{className:"st7",points:"240,200 240,183 265,183"}),r.createElement("g",{className:"verified"},r.createElement("path",{className:"st0",d:"M62.9,173L50,145h7.9l8.1,18.6L74,145h7.6l-12.9,28H62.9z"}),r.createElement("path",{className:"st0",d:"M85.2,173v-28h19.9v5.6H92.3v5.3h12v5.6h-12v5.8h12.9v5.6H85.2z"}),r.createElement("path",{className:"st0",d:"M111.8,173v-28h13.6c3.2,0,5.7,0.8,7.4,2.3c1.7,1.5,2.6,3.7,2.6,6.5c0,2.1-0.5,3.8-1.6,5.3c-1.1,1.4-2.6,2.4-4.6,3c1.5,0.4,2.7,1.4,3.6,3.1l4.4,7.9h-8.1l-4.9-8.9c-0.3-0.6-0.7-1-1.2-1.2c-0.5-0.2-1.1-0.4-1.7-0.4h-2.2V173H111.8z M119.2,157.4h4.9c2.9,0,4.4-1.1,4.4-3.4c0-2.3-1.5-3.4-4.4-3.4h-4.9V157.4z"}),r.createElement("path",{className:"st0",d:"M142.1,173v-28h7.4v28H142.1z"}),r.createElement("path",{className:"st0",d:"M156.6,173v-28h19.7v5.6H164v5.6h11.5v5.6H164V173H156.6z"}),r.createElement("path",{className:"st0",d:"M181.8,173v-28h7.4v28H181.8z"}),r.createElement("path",{className:"st0",d:"M196.3,173v-28h19.9v5.6h-12.9v5.3h12v5.6h-12v5.8h12.9v5.6H196.3z"}),r.createElement("path",{className:"st0",d:"M222.9,173v-28h11.7c4.9,0,8.7,1.2,11.4,3.7c2.7,2.4,4,5.9,4,10.3c0,4.4-1.3,7.9-4,10.3c-2.7,2.4-6.5,3.7-11.4,3.7H222.9z M230.3,167.1h3.8c2.8,0,4.9-0.7,6.2-2c1.3-1.3,2-3.4,2-6.1c0-2.7-0.7-4.8-2-6.1c-1.4-1.3-3.4-2-6.2-2h-3.8V167.1z"})),r.createElement("polyline",{className:"tick_bg st8",points:"120,214.7 141.2,236.5 180,196.5"})))},yn=function(e){var t=e.link,n=_n(e,un);return null!=t&&""!=t?r.createElement(c.Z,{_href:t},n.children):n.children},hn=function(e){var t=e.replacements;_n(e,mn);if(null==t||0==t.length)return null;var n="";return t.map((function(e){n+='<span class="block">'.concat(e.info,"</span>")})),r.createElement($e.Z,{icon:"knk-information redIcon",_class:"with_replacements"},n)},bn=function(e){var t,n,i,a,o,l,s,u,m,d,p,f=e.winners,_=_n(e,dn),g=null!==(t=null==_?void 0:_.sweep)&&void 0!==t&&t;if(!1===g)return null;var v=null===(n=null==_?void 0:_.display_winners_avatars)||void 0===n||n,y=null!==(i=null==_?void 0:_.linked)&&void 0!==i&&i,h=null!==(a=null==_?void 0:_.showClaimYourPrize)&&void 0!==a&&a,b=null!==(o=null==_?void 0:_.is_alternates)&&void 0!==o&&o,E=null===(l=null==_?void 0:_.info_replacement)||void 0===l||l,w=null!==(s=_.network)&&void 0!==s&&s,A=null!==(u=null===(m=window)||void 0===m?void 0:m.link_usernames)&&void 0!==u&&u,k=null!==(d=null==_||null===(p=_.promotion)||void 0===p?void 0:p.Promotion)&&void 0!==d&&d,S=!!(!1!==k&&k.votable_entries&&k.end_date>date("Y-m-d H:i:s")),C=["winners_list"];y||C.push("not_linkable");var O="";return r.createElement("ul",{className:C.join(" ")},f.map((function(e,t){var n=!1;if(y&&A)switch(w){case Yt.Z.ID_TWITTER:n="https://twitter.com/".concat(e.username);break;case Yt.Z.ID_FACEBOOK:n="https://www.facebook.com/".concat(e.net_id);break;case Yt.Z.ID_INSTAGRAM:n="https://www.instagram.com/".concat(e.username)}switch(w){case Yt.Z.ID_TWITTER:case Yt.Z.ID_INSTAGRAM:O="@".concat(e.username);break;case Yt.Z.ID_FACEBOOK:default:O=e.name}var i=t+1;return f.length>10&&i<10&&(i="0".concat(i)),r.createElement("li",{key:"".concat(b?"alternate":"winner","_").concat(t),onClick:n?function(){}:null},r.createElement("span",{className:"prize_number"},i,". "),r.createElement("span",{className:"user"},r.createElement(yn,{link:S?"/voteme/".concat(k.id,"/").concat(e.user_id,"/"):null},v&&null!=e.image&&r.createElement(r.Fragment,null),r.createElement("div",{style:{height:"1.3em"}},null!=g.network&&g.network==Yt.Z.ID_MULTI?r.createElement("span",{className:"winner_username gui_cutTextOnOverflow ep-".concat(e.network)},O):r.createElement("span",{className:"winner_username gui_cutTextOnOverflow"},O)),E&&r.createElement(hn,{replacements:e.replacements})),null!=e.prize_name&&r.createElement("span",{className:"gui_ribbons"},r.createElement("span",{className:"ribbon in_top gui_not_in_bottom_tiny"},e.prize_name))),!b&&h&&r.createElement("span",{className:"claim_prize_single_button"},r.createElement(c.Z,{_href:"".concat(window.sweeps_url,"sweeps/claim/").concat(g.id,"?f=").concat(e.id),target:"_blank",icon:"knk-present"},null!=g.claim_button_text&&""!=g.claim_button_text?g.claim_button_text:"Claim your prize")))})))},En=(0,a.injectIntl)((function(e){var t,n,i,l,s,u,m,d,p,f,_,g=function(t,n){return(0,o.ex)(t,e.intl,n)},v=pn((0,r.useState)({id:0}),2),y=(v[0],v[1],null!==(t=null==e?void 0:e.winners)&&void 0!==t?t:[]),h=null!==(n=null==e?void 0:e.alternates)&&void 0!==n?n:[],b=null!==(i=null==e||null===(l=e.sweep)||void 0===l?void 0:l.Sweep)&&void 0!==i&&i,w=null!==(s=null==e?void 0:e.promotion_id)&&void 0!==s&&s;if(!1===b)return null;var A="winners_list",k="alternates_list",S=(0,r.useRef)(!1),C=(0,r.useRef)(!1),O=null!==(u=null==e?void 0:e.claim_your_prize_display)&&void 0!==u&&u,P=null!==(m=null==e?void 0:e.winners_disabled)&&void 0!==m&&m,x=null!==(d=null==e?void 0:e.origins)&&void 0!==d?d:[],j=null!==(p=null==e?void 0:e.log)&&void 0!==p?p:[];console.log("log",j);var N,T=null!==(f=null==e?void 0:e.all_sweeps)&&void 0!==f?f:{},B=[];Object.keys(T).map((function(e){-1!==e.indexOf(b.id)&&(N=e),B.push({k:e,v:T[e]})}));var I=null!==(_=null==e?void 0:e.is_spanish)&&void 0!==_&&_,z="".concat(window.web_base_url).concat(I?"condiciones-de-uso/":"terms-and-conditions/"),D=y.length+h.length<100;(0,r.useEffect)((function(){if("2"!=window.server_type){var e=null!=document.getElementById(A)&&document.getElementById(A),t=null!=document.getElementById(k)&&document.getElementById(k);S.current=e?e.innerHTML:null,C.current=t?t.innerHTML:null,setInterval((function(){var n=!1;e&&e.innerHTML!=S.current&&(e.innerHTML=S.current,n=!0),t&&t.innerHTML!=C.current&&(t.innerHTML=C.current,n=!0),n&&setTimeout((function(){alert("Can't touch this,\nM.C. Hammer")}),150)}),500)}}),[]);var Z=y.length+h.length>16;return r.createElement("section",{className:"new_winners_certificate"},r.createElement("header",{className:"c_header"},r.createElement(gn,null),r.createElement(gn,{reversed:!0}),r.createElement("div",{className:"header_contents"},r.createElement(vn,null),r.createElement("h1",null,g("Easypromos Verified Certificate")),r.createElement(a.FormattedMessage,{id:"This giveaway has been done randomly according to the requirements of the mechanism described in section {section} of {link}.",values:{section:"13",link:r.createElement(c.Z,{_href:z,_target:"_blank"},"Easypromos terms and conditions")}}))),r.createElement("main",{className:"c_body"},r.createElement("dl",{className:"c_info"},B.length>0&&r.createElement("div",{className:"sweeps_selector"},r.createElement(Lt.Z,{model:{id:N},change:function(e,t){var n=t.split("/"),r=!1!==w?"/c/".concat(n[0],"/").concat(w,"/").concat(n[1]):"/c/".concat(n[0],"/").concat(n[1]);self.location.href=(0,o.R8)(r)}},r.createElement(Ht.Z,{name:"id",values:B},"Other certificates of this publication"))),r.createElement("div",{className:"main_info"},r.createElement("dt",null,g("Title")),r.createElement("dd",{dangerouslySetInnerHTML:{__html:e.certificate_title}})),r.createElement("div",null,r.createElement("dt",null,g("giveaway","ucfirst")),r.createElement("dd",{dangerouslySetInnerHTML:{__html:e.certificate_name}})),e.certificate_type&&r.createElement("div",null,r.createElement("dt",null,g("Type")),r.createElement("dd",{dangerouslySetInnerHTML:{__html:e.certificate_type}})),r.createElement("div",null,r.createElement("dt",null,g("Giveaway ID")),r.createElement("dd",{dangerouslySetInnerHTML:{__html:e.certificate_ref}})),x.length>0&&r.createElement("div",null,r.createElement("dt",null,g("Publications")),r.createElement("dd",{className:"list_origins_in_certificate gui_margined_children_v"},x.map((function(e,t){return r.createElement(r.Fragment,{key:"net_".concat(t)},e.map((function(t,n){return r.createElement("div",{key:"page_".concat(n)},r.createElement(c.Z,{_href:t.page_link,_target:"_blank",autotranslate:!1,icon:"ep-".concat(e)},t.page_name),r.createElement("ul",{className:"gui_link_actions"},t.post_link.map((function(n,i){var a=i+1,o=t.post_link.length>10&&a<10?"0".concat(a):a,l=g("Post");if(e===Yt.Z.ID_TWITTER)l=g("Tweet");return r.createElement("li",{key:"action_".concat(i)},r.createElement(c.Z,{_href:n,_target:"_blank"},"".concat(l," #").concat(o)))}))))})))})))),e.certificate_organizer&&r.createElement("div",null,r.createElement("dt",null,g("Organizer")),r.createElement("dd",null,e.certificate_organizer)),(b.network!=Yt.Z.ID_TWITTER||b.type!=Yt.Z.TYPE_RETWEET)&&r.createElement("div",null,r.createElement("dt",null,g("Number of finalists")),r.createElement("dd",null,b.config.total_participants)),r.createElement("div",null,r.createElement("dt",null,g("Date and time of giveaway")),r.createElement("dd",null,e.certificate_date," CEST")),!P&&y.length>0&&r.createElement("div",{className:"c_winners".concat(Z?" long_list":"")},r.createElement("dt",{className:"ep-winners"},g("Winners")," (",y.length,")"),r.createElement("dd",{id:A},r.createElement(bn,{sweep:b,winners:y,info_replacement:!1,network:b.network,display_winners_avatars:D,showClaimYourPrize:2==O}))),!P&&h.length>0&&r.createElement("div",{className:"c_alternates".concat(Z?" long_list":"")},r.createElement("dt",{className:"ep-winners grayIcon"},g("Alternates")," (",h.length,")"),r.createElement("dd",{id:k},r.createElement(bn,{sweep:b,winners:h,network:b.network,display_winners_avatars:D,first_count:1,is_alternates:!0})))),!P&&j.length>0&&r.createElement("ul",{className:"replacements_log"},r.createElement("li",{className:"title knk-replace-user hb_mainFontWeightBold"},g("Replacement logs")),j.map((function(e,t){return e&&"string"==typeof e?r.createElement("li",{key:"log_".concat(t),dangerouslySetInnerHTML:{__html:e}}):r.createElement("li",{key:"log_".concat(t)},"".concat(g("Winner")," ").concat(e.prize_position," "),r.createElement(a.FormattedMessage,{id:"{date}: {source} replaces {target}. {msg}",values:{date:"- [".concat(e.date,"]"),source:r.createElement("strong",null,e.source),target:r.createElement("strong",null,e.target),msg:e.msg}}))}))),P&&r.createElement(E.ZP,{_class:{other:"in_bottom"}},r.createElement("p",null,g("The name of the winners and the alternates are not public. For any question, contact with the sweepstakes organizer.")))),r.createElement("footer",{className:"c_footer"},r.createElement("p",null,g("Easypromos will not be responsible for any complaint of third parties regarding prizes, winners and/or alternate winners"))))})),wn=n(84540),An=n(18558);function kn(){return kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kn.apply(this,arguments)}function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var On=function(e){var t,n,i=null!==(t=null==e?void 0:e.title)&&void 0!==t&&t,a=null!==(n=null==e?void 0:e.description)&&void 0!==n&&n;return!1===a||""==a?null:r.createElement("article",{className:"promo_desc gui_main_text_color_on_bg main_text_flex"},r.createElement(A.Z,{_class:{other:"promotion_title"}},i),r.createElement(A.Z,{_class:{font_variant:"Roman",font_size:"small_p",other:"fill_description small_labeled_text"}},a),e.children)},Pn=(0,a.injectIntl)((function(e){var t,n=function(t,n){return(0,o.ex)(t,e.intl,n)},i=null!==(t=null==e?void 0:e.pm)&&void 0!==t&&t;if(!1===i)return null;var l=(null==e?void 0:e.type)||"toc",s=Sn((0,r.useState)(!1),2),u=s[0],m=s[1],d=function(){m(!u)};if("cookies"==l){var p,f,_=null!==(p=null==i?void 0:i.cookies)&&void 0!==p&&p;return!1===_&&(_=null!==(f=null==e?void 0:e.default_cookies_text)&&void 0!==f&&f),r.createElement(On,{title:n("Cookies policy"),description:_},r.createElement(A.Z,{parseHTML:!1,_class:{other:"small_labeled_text gui_not_in_top_small"}},r.createElement("p",null,r.createElement(a.FormattedMessage,{id:"Configure the promotions cookies from the {link}.",values:{link:r.createElement(c.Z,{onClick:d,autotranslate:!1},n("Cookie manager","lowercase"))}}))),u&&r.createElement(An.Z,kn({},e,{whole_layout:!0,force_view:"settings",force_close:d})))}return"policy"==l?r.createElement(On,{title:n("Privacy policy"),description:i.policy}):r.createElement(On,{title:n("Terms and conditions"),description:i.toc})})),xn=n(98866);function jn(e){return jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jn(e)}function Nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,a=function(e,t){if("object"!==jn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==jn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===jn(a)?a:String(a)),r)}var i,a}function Tn(e,t){return Tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tn(e,t)}function Bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=In(e);if(t){var i=In(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function In(e){return In=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},In(e)}var zn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tn(e,t)}(s,e);var t,n,i,l=Bn(s);function s(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=l.call(this,e,t)).state={},n}return t=s,(n=[{key:"render",value:function(){var e=this.props.user;return r.createElement("div",null,r.createElement("ul",{className:"user_participations_info"},r.createElement("li",{className:"knk-goal hb_mainFontWeightRoman"},r.createElement(a.FormattedMessage,{id:"Score: {score} points",values:{score:(0,o.uf)(e.quiz_result)}})),r.createElement("li",{className:"knk-loading hb_mainFontWeightRoman"},r.createElement(a.FormattedMessage,{id:"Time: {time} seconds",values:{time:(0,o.uf)(e.time)}}))))}}])&&Nn(t.prototype,n),i&&Nn(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(r.Component),Dn=(0,a.injectIntl)(zn);function Zn(e){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(e)}function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Zn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Zn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Un=(0,r.forwardRef)((function(e,t){var n,i,a,l,s,c,u,m,d,p,f,_,g,v,y,h=null!==(n=null==e?void 0:e.is_builder)&&void 0!==n&&n,b="rgba(35, 48, 190, 1)",E=h?".builder_canvas_container":":root",w=h?'"SanFrancisco", "BlinkMacSystemFont", Helvetica, Arial, sans-serif':"Helvetica, Arial, sans-serif",A=Rn((0,r.useState)((null==e?void 0:e.p_styles)||{}),2),k=A[0],S=A[1];return(0,r.useImperativeHandle)(t,(function(){return{setCustomStyles:function(e){S(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){Fn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}}}),[]),"".concat(E," {\n\t\t--forced-text-color:").concat((0,o.nn)("#000000"),";\n\t\t--forced-bg-color:").concat((0,o.nn)("#FFFFFF"),";\n\n\t\t--main-color-sec:").concat((0,o.nn)(null!==(i=null==k?void 0:k.main_color_bg)&&void 0!==i?i:b),";\n\t\t--main-color:var(--main-color-sec);\n\t\t--ep-color:").concat((0,o.nn)(b),";\n\t\t--secondary-color-sec:").concat((0,o.nn)(null!==(a=null==k?void 0:k.secondary_color_bg)&&void 0!==a?a:"#000000"),";\n\t\t--secondary-color:var(--secondary-color-sec);\n\t\t--main-color-text:").concat((0,o.nn)(null!==(l=null==k?void 0:k.main_color_text)&&void 0!==l?l:"#000000"),";\n\t\t--secondary-color-text:").concat((0,o.nn)(null!==(s=null==k?void 0:k.secondary_color_text)&&void 0!==s?s:"#FFFFFF"),";\n\t\t--layer-bg-color:").concat((0,o.nn)(null!==(c=null==k?void 0:k.layer_bg_color)&&void 0!==c?c:"#FFFFFF"),";\n\t\t--layer-text-color:").concat((0,o.nn)(null!==(u=null==k?void 0:k.layer_text_color)&&void 0!==u?u:"#000000"),";\n\t\t--layer-main-color:").concat((0,o.nn)(null!==(m=null==k?void 0:k.layer_main_color)&&void 0!==m?m:null!==(d=null==k?void 0:k.main_color_bg)&&void 0!==d?d:b),";\n\n\t\t--main-font:").concat(null!==(p=k.mainfontcss)&&void 0!==p?p:w,";\n\t\t--main-font-light:").concat(null!==(f=null==k?void 0:k.mainfontWeightLight)&&void 0!==f?f:"400",";\n\t\t--main-font-roman:").concat(null!==(_=null==k?void 0:k.mainfontWeightRoman)&&void 0!==_?_:"600",";\n\t\t--main-font-bold:").concat(null!==(g=null==k?void 0:k.mainfontWeightBold)&&void 0!==g?g:"900",";\n\t\t\n\t\t--secondary-font:").concat(null!==(v=k.secondaryfontcss)&&void 0!==v?v:'"Oswald", sans-serif',";\n\t\t--secondary-font-roman:").concat(null!==(y=null==k?void 0:k.secondaryfontWeightRoman)&&void 0!==y?y:"400",";\n\t}")})),qn=Un,Wn=n(86433),Gn=n(95547),Vn=n(37487),Yn=n(30400),Hn=n(38969),$n=n(76771),Qn=n(17939),Jn=n(2916),Kn=n(48255),Xn=n(68257),er=n(70506),tr=(n(38862),n(9163));function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}var rr=["promotion_id"];function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){or(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function or(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==nr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var ur=function(e){var t=e.promotion_id,n=cr(e,rr),i=(0,r.useReducer)((function(e,t){switch(t.type){case"NO_PRIZES":return ar(ar({},e),{},{status:"no_prize"});case"CHECKING":return ar(ar({},e),{},{status:"checking"});case"MAIL_SENT":return ar(ar({},e),{},{status:"mail_sent"});case"SET_PRIZES":return ar(ar({},e),{},{prizes:t.prizes,status:"prize_list"});case"CLAIM_FORM":return ar(ar({},e),{},{prize:t.prize,status:"claim_form"});case"SET_USER_FORM":var n=ar(ar({},e.form),t.user);for(var r in n)""==n[r]&&delete n[r];return ar(ar({},e),{},{form:n,is_valid:t.is_valid});case"TOGGLE_ERRORS":return ar(ar({},e),{},{showFormErrors:!e.showFormErrors});case"SET_CLAIMED":return ar(ar({},e),{},{status:"prize_list",prize:null,prizes:e.prizes.map((function(e){if(e.Prize.id!=t.id)return e;var n=Date.now(),r=new Date(n).toDateString();return ar(ar({},e),{},{PromoClaim:{created:r}})}))});default:return e}}),{status:"landing",prizes:[],prize:null,form:null,showFormErrors:!1,is_valid:!1}),a=lr(i,2),o=a[0],l=a[1],c=(0,r.useRef)("");(0,r.useEffect)((function(){if(0!=n.login_id){l({type:"CHECKING"});var e={};""!=n.ct&&(e.ct=n.ct,e.lid=n.login_id),$.post("/promotions/check_claim/".concat(t),e,(function(e){null==e.reason||"no_prize"!==e.reason?e.prizes&&l({type:"SET_PRIZES",prizes:e.prizes}):l({type:"NO_PRIZES"})}),"JSON")}}),[n.login_id]);var u=function(e,t){l({type:"SET_USER_FORM",user:e,is_valid:t})};return r.createElement("div",null,"landing"==o.status&&r.createElement("div",null,r.createElement("h2",null,"Enter your email in order to check your prizes"),r.createElement(Rt.Z,{change:function(e,t){c.current=t}},"Email"),r.createElement(s.ZP,{onClick:function(){$.post("/promotions/claim_token/".concat(t),{email:c.current}),l({type:"MAIL_SENT"})}},"Check")),"mail_sent"==o.status&&r.createElement("div",null,r.createElement("h2",null,"Check your inbox for an email with a link to check your prizes")),"checking"==o.status&&r.createElement("div",null,r.createElement("h2",null,"Checking if you've won a prize...")),"no_prize"==o.status&&r.createElement("div",null,r.createElement("h2",null,"Better luck next time, You've won no prize")),"prize_list"==o.status&&r.createElement("div",null,r.createElement("h2",null,"Congratulations!"),r.createElement("div",{className:"gui_flex"},o.prizes.map((function(e){return r.createElement("div",{style:{marginBottom:"1rem",borderBottom:"1px solid black"}},e.PrizeType.title,r.createElement("p",null,e.PrizeType.description),"Won on: ",e.Prize.created_format,null==e.PromoClaim&&r.createElement(s.ZP,{onClick:function(){return function(e){l({type:"CLAIM_FORM",prize:e})}(e)}},"Claim"),null!=e.PromoClaim&&r.createElement("div",{style:{color:"red"}},"Prize already claimed on ",e.PromoClaim.created))})))),"claim_form"==o.status&&r.createElement("div",null,r.createElement("h2",null,"Claim Prize"),n.claim_form&&r.createElement(tr.F3,{public_form:!0,form:n.claim_form,onChange:u,showFormErrors:o.showFormErrors,loc:n.loc}),null!=o.prize.PrizeType.claim_form&&r.createElement("div",null,r.createElement("h2",null,"Prize specific information:"),r.createElement(tr.F3,{public_form:!0,loc:n.loc,form:JSON.parse(o.prize.PrizeType.claim_form),onChange:u,showFormErrors:o.showFormErrors})),r.createElement(s.ZP,{_class:{other:"not_in_top"},onClick:function(){if(o.is_valid){var e={claim:JSON.stringify(o.form),prize_id:o.prize.Prize.id};""!=n.ct&&(e.ct=n.ct,e.lid=n.login_id),$.post("/promotions/claim_prize/".concat(t),e,(function(e){l({type:"SET_CLAIMED",id:o.prize.Prize.id})}),"JSON")}else l({type:"TOGGLE_ERRORS"})}},"Submit")))},mr=n(98371),dr=n(42826),pr=n(7822),fr=n(13058),_r=n(22287);function gr(e){return gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr(e)}function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach((function(t){kr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sr(r.key),r)}}function br(e,t){return br=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},br(e,t)}function Er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ar(e);if(t){var i=Ar(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wr(e)}(this,n)}}function wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ar(e){return Ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ar(e)}function kr(e,t,n){return(t=Sr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sr(e){var t=function(e,t){if("object"!==gr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===gr(t)?t:String(t)}var Cr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&br(e,t)}(s,e);var t,n,i,l=Er(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),kr(wr(t=l.call(this,e)),"validate",(function(){if(""!=t.state.code){var e={};e.code=t.state.code,e.site=t.state.logged,t.setState({progress:!0,validated:0,prize:null}),$.post("",e,(function(e){setTimeout((function(){switch(e.result){case"invalid":t.setState({validated:2});break;case"expired":t.setState({validated:4});break;case"valid":t.setState({validated:1,prize:e.prize,validation_comment:null,CodeValidation:null});break;case"used":var n="",r="";if(e.CodeValidation&&e.CodeValidation.validation_site)for(var i in t.props.sites)if(t.props.sites[i].ValidationSite.id==e.CodeValidation.validation_site){n=t.props.sites[i].ValidationSite.name,r=e.CodeValidation.created;break}t.setState({validated:3,prize:e.prize,site:n,date:r})}t.setState({progress:!1})}),300)}),"JSON")}else t.clear()})),kr(wr(t),"invalidate",(function(){if(""!=t.state.code){var e={};e.code=t.state.code,e.unredeem=!0,t.setState({unredeem:!0,validated:0,prize:null}),$.post("",e,(function(e){setTimeout((function(){switch(e.result){case"invalid":t.setState({validated:2});break;case"notvalidated":t.setState({validated:5});break;case"unredeemed":t.setState({code:"",validated:6})}t.setState({unredeem:!1})}),300)}),"JSON")}else t.clear()})),kr(wr(t),"submitComment",(function(e){if(""!=t.state.validation_comment){var n={};n.code=t.state.code,n.validation_comment=t.state.validation_comment,$.post("",n,(function(n){setTimeout((function(){var r;t.toggleCommentRedeem(),t.setState({CodeValidation:null!==(r=null==n?void 0:n.CodeValidation)&&void 0!==r?r:null}),null!=e&&e()}),300)}),"JSON")}else t.clear()})),kr(wr(t),"autoCheck",(function(){setTimeout((function(){t.state.logged&&"errorlogincase"!=t.state.logged&&""!=t.state.code&&t.validate()}),"200")})),kr(wr(t),"clear",(function(){t.setState({site:!1,date:!1,validated:!1,code:"",prize:!1})})),t.state={code:void 0!==e.code?e.code:"",logged:!1,logged_error:!1,password:"",progress:!1,validated:0,show_ticket:!1,show_validations:!1,display_create_comment:!1,validation_comment:null,validations:!1,export_validation_site:!1},t}return t=s,(n=[{key:"checkValidation",value:function(){var e=this,t=this.props.prize;null!=t.QrValidation?(this.state.validated=1,this.setState(yr({},this.state))):this.state.logged&&"errorlogincase"!=this.state.logged&&$.post((0,o.R8)("/prizes/setValidation/".concat(t.PrizeType.promotion_id)),{prize_id:t.Prize.id,promotion_id:t.PrizeType.promotion_id},(function(t){1==t.status||(e.state.validated=t.status,e.setState(yr({},e.state)))}),"JSON")}},{key:"getValidations",value:function(){var e=this;this.setState({show_validations:!0}),this.state.logged&&"errorlogincase"!=this.state.logged&&$.post((0,o.R8)("/prizes/getValidations/".concat(this.props.promotion_id)),{validation_site_id:this.state.logged,promotion_id:this.props.promotion_id},(function(t){1==t.status&&(e.state.validations=t.validations),e.setState(yr({},e.state))}),"JSON")}},{key:"componentDidMount",value:function(){this.logged(),this.autoCheck()}},{key:"login",value:function(e){var t=this;this.props.prize,$.post("",{password:this.state.password},(function(e){e.status?(t.state.logged=e.id,t.state.logged_error=!1):(t.state.logged="errorlogincase",t.state.logged_error=!0),t.setState(yr({},t.state)),t.autoCheck()}),"json")}},{key:"logout",value:function(){this.state.logged=!1,this.state.logged_error=!1,this.setState(yr({},this.state)),$.post("",{logout:!0})}},{key:"toggleTicket",value:function(){this.setState({show_ticket:!this.state.show_ticket})}},{key:"toggleCommentRedeem",value:function(){this.state.display_create_comment=!this.state.display_create_comment,this.setState(yr({},this.state))}},{key:"logged",value:function(){var e=this.props.sites,t=getCookie("site_validate_"+this.props.promotion_id);for(var n in e)if(e[n].ValidationSite.id==t){this.state.logged=e[n].ValidationSite.id;break}this.setState(yr({},this.state))}},{key:"getBarCode",value:function(e){return"EAN-13"===e?"EAN13":e}},{key:"showExportValidations",value:function(e){this.setState({export_validation_site:e})}},{key:"getValue",value:function(e){var t=this.props.prize;return t.PromoCode.code&&"123456789"!=t.User.id?"qr"==e?"".concat(window.location.protocol,"//").concat(window.location.host,"/users/prizecode/").concat(t.Prize.id,"/").concat(t.User.id):t.PromoCode.code:"EAN-13"==e?"123456789018":"CODE128"==e?"Example1234":"CODE39"==e?"ABCDEFG":"qr"==e?"example":void 0}},{key:"render",value:function(){var e,t,n,i,l,s,m,d=this,p=function(e,t){return(0,o.ex)(e,d.props.intl,t)},f=null!=this.props.promotion&&this.props.promotion;if(!f)return null;var _={};if(this.state.logged)for(var g in this.props.sites)if(this.props.sites[g].ValidationSite.id==this.state.logged){_=this.props.sites[g].ValidationSite;break}var v=null!==(e=null==f?void 0:f.hide_unredeem_cv)&&void 0!==e&&e,y=null!==(t=null==f?void 0:f.allowed_comment_on_redeem)&&void 0!==t&&t,h=2!=this.state.validated&&5!=this.state.validated&&6!=this.state.validated&&this.state.validated>0,b=null!==(n=null===(i=this.state.prize)||void 0===i||null===(l=i.User)||void 0===l||null===(s=l.extra)||void 0===s?void 0:s.external_id)&&void 0!==n&&n,E=this.state.validations;return r.createElement("div",null,!1!==this.state.logged&&!1===this.state.logged_error&&r.createElement("div",{className:"hb_mainFontWeightRoman"},r.createElement("header",{className:"gui_logged_header"},r.createElement("span",null,r.createElement(a.FormattedMessage,{id:"Logged in as {user}",values:{user:r.createElement("strong",null,_.name)}}),this.state.show_validations?r.createElement(r.Fragment,null,E.length>0&&r.createElement(c.Z,{_class:{other:"gui_not_in_start_small"},onClick:function(e){d.showExportValidations(_)}},"Export"),r.createElement(c.Z,{_class:{other:"gui_not_in_start_small"},onClick:function(e){d.setState({show_validations:!1,validations:!1})}},"Go back")):r.createElement(c.Z,{_class:{other:"gui_not_in_start_small"},onClick:function(e){d.getValidations()}},"My validations")),r.createElement(c.Z,{_class:{other:"redColor"},onClick:function(e){d.logout()}},"Logout")),this.state.show_validations?E?r.createElement("div",{className:"cv_validator_container gui_code_validation_response gui_padded_children_v gui_flexbox_auto gui_flex_col gui_flex_nowrap gui_flex_align_center"},r.createElement(A.Z,{parseHTML:!1,_class:{font_size:"small_p",other:"gui_participations_list"},style:{width:"100%"}},r.createElement("div",null,p("Total validations"),": ",(0,o.uf)(E.length,0)),r.createElement("table",{className:"gui_not_in_top single_user_participations"+(this.display_total?" gui_not_in_top_big":""),cellSpacing:"0",cellPadding:"0",style:{width:"100%"}},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"hb_secondaryFont",style:{width:"8%"}}),r.createElement("th",{className:"gui_text_align_start hb_secondaryFont",style:{width:"30%"}},p("Date")),r.createElement("th",{className:"gui_text_align_start hb_secondaryFont",style:{width:"22%"}},p("Code")),r.createElement("th",{className:"gui_text_align_start hb_secondaryFont",style:{width:"22%"}},p("Name")),r.createElement("th",{className:"gui_text_align_start hb_secondaryFont",style:{width:"22%"}},p("Prize")))),r.createElement("tbody",null,E.map((function(e,t){var n=E.length-t,i=f.timezone,a=moment.tz(e.created,"Europe/Madrid").tz(i),o=E.length>10&&n<10?"0".concat(n):n;return r.createElement("tr",{key:"p".concat(t)},r.createElement("td",{className:"ranking_pos"},"#",o),r.createElement("td",{className:"gui_text_align_start"},a.format("L, LT")),r.createElement("td",{className:"gui_text_align_start"},e.code),r.createElement("td",{className:"gui_text_align_start"},e.name),r.createElement("td",{className:"gui_text_align_start"},e.prize))})))))):r.createElement(u.Z,{_class:{fullscreen:!0},color:"rgba(var(--main-bg-color), 1)",force_bg:!0},"Checking validations"):r.createElement("div",{className:"cv_validator_container gui_code_validation_response gui_padded_children_v gui_flexbox_auto gui_flex_col gui_flex_nowrap gui_flex_align_center"},r.createElement("div",null,r.createElement("div",{className:"gui_flexbox_auto gui_flex_col gui_flex_nowrap gui_flex_align_center gui_not_in_bottom"},null!=f.code_validator_logo&&""!=f.code_validator_logo&&r.createElement("div",{className:"cv_logo gui_flexbox_auto gui_flex_col gui_flex_nowrap gui_flex_align_center"},r.createElement("div",null,r.createElement("img",{src:f.full_code_validator_logo,height:"150",alt:"",className:"gui_not_in_bottom"}))),r.createElement(dr.Z,{_class:{first:!0,input_size:"big"},model:this.state,execute_on_empty:!0,submitIcon:"knk-arrow-r-big",_focus:!0,onChange:function(e,t){d.state[e]=t,d.setState(yr({},d.state))},onSubmit:this.validate,onClear:""!=this.state.code||0!=this.state.validated?this.clear:null,name:"code",value:""!=this.state.code?this.state.code:"",placeholder:"Enter the promotional code"})),1==this.state.validated&&r.createElement("aside",{className:"validation_status is_ok gui_not_in_bottom"},r.createElement("div",{className:"icon_container"},r.createElement("div",{className:"icon ep-thumbs-up-empty"})),p("Prize validated")),2==this.state.validated&&r.createElement("aside",{className:"validation_status is_ko gui_not_in_bottom"},r.createElement("div",{className:"icon_container"},r.createElement("div",{className:"icon ep-thumbs-down-empty"})),p("The code is not valid")),3==this.state.validated&&r.createElement("aside",{className:"validation_status is_ko gui_not_in_bottom"},r.createElement("div",{className:"icon_container"},r.createElement("div",{className:"icon ep-delete-circle"})),r.createElement(a.FormattedMessage,{id:"This prize was already validated by {validation_point} at {validation_date}",values:{validation_point:r.createElement("strong",null,this.state.site),validation_date:r.createElement("strong",{className:"gui_force_same_line"},moment(this.state.date).format("LLL"))}})),4==this.state.validated&&r.createElement("aside",{className:"validation_status is_ko gui_not_in_bottom"},r.createElement("div",{className:"icon_container"},r.createElement("div",{className:"icon ep-delete-circle"})),r.createElement(a.FormattedMessage,{id:"This code has already expired"})),5==this.state.validated&&r.createElement("aside",{className:"validation_status is_ko gui_not_in_bottom"},r.createElement("div",{className:"icon_container"},r.createElement("div",{className:"icon ep-delete-circle"})),r.createElement(a.FormattedMessage,{id:"This code has not yet been validated"})),6==this.state.validated&&r.createElement("aside",{className:"validation_status is_ok gui_not_in_bottom"},r.createElement("div",{className:"icon_container"},r.createElement("div",{className:"icon ep-thumbs-up-empty"})),r.createElement(a.FormattedMessage,{id:"Done! This prize is available again to redeem"})),this.state.prize&&1==this.state.validated&&r.createElement("dl",{className:"user_custom_fields"},r.createElement("div",null,r.createElement("dt",null,r.createElement("strong",null,p("Name")),":"),r.createElement("dd",null,this.state.prize.User.name)),r.createElement("div",null,r.createElement("dt",null,r.createElement("strong",null,p("Email")),":"),r.createElement("dd",null,this.state.prize.User.email)),"2"==this.state.prize.User.net_type&&!1!==b&&r.createElement("div",null,r.createElement("dt",null,r.createElement("strong",null,p("Ref.")),":"),r.createElement("dd",null,b)),this.state.prize.User.CustomValue&&this.state.prize.User.CustomValue.map((function(e,t){return r.createElement("div",{key:t},r.createElement("dt",null,r.createElement("strong",null,e.label),":"),r.createElement("dd",null,e.value))}))),this.state.prize&&1==this.state.validated&&null!=this.state.prize.User.ticket_url&&r.createElement("div",{className:"gui_flexbox gui_flex_col not_in_top",style:{alignItems:"center",textAlign:"center",gap:"0.2em"}},r.createElement(c.Z,{onClick:function(e){d.toggleTicket()},autotranslate:!1},this.state.show_ticket?p("Hide ticket"):p("View ticket")),this.state.show_ticket&&r.createElement("img",{src:this.state.prize.User.ticket_url})),this.state.prize&&1==this.state.validated&&r.createElement("div",{className:"validation_prize"},r.createElement(pr.Z,{prize:this.state.prize.PrizeType,user_prize:this.state.prize.Prize,is_layer:!1,in_validation:!0})),null!=f.code_validator_support&&""!=f.code_validator_support&&r.createElement("div",{className:"support_text gui_text_align_center gui_not_in_top gui_is_not_padded"},r.createElement("p",{dangerouslySetInnerHTML:{__html:f.code_validator_support}})),h&&r.createElement("div",{className:"support_text gui_text_align_center gui_not_in_top gui_is_not_padded"},this.state.prize&&1==this.state.validated&&y&&h&&r.createElement("div",{className:"gui_not_in_bottom"},null!==(m=this.state.CodeValidation)&&void 0!==m&&m.validation_comment?r.createElement("div",null,r.createElement("strong",null,p("Note")),": ",this.state.CodeValidation.validation_comment,r.createElement("span",{className:"gui_not_in_start_tiny",style:{whiteSpace:"nowrap"}},"(",r.createElement(c.Z,{onClick:function(e){d.toggleCommentRedeem()},autotranslate:!1},p("Edit","lowercase")),")")):r.createElement(c.Z,{onClick:function(e){d.toggleCommentRedeem()},icon:"knk-comment",_class:{other:"hb_secondaryFont"}},"Add a note"),this.state.display_create_comment&&r.createElement(w.Z,{title:"Validation note",pm:f,backButton:function(){return d.toggleCommentRedeem()}},r.createElement("article",null,r.createElement("div",{className:"gui_form_register template_module gui_main_text_color_on_bg gui_flex_center"},r.createElement(_r.Z,{_class:{first:!0},name:"validation_comment",model:this.state,change:function(e,t){d.state[e]=t,d.setState(yr({},d.state))}},"Note")),r.createElement("div",{className:"template_module mod_align_center register_call_to_action_flex is_react_cta"},r.createElement("div",{className:"finalize_form enter flex_button gui_big_button hb_secondaryFont dis_wo_signin"},r.createElement(bt.Z,{_fullclass:"",disabled:!1,onClick:function(e,t){return d.submitComment(t)}},"Save")))))),!v&&r.createElement(r.Fragment,null,r.createElement("p",null,p("This code has been marked as redeemed.")),r.createElement(c.Z,{_class:{other:"gui_underlined_text"},onClick:function(e){d.invalidate()}},"Click here to undo and mark the code as not redeemed."))))),(this.state.progress||this.state.unredeem)&&r.createElement(u.Z,{_class:{fullscreen:!0},color:"rgba(var(--main-bg-color), 1)",force_bg:!0,autotranslate:!1},this.state.progress?p("Verifying code"):p("Marking code as not redeemed")),this.state.export_validation_site&&r.createElement(fr.Z,{is_public:!0,type:"validation_sites",toggle:function(){return d.setState({export_validation_site:!1})},validation_site:this.state.export_validation_site,promotion:f,promotion_id:f.id})),(!1===this.state.logged||!0===this.state.logged_error)&&r.createElement("div",{className:"is_fullscreen complete_centered"},r.createElement("div",{className:"gui_flexbox gui_flex_col gui_flex_nowrap cv_validator_container",style:{width:"35%"}},r.createElement("div",{className:"gui_flexbox_auto gui_flex_col gui_flex_nowrap gui_flex_align_center"},r.createElement("div",{className:"cv_logo gui_flexbox_auto gui_flex_col gui_flex_nowrap gui_flex_align_center gui_not_in_bottom"},null!=f.code_validator_logo&&""!=f.code_validator_logo&&r.createElement("div",null,r.createElement("img",{src:f.full_code_validator_logo,height:"150",alt:"",className:"gui_not_in_bottom_small"})),p("Validation point identification")),r.createElement("div",{className:"validation_portal_password gui_pos_rel"},r.createElement(dr.Z,{_class:{first:!0,input_size:"big"},_type:"password",autocomplete:!1,submitIcon:"knk-arrow-r-big",submitColor:"black",errors:{},model:this.state,_focus:!0,onChange:function(e,t){d.state[e]=t,d.setState(yr({},d.state))},onSubmit:function(e,t){return d.login(t)},name:"password",placeholder:"Password",display_error_at_bottom:!0}),!0===this.state.logged_error&&r.createElement(mr.Z,null,"There is no validation point with this password")),null!=f.code_validator_support&&""!=f.code_validator_support&&r.createElement("div",{className:"support_text gui_text_align_center gui_not_in_top gui_is_not_padded",style:{marginTop:"30px"}},r.createElement("p",{dangerouslySetInnerHTML:{__html:f.code_validator_support}}))))))}}])&&hr(t.prototype,n),i&&hr(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(r.Component),Or=(0,a.injectIntl)(Cr),Pr=n(35778),xr=(n(4723),n(73727)),jr=n(16550),Nr=n(57107),Tr=n(93208);function Br(e){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(e)}function Ir(){return Ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ir.apply(this,arguments)}function zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dr(e,t,n){return(t=Mr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mr(r.key),r)}}function Mr(e){var t=function(e,t){if("object"!==Br(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Br(t)?t:String(t)}function Fr(e,t){return Fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fr(e,t)}function Rr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lr(e);if(t){var i=Lr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Br(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lr(e){return Lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lr(e)}var Ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fr(e,t)}(l,e);var t,n,i,a=Rr(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).state={questions:{},stages:[],cookieEnabled:!0},t}return t=l,n=[{key:"render",value:function(){var e=this,t=null!=this.props.stage&&this.props.stage.Stage,n=this.props.promotion.Promotion.timezone,i=null!=t&&(!this.props.promotion.Promotion.is_multistage||moment.tz(t.start_date,n).isBefore()&&moment.tz(t.end_date,n).isAfter());return r.createElement(xr.VK,{hashType:"noslash"},r.createElement(jr.rs,null,r.createElement(jr.AW,{path:"/promotions/participate/:promotion_id",exact:!0,render:function(t){return null==e.props.stages||1==e.props.stages.length&&i?r.createElement(Nr.Z,e.props):r.createElement(Tr.Z,{brackets:e.props.brackets,stages:e.props.stages,participations:e.props.participations,promo:e.props.promotion.Promotion})}}),r.createElement(jr.AW,{path:"/promotions/participate/:promotion_id/:stage_id",render:function(t){var n=t.match.params.stage_id,i=e.state.stages.find((function(e){return e.Stage.id==n}));return null==i&&null!=e.props.stage&&e.props.stage.Stage.id==n&&(i=e.props.stage,e.state.questions[n]=e.props.questions),null==i?($.post((0,o.R8)("/promotions/stage_data/".concat(t.match.params.promotion_id,"/").concat(n)),(function(t){e.state.stages.push(t.stage),e.state.questions[t.stage.Stage.id]=t.questions,e.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(n),!0).forEach((function(t){Dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.state))}),"JSON"),r.createElement("div",null,"Loading...")):r.createElement(Nr.Z,Ir({},e.props,{questions:e.state.questions[i.Stage.id],stage:i,stages:e.props.stages}))}})))}}],n&&Zr(t.prototype,n),i&&Zr(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.Component),qr=Ur,Wr=function(e){var t,n,i,a,o,l,s=null!==(t=null==e||null===(n=e.promotion)||void 0===n?void 0:n.Promotion)&&void 0!==t?t:{},c=null!==(i=null==e||null===(a=e.stage)||void 0===a?void 0:a.Stage)&&void 0!==i?i:{},u=null!==(o=null==e||null===(l=e.user)||void 0===l?void 0:l.User)&&void 0!==o?o:{};return r.createElement("div",{className:"flex_cols"},r.createElement("div",{className:"flex_col col_2"},r.createElement(Xe.Wo,{promotion:s,stage:c,user:u})))},Gr=n(59143),Vr=n(37727);function Yr(e){return Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yr(e)}function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ei(r.key),r)}}function $r(e,t){return $r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$r(e,t)}function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kr(e);if(t){var i=Kr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Yr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jr(e)}(this,n)}}function Jr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kr(e){return Kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kr(e)}function Xr(e,t,n){return(t=ei(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ei(e){var t=function(e,t){if("object"!==Yr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Yr(t)?t:String(t)}var ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$r(e,t)}(l,e);var t,n,i,a=Qr(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Xr(Jr(t=a.call(this,e)),"addResult",(function(e){if("random"==e){var n=Math.floor(5*Math.random()),r=Math.floor(5*Math.random()),i={},a=t.props.questions[0].Answer[0],o=t.props.questions[0].Answer[1];i[a.question_id]={},i[a.question_id][a.id]=n,i[a.question_id][o.id]=r,t.setState({results:t.state.results.concat(i)})}else t.setState({results:t.state.results.concat(e)})})),Xr(Jr(t),"pagination",(function(){t.page_actual=t.page_actual<t.total_pages-1?t.page_actual+1:0,t.setState({top:t.page_actual*(t.prediction_module_height+t.prediction_module_separation)*t.predictions_per_page})})),Xr(Jr(t),"startPaginating",(function(){t.state.paginating=!0,t.timer=setInterval(t.pagination,15e3)})),Xr(Jr(t),"compute",(function(){var e={},n=t.props.questions[0].Question.id,r=t.props.questions[0].Answer[0].id,i=t.props.questions[0].Answer[1].id;for(var a in t.odds={_1:0,_x:0,_2:0},t.state.results){var o=t.state.results[a][n][r],l=t.state.results[a][n][i],s=o+"-"+l;null==e[s]&&(e[s]=0),e[s]++,parseInt(o)>parseInt(l)?t.odds._1++:parseInt(o)<parseInt(l)?t.odds._2++:t.odds._x++}var c=t.state.results.length;0==c?t.odds={_1:100/3,_x:100/3,_2:100/3}:(t.odds._1=t.odds._1/c*100,t.odds._x=t.odds._x/c*100,t.odds._2=t.odds._2/c*100);var u=Object.keys(e).map((function(t){return{result:t,count:e[t]}})).sort((function(e,t){return e.count==t.count?e.result<t.result?1:-1:e.count<t.count?1:-1})),m={};for(var a in u)m[u[a].result]=a;var d={results:Object.keys(e).map((function(t){return{result:t,count:e[t],pos:m[t]}})),odds:t.odds};return t.total_pages=Math.ceil(d.results.length/t.predictions_per_page),t.total_pages>1&&!t.state.paginating&&t.startPaginating(),d})),t.state={odds:{_1:100/3,_x:100/3,_2:100/3},results:[],unique:{},paginating:!1,top:0},t.prediction_module_height=.06*window.innerHeight,t.prediction_module_separation=.02*window.innerHeight,t.predictions_per_page=8,t.page_actual=0,t.total_pages=1,t}return t=l,(n=[{key:"componentWillMount",value:function(){(0,o.pZ)("comp/projection_match.css")}},{key:"componentDidMount",value:function(){var e=this;window.QuizMonitor=this,$.get("/promotions/quizmonitor/"+this.props.promotion_id+"/data",(function(t){e.setState({results:t})}),"json")}},{key:"render",value:function(){var e=this,t=function(t,n){return(0,o.ex)(t,e.props.intl,n)},n=this.props.questions[0].Answer,i=this.compute(),a=i.results,l=i.odds,s=20,c=l._1+l._x+l._2,u=Math.max(l._1/c,l._x/c,l._2/c),m={_1:s+l._1/c*13.333333333333336/u,_x:s+l._x/c*13.333333333333336/u,_2:s+l._2/c*13.333333333333336/u},d=null!=this.props.integration&&this.props.integration;if(!d)return null;var p=null!=d.config&&d.config;if(!p)return null;var f=null!=p.background?p.background:"#000048",_=null!=p.local_color?p.local_color:"rgba(115, 0, 47, 1)",g=null!=p.visitor_color?p.visitor_color:"rgba(0, 113, 105, 1)",v=null!=p.title?p.title:t("Your predictions for the match"),y=null!=p.date?moment(p.date):moment(),h=null!=p.room?p.room:t("Room")+" #1",b="rgba(255, 255, 255, 0.2)",E=20/a.length,w=null!=d.config&&null!=d.config.full_header?{backgroundImage:"url("+d.config.full_header+")"}:{};return r.createElement("div",{className:"gui_projection_match is_fullscreen awesome",style:{background:f}},r.createElement("header",{className:"projection_header",style:w},r.createElement("h2",{className:"title textual"},v),r.createElement("div",{className:"room_info"},r.createElement("span",{className:"date"},y.format("DD-MM-YYYY")),r.createElement("span",{className:"room"},h))),r.createElement("section",{className:"projection_contents"},r.createElement("article",{className:"gui_flexbox gui_flex_col gui_flex_nowrap"},r.createElement("article",{className:"proj_section"},r.createElement("h3",{className:"section_title textual"},t("Winner predictions")),r.createElement("div",{className:"conts match_teams"},r.createElement("div",{className:"vs gui_pos_rel"},r.createElement("div",null,r.createElement("h4",{className:"team_name"},t("vs")))),n.map((function(e,t){return r.createElement("div",{key:"a"+t},r.createElement("div",{className:"logo",style:{backgroundImage:"url("+e.fullimage+")"}},r.createElement("img",{src:window.cdn_url+"img/blank_1x1.png",height:"100%"})),r.createElement("h4",{className:"team_name"},e.answer))}))),r.createElement("div",{className:"conts winner_predictions"},r.createElement("div",{className:"winner_predictions_stats"},r.createElement(Vr.y_,{defaultStyle:{w:m._1},style:{w:(0,Vr.ST)(m._1,{stiffness:300,damping:40})}},(function(e){return r.createElement("div",{style:{flexBasis:e.w+"%"}},r.createElement("div",{className:"circled_counter"},r.createElement("div",{className:"info",style:{fontSize:"calc(15vh * "+m._1/100+")"}},Math.round(10*l._1)/10,"%"),r.createElement("div",{className:"legend",style:{background:_}},r.createElement("span",{style:{fontSize:"calc(11vh * "+m._1/100+")"}},"1")),r.createElement("img",{src:window.cdn_url+"img/blank_1x1.png",width:"100%"})))})),r.createElement(Vr.y_,{defaultStyle:{w:m._x},style:{w:(0,Vr.ST)(m._x,{stiffness:300,damping:40})}},(function(e){return r.createElement("div",{style:{flexBasis:e.w+"%"}},r.createElement("div",{className:"circled_counter"},r.createElement("div",{className:"info",style:{fontSize:"calc(15vh * "+m._x/100+")"}},Math.round(10*l._x)/10,"%"),r.createElement("div",{className:"legend",style:{background:b}},r.createElement("span",{style:{fontSize:"calc(11vh * "+m._x/100+")"}},"X")),r.createElement("img",{src:window.cdn_url+"img/blank_1x1.png",width:"100%"})))})),r.createElement(Vr.y_,{defaultStyle:{w:m._2},style:{w:(0,Vr.ST)(m._2,{stiffness:300,damping:40})}},(function(e){return r.createElement("div",{style:{flexBasis:e.w+"%"}},r.createElement("div",{className:"circled_counter"},r.createElement("div",{className:"info",style:{fontSize:"calc(15vh * "+m._2/100+")"}},Math.round(10*l._2)/10,"%"),r.createElement("div",{className:"legend",style:{background:g}},r.createElement("span",{style:{fontSize:"calc(11vh * "+m._2/100+")"}},"2")),r.createElement("img",{src:window.cdn_url+"img/blank_1x1.png",width:"100%"})))})))))),r.createElement("article",{className:"gui_flexbox gui_flex_col gui_flex_nowrap"},r.createElement("article",{className:"proj_section gui_flex_space_between"},r.createElement("h3",{className:"section_title textual"},t("Score predictions")),r.createElement("div",{className:"conts score_predictions",style:{flexBasis:"calc("+((this.prediction_module_height+this.prediction_module_separation)*this.predictions_per_page-this.prediction_module_separation)+"px + 6vh)",flexGrow:"0"}},r.createElement("div",{className:"teams_legend"},n.map((function(e,t){return r.createElement("div",{key:"a"+t},r.createElement("h4",{className:"team_name"},e.answer))}))),r.createElement("div",{className:"score_predictions_stats"},r.createElement(Vr.y_,{defaultStyle:{x:0},style:{x:(0,Vr.ST)(this.state.top,{stiffness:150,damping:40})}},(function(t){return r.createElement("ul",{style:{top:"-".concat(t.x,"px")}},a.map((function(t,n){var i={x:(0,Vr.ST)(t.pos*(e.prediction_module_height+e.prediction_module_separation),{stiffness:300,damping:40})},o=10+E*(a.length-t.pos),l={x:(0,Vr.ST)(o,{stiffness:300,damping:40})},s=t.result.split("-"),c=100*t.count/e.state.results.length,u=b;return s[0]>s[1]&&(u=_),s[0]<s[1]&&(u=g),r.createElement(Vr.y_,{key:n,defaultStyle:{x:window.innerHeight},style:i},(function(e){return r.createElement("li",{id:t.result,style:{top:"".concat(e.x,"px")}},r.createElement("div",null,r.createElement("span",{className:"local",style:{background:u}},s[0]),r.createElement(Vr.y_,{defaultStyle:{x:30},style:l},(function(e){return r.createElement("span",{className:"percent",style:{background:u,width:"".concat(e.x,"vw")}},Math.round(10*c)/10,"%")})),r.createElement("span",{className:"visitor",style:{background:u}},s[1])))}))})))}))))))))}}])&&Hr(t.prototype,n),i&&Hr(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.Component),ni=(0,a.injectIntl)(ti),ri=function(e){var t,n,i,a,o,l,s,u=null!==(t=null==e?void 0:e.promotion)&&void 0!==t&&t;if(!1===u)return null;if(!1===(null!=u.public_entries&&"0"!=u.public_entries))return null;var m=null!==(n=null==u?void 0:u.has_ranking)&&void 0!==n&&n,d=null!==(i=null==u?void 0:u.is_multiparticipation)&&void 0!==i&&i,p=null!==(a=null==e?void 0:e.children)&&void 0!==a?a:null!==(o=null==u||null===(l=u.custom_labels)||void 0===l?void 0:l.view_entries_button)&&void 0!==o?o:"";""==p&&(p=m?"Ranking":"View all participants");var f=2==u.promo_type&&d?null:"_top",_=null!==(s=null==e?void 0:e.in_widget)&&void 0!==s&&s,g="/entries/".concat(u.id);return _&&(g+="/?fromwidget=1"),r.createElement("li",{className:"voteme_btn hb_secondaryFont"},r.createElement(c.Z,{_href:g,_class:{icon:(null==e?void 0:e.icon)||"knk-entries"},_target:f},p))},ii=function(e){var t,n,i,a,o,l=null!==(t=null==e?void 0:e.promotion)&&void 0!==t&&t;if(!1===l)return null;var s=null!==(n=null==e?void 0:e.user)&&void 0!==n&&n;if(!1===s)return null;var u=null!=l.public_entries&&"0"!=l.public_entries,m=null!=l.confirm_to_publish&&"0"!=l.confirm_to_publish,d=null!==(i=null==l?void 0:l.has_ranking)&&void 0!==i&&i;if(!1===u||m||d)return null;var p=null!==(a=null==e?void 0:e.children)&&void 0!==a?a:"View entry",f=null!==(o=null==e?void 0:e.in_widget)&&void 0!==o&&o,_="/voteme/".concat(l.id,"/").concat(s.id);return f&&(_+="/?fromwidget=1"),r.createElement("li",{className:"voteme_btn hb_secondaryFont"},r.createElement(c.Z,{_href:_,_class:{icon:(null==e?void 0:e.icon)||"knk-voteme"},_target:null},p))},ai=function(e){var t,n,i,a,o,l,s=null!==(t=null==e?void 0:e.promotion)&&void 0!==t&&t;if(!1===s)return null;if(!(null!==(n=null==s?void 0:s.multi_participation)&&void 0!==n&&n))return null;var u=null!==(i=null==e?void 0:e.children)&&void 0!==i?i:null!==(a=null==s||null===(o=s.custom_labels)||void 0===o?void 0:o.my_participation_button)&&void 0!==a?a:"My participation",m="mobile"==window.platform?"_top":null,d=null!==(l=null==e?void 0:e.in_widget)&&void 0!==l&&l,p="/users/my_participation/".concat(s.id);return d&&(p+="/?fromwidget=1"),r.createElement("li",{className:"my_participation_btn hb_secondaryFont"},r.createElement(c.Z,{_href:p,_class:{icon:(null==e?void 0:e.icon)||"knk-me"},_target:m},u))},oi=function(e){var t,n,i,a,o,l,s=null!==(t=null==e?void 0:e.promotion)&&void 0!==t&&t;if(!1===s)return null;if(!1===(null!=s.brackets_enabled&&"1"==s.brackets_enabled))return null;var u=null!==(n=null==e?void 0:e.bracket_id)&&void 0!==n&&n,m=null!==(i=null==e?void 0:e.children)&&void 0!==i?i:null!==(a=null==s||null===(o=s.custom_labels)||void 0===o?void 0:o.view_brackets_button)&&void 0!==a?a:"Brackets",d=null!==(l=null==e?void 0:e.in_widget)&&void 0!==l&&l,p=!1!==u?"/single_brackets/".concat(s.id,"/").concat(u):"/brackets/".concat(s.id);return d&&(p+="/?fromwidget=1"),r.createElement("li",{className:"brackets_btn hb_secondaryFont"},r.createElement(c.Z,{_href:p,_class:{icon:(null==e?void 0:e.icon)||"knk-brackets"},_target:null},m))},li=function(e){var t,n,i,a,o,l,s=null!==(t=null==e?void 0:e.promotion)&&void 0!==t&&t;if(!1===s)return null;if(!1===(null!=s.brackets_enabled&&"1"==s.brackets_enabled))return null;var u=null!==(n=null==e?void 0:e.children)&&void 0!==n?n:null!==(i=null==s||null===(a=s.custom_labels)||void 0===a?void 0:a.gallery_button)&&void 0!==i?i:"View gallery",m="mobile"==window.platform?"_top":null,d=null!==(o=null==e?void 0:e.in_widget)&&void 0!==o&&o,p=null!==(l=null==e?void 0:e.gallery_link)&&void 0!==l?l:"/gallery/".concat(s.id);return d&&(p+="/?fromwidget=1"),r.createElement("li",{className:"brackets_btn hb_secondaryFont"},r.createElement(c.Z,{_href:p,_class:{icon:(null==e?void 0:e.icon)||"knk-tiled-gallery"},_target:m},u))},si=function(e){var t,n,i,a,o,l=null!==(t=null==e?void 0:e.promotion)&&void 0!==t&&t;if(!1===l)return null;var s=null!==(n=null==e?void 0:e.children)&&void 0!==n?n:null!==(i=null==l||null===(a=l.custom_labels)||void 0===a?void 0:a.gallery_button)&&void 0!==i?i:"Go to home page",u="mobile"==window.platform?"_top":null,m=null!==(o=null==e?void 0:e.in_widget)&&void 0!==o&&o,d="/p/".concat(l.id);return m&&(d+="/?fromwidget=1"),r.createElement("li",{className:"home_btn hb_secondaryFont"},r.createElement(c.Z,{_href:d,_class:{icon:(null==e?void 0:e.icon)||"knk-home"},_target:u},s))},ci=function(e){return r.createElement("li",{className:"enter_again_btn hb_secondaryFont"},e.children)},ui=(0,a.injectIntl)((function(e){var t,n,i,a,l,s,u,m,d,p,f,_,g,v,y,h,b=null!==(t=null==e?void 0:e.promotion)&&void 0!==t&&t;if(!1===b)return null;if(!(null!==(n=null==b?void 0:b.multi_participation)&&void 0!==n&&n))return null;var E=function(t,n){return(0,o.ex)(t,e.intl,n)},w=null!==(i=null==e?void 0:e.user)&&void 0!==i&&i,A=(a=null==e?void 0:e.already,l=null==e?void 0:e.instant,s=null==e?void 0:e.total_entries,null!==(u=null==b?void 0:b.one_prize_per_promotion)&&void 0!==u&&u),k=null!==(m=null==e?void 0:e.remaining_participations)&&void 0!==m&&m,S=null!==(d=null==e?void 0:e.has_already_won)&&void 0!==d&&d,C=parseInt(null!==(p=null==k?void 0:k.in_period)&&void 0!==p?p:null!==(f=null==b?void 0:b.max_entries_per_user)&&void 0!==f?f:0),O=null!==(_=null==k?void 0:k.used)&&void 0!==_?_:0,P=!0;O>=C&&(P=!1),S&&A&&(P=!1);var x=!!(P&&C<=10),j=null!==(g=null==e?void 0:e.children)&&void 0!==g?g:null!==(v=null==b||null===(y=b.custom_labels)||void 0===y?void 0:y.enter_again_button)&&void 0!==v?v:E("Enter again");if(x&&!1!==k&&(j+=" (".concat(e.intl.formatMessage({id:"{actual} out of {total}"},{actual:O,total:C}),")")),!P&&!1===k)return null;if(!P&&!1!==k)return null;var N="mobile"==window.platform?"_top":null,T=null!==(h=null==e?void 0:e.in_widget)&&void 0!==h&&h,B="/promotions/participate/".concat(b.id);return null!=w.stage&&""!=w.stage&&(B+="/".concat(w.stage)),T&&(B+="/?fromwidget=1"),r.createElement(ci,null,r.createElement(c.Z,{_href:B,_class:{icon:(null==e?void 0:e.icon)||"knk-reload"},_target:N,autotranslate:!1},j))}));function mi(){return mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mi.apply(this,arguments)}function di(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fi=(0,a.injectIntl)((function(e){var t,n,i,a,l,s,u,m,d,p,f,_,g,v,y,h,b,E=null!==(t=null==e||null===(n=e.promotion)||void 0===n?void 0:n.Promotion)&&void 0!==t&&t;if(!1===E)return null;var w=null!==(i=null==e||null===(a=e.user)||void 0===a?void 0:a.User)&&void 0!==i&&i;if(!1===w)return null;var A=null!=E.public_entries&&"0"!=E.public_entries,k=parseInt(null!==(l=null==E?void 0:E.login_type)&&void 0!==l?l:1),S=null!==(s=null==e?void 0:e.login_id)&&void 0!==s&&s,C=null!==(u=null==e?void 0:e.login_data)&&void 0!==u&&u,O=!1!==S&&!1!==C&&3!=k,P=null!==(m=null==E?void 0:E.brackets_enabled)&&void 0!==m&&m,x=null!==(d=null==e?void 0:e.prizes)&&void 0!==d?d:{},j=x.length,N=!1!==x&&1==j&&(null===(p=null===(f=x[0])||void 0===f||null===(_=f.PrizeType)||void 0===_?void 0:_.popup_enabled)||void 0===p||p),T=null===(g=null==e?void 0:e.force_visible_on_load)||void 0===g||g,B=!!N&&T,I=di((0,r.useState)(B),2),z=I[0],D=I[1],Z=di((0,r.useState)(0),2),M=Z[0],F=Z[1],R=null!==(v=null==E?void 0:E.multi_participation)&&void 0!==v&&v,L=j>0,U=R,q="1"==(null!==(y=null==w?void 0:w.public_entry)&&void 0!==y?y:"1"),W=null!==(h=null!=e.gallery_link&&""!=e.gallery_link)&&void 0!==h&&h;if(!L&&3==k)return null;var G,V,Y={promotion:E,in_widget:e.in_widget};return r.createElement(r.Fragment,null,r.createElement("ul",{className:"success_actions gui_main_text_color_on_bg"},L&&r.createElement("li",{className:"prizes_btn hb_secondaryFont"},r.createElement(c.Z,{onClick:function(){return F(0),void D(!0)},_class:{icon:"knk-winners"},autotranslate:!1},(G="View prize",(0,o.ex)(G,e.intl,V)),": ",x[M].PrizeType.title)),3!=k&&r.createElement(r.Fragment,null,U&&r.createElement(ui,mi({user:w,participations_info:e.participations_info,remaining_participations:e.remaining_participations,already:e.already,instant:e.instant,total_entries:e.total_entries},Y)),A&&r.createElement(ri,Y),q&&r.createElement(ii,mi({user:w},Y),"View your entry"),O&&r.createElement(ai,Y),P&&r.createElement(oi,mi({bracket_id:e.bracket_id},Y)),W&&r.createElement(li,mi({icon:"knk-template",gallery_link:W},Y)),(!R||U)&&r.createElement(si,Y))),L&&z&&r.createElement(he.Z,{actual_prize:M+1,autoplay:!0,backButton:function(){return D(!1)},code:x[M].PromoCode,disable_navigation:1==j,navigate:function(e){return function(e){var t=M;"next"==e&&++t>=j&&(t=0),"prev"==e&&(t--,M<0&&(t=j-1)),F(t)}(e)},next_prize:x[M<j-1?M+1:0].PrizeType,prev_prize:x[M>0?M-1:j-1].PrizeType,prize:x[M].PrizeType,share:x[M].Share,total_prizes:j,user_prize:x[M].Prize,user:x[M].User,validation_portal:null!==(b=null==E?void 0:E.code_validator)&&void 0!==b?b:null}))})),_i=n(79027),gi=n(21101),vi=n(74127),yi=n(6467),hi=n.n(yi),bi=n(32820),Ei=n.n(bi),wi=n(4281),Ai=n(46264),ki=n(94127),Si=["base_route"];function Ci(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xi=function(e){var t=(0,jr.UO)().stage_id,n=e.stages.find((function(e){return e.Stage.id==t})),i=Oi((0,r.useState)(!1),2),a=i[0],l=i[1];return(0,r.useEffect)((function(){$.get((0,o.R8)("/stages/getAvailableParticipations/".concat(e.promotion.id,"/").concat(t)),(function(e){l(e)}),"JSON")}),[]),0==a?r.createElement("div",{className:"gui_pos_rel"},r.createElement(Ai.Z,{color:"#000000"})):r.createElement(Jn.Z,{base_route:"/gallery/",stage:n.Stage,promotion:e.promotion,is_logged:e.is_logged,avail_participations:a})},ji=(0,a.injectIntl)((function(e){var t=e.base_route,n=Ci(e,Si);return r.createElement(xr.VK,{basename:t},r.createElement(jr.rs,null,r.createElement(jr.AW,{exact:!0,path:"/"},r.createElement(ki.Z,{stages:n.stages,promotion:n.promotion})),r.createElement(jr.AW,{path:"/ranking/:stage_id"},r.createElement(Ke.Z,{base_route:t,promotion:n.promotion,login_id:n.login_id,participants:[{}],stages:n.stages,is_logged:n.is_logged,avail_participations:n.avail_participations})),r.createElement(jr.AW,{path:"/:stage_id"},r.createElement(xi,{base_route:t,stages:n.stages,promotion:n.promotion,is_logged:n.is_logged}))))})),Ni=n(24514),Ti=n(54949),Bi=n(8434),Ii=n(5619);function zi(e){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zi(e)}function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){Mi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mi(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==zi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zi(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ri(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Li=function(e){var t,n,i=null!==(t=null==e?void 0:e.image)&&void 0!==t&&t,a=null!==(n=null==e?void 0:e.description)&&void 0!==n&&n;return r.createElement("div",{className:"flex_cols"},!1!==i&&r.createElement("div",{className:"flex_col col_1"},r.createElement("div",{className:"register_media_flex mod_align_param"},r.createElement("img",{src:i,style:{maxWidth:"100%"}}))),r.createElement("div",{className:"flex_col col_2"},r.createElement("div",{className:"mod_align_param register_form_flex",style:{width:"100%"}},!1!==a&&""!=a&&r.createElement(A.Z,{_class:{font_size:"small_p",other:"gui_main_text_color_on_bg"}},a),r.createElement("div",{className:"mod_align_param"},r.createElement("article",null,e.children)))))},Ui=(0,a.injectIntl)((function(e){var t,n,i,l,s,u,m,d,p,f,_=null!==(t=null==e?void 0:e.prize)&&void 0!==t&&t,g=null!==(n=null==e||null===(i=e.promotion)||void 0===i?void 0:i.Promotion)&&void 0!==n&&n;if(!1===_||!1===g)return null;var v=function(t,n){return(0,o.ex)(t,e.intl,n)},y=null!==(l=null==_?void 0:_.PrizeType)&&void 0!==l?l:{},h=null!==(s=null==_?void 0:_.User)&&void 0!==s?s:{},b=(0,r.useReducer)((function(e,t){switch(t.type){case"NO_PRIZES":return Zi(Zi({},e),{},{status:"no_prize"});case"CHECKING":return Zi(Zi({},e),{},{status:"checking"});case"MAIL_SENT":return Zi(Zi({},e),{},{status:"mail_sent"});case"SET_PRIZES":return Zi(Zi({},e),{},{prizes:t.prizes,status:"prize_list"});case"CLAIM_FORM":return Zi(Zi({},e),{},{prize:t.prize,status:"claim_form"});case"SET_ERRORS":return Zi(Zi({},e),{},{errors:t.errors});case"SET_USER_FORM":var n=Zi(Zi({},e.form),t.user);for(var r in n)""==n[r]&&delete n[r];return Zi(Zi({},e),{},{form:n,is_valid:t.is_valid});case"SET_USER_ERROR":return!1===e.user_errors&&(e.user_errors={}),Zi(Zi({},e),{},{user_errors:Zi(Zi({},e.user_errors),{},Mi({},t.k,t.v))});case"CHANGE_USER":return null!=e.user_errors[t.k]&&delete e.user_errors[t.k],Zi(Zi({},e),{},{user:Zi(Zi({},e.user),{},Mi({},t.k,t.v)),user_errors:Zi({},e.user_errors)});case"TOGGLE_ERRORS":return Zi(Zi({},e),{},{showFormErrors:!e.showFormErrors});case"SHOW_ERRORS":return Zi(Zi({},e),{},{showFormErrors:!0});case"SET_CLAIMED":return Zi(Zi({},e),{},{status:"thanks"});default:return e}}),{status:0!=e.claim&&"0"!=e.claim.PromoClaim.status?"claimed":"landing",prizes:[],prize:e.prize,form:null,user:{first_name:h.first_name,last_name:h.last_name,email:h.email,phone:h.phone},user_errors:!1,showFormErrors:!1,is_valid:!0}),E=Fi(b,2),A=E[0],k=E[1],S=function(e,t){k({type:"SET_USER_FORM",user:e,is_valid:t})},C=function(e,t){k({type:"CHANGE_USER",k:e,v:t})},O=null!=g.toc&&""!=g.toc||null!=g.external_toc_url&&""!=g.external_toc_url,P=null!=g.policy&&""!=g.policy||null!=g.external_policy_url&&""!=g.external_policy_url,x="",j=null!=g.full_claim_image&&""!=g.full_claim_image&&g.full_claim_image,N="<h1><strong>You won a {prize}!</strong></h1><p>".concat(v("Fill in this form to claim your prize."),"</p>");x=e.intl.formatMessage({id:(null==g?void 0:g.claim_description)||N},{prize:y.title});var T=Fi((0,r.useState)(!1),2),B=T[0],I=T[1],z=Fi((0,r.useState)(!1),2),D=z[0],Z=z[1];if("claimed"==A.status)return x="<h1><strong>".concat(v("This prize is already claimed."),"</strong></h1>"),r.createElement(Li,{image:j,description:x});if("thanks"==A.status)return x="<h1><strong>".concat(v("Thank you!"),"</strong></h1><p>").concat(v("We'll get in touch with you as soon as possible."),"</p>"),r.createElement(Li,{image:j,description:x},null!=y.instructions&&""!=y.instructions&&r.createElement("div",{className:" legal_text mod_align_left gui_main_text_color_on_bg gui_leveled_text_small hb_mainFontWeightLight mod_align_param",dangerouslySetInnerHTML:{__html:y.instructions.replace("\n","<br />")}}));var M=!1;if(O){var F,R,L=null;L=null!=g.external_toc_url&&""!=g.external_toc_url?r.createElement(c.Z,{_href:g.external_toc_url,_target:"blank"},"Terms and conditions"):r.createElement(c.Z,{onClick:function(){return I(!B)}},"Terms and conditions");var U=null!==(F=null==g||null===(R=g.custom_labels)||void 0===R?void 0:R.toc_label)&&void 0!==F?F:"";""==U&&(U="I have read and accept the {toc}."),M=r.createElement(a.FormattedMessage,{id:v(U.replace("%s","{toc}")),values:{toc:L}})}var q=!1;if(P){var W,G,V=null;V=null!=g.external_policy_url&&""!=g.external_policy_url?r.createElement(c.Z,{_href:g.external_policy_url,_target:"blank"},"Privacy policy"):r.createElement(c.Z,{onClick:function(){return Z(!D)}},"Privacy policy");var Y=null!==(W=null==g||null===(G=g.custom_labels)||void 0===G?void 0:G.policy_label)&&void 0!==W?W:"";""==Y&&(Y="***I have read and accept the {policy}."),q=r.createElement(a.FormattedMessage,{id:v(Y.replace("%s","{policy}")),values:{policy:V}})}var H="https://".concat(window.domain_url,"/promo_terms/").concat(g.id),Q="https://".concat(window.domain_url,"/policy/").concat(g.id),J=null!=g.claim_button_label&&""!=g.claim_button_label?g.claim_button_label:"Submit";return r.createElement(Li,{description:x,image:j},r.createElement(Lt.Z,{classname:"gui_form_register template_module gui_main_text_color_on_bg",model:A.user,change:C,errors:A.user_errors},r.createElement(Rt.Z,{disabled:!0,name:"first_name",_field_class:"is_2_columned",label_props:{_class:{other:"hb_secondaryFont"},mandatory:!0}},"First name"),r.createElement(Rt.Z,{disabled:!0,name:"last_name",_field_class:"is_2_columned",label_props:{_class:{other:"hb_secondaryFont"},mandatory:!0}},"Last name"),r.createElement(Bi.Z,{disabled:""!=h.email&&null!=h.email,name:"email",label_props:{_class:{other:"hb_secondaryFont"},mandatory:!0}},"Email"),r.createElement(Ii.ZP,{disabled:""!=h.phone,name:"phone",avail_countries:null!==(u=null==e?void 0:e.avail_countries)&&void 0!==u?u:["ca"],label_props:{_class:{other:"hb_secondaryFont"},mandatory:!0}},"Telephone")),g.claim_form&&r.createElement(tr.F3,{public_form:!0,form:JSON.parse(g.claim_form),onChange:S,user:null===(m=e.claim)||void 0===m||null===(d=m.PromoClaim)||void 0===d?void 0:d.claim_data,showFormErrors:A.showFormErrors,loc:e.loc,model_classes:"gui_form_register template_module gui_main_text_color_on_bg"}),null!=y.claim_form&&"[]"!=y.claim_form&&r.createElement(tr.F3,{public_form:!0,form:JSON.parse(y.claim_form),onChange:S,showFormErrors:A.showFormErrors,user:null===(p=e.claim)||void 0===p||null===(f=p.PromoClaim)||void 0===f?void 0:f.claim_data,loc:e.loc,model_classes:"gui_form_register template_module gui_main_text_color_on_bg"}),r.createElement(Lt.Z,{classname:"gui_form_register template_module gui_main_text_color_on_bg",model:A.user,errors:A.user_errors,change:C},O&&r.createElement(Ti.Z,{name:"toc",label_props:{_class:{other:"hb_secondaryFont"}}},M),P&&r.createElement(Ti.Z,{name:"policy",label_props:{_class:{other:"hb_secondaryFont"}}},q)),r.createElement("div",{className:"template_module mod_align_center register_call_to_action_flex is_react_cta"},r.createElement("div",{className:"finalize_form enter flex_button gui_big_button hb_secondaryFont"},r.createElement(bt.Z,{_fullclass:"",onClick:function(e,t){return function(e){var t=!1;if(O&&null==A.user.toc&&(k({type:"SET_USER_ERROR",k:"toc",v:"This field cannot be left empty."}),t=!0),P&&null==A.user.policy&&(k({type:"SET_USER_ERROR",k:"policy",v:"This field cannot be left empty."}),t=!0),["email","first_name","last_name"].map((function(e){""!=A.user[e]&&null!=A.user[e]||(k({type:"SET_USER_ERROR",k:e,v:"This field cannot be left empty."}),t=!0)})),A.is_valid||(t=!0),t)return k({type:"SHOW_ERRORS"}),void(null!=e&&e());var n={claim:JSON.stringify(A.form),user:JSON.stringify(A.user)};$.post(window.location.href,n,(function(t){k({type:"SET_CLAIMED"}),null!=e&&e()}),"JSON")}(t)}},J))),null!=g.disclaimer&&""!=g.disclaimer&&r.createElement("div",{className:" legal_text mod_align_left gui_main_text_color_on_bg gui_leveled_text_small hb_mainFontWeightLight mod_align_param",dangerouslySetInnerHTML:{__html:g.disclaimer.replace("\n","<br />")}}),B&&r.createElement(w.Z,{pm:g,title:v("Terms and conditions"),backButton:function(){return I(!1)}},r.createElement("div",{dangerouslySetInnerHTML:{__html:g.toc.replace(/\n/g,"<br />")}}),r.createElement("ul",{className:"related_link original_color_item"},r.createElement("li",{className:"link hb_secondaryFont"},r.createElement(c.Z,{_href:H,_target:"_blank",_class:{other:"toc_link"},autotranslate:!1},H)))),D&&r.createElement(w.Z,{pm:g,title:v("Privacy policy"),backButton:function(){return Z(!1)}},r.createElement("div",{dangerouslySetInnerHTML:{__html:g.policy.replace(/\n/g,"<br />")}}),r.createElement("ul",{className:"related_link original_color_item"},r.createElement("li",{className:"link hb_secondaryFont"},r.createElement(c.Z,{_href:Q,_target:"_blank",_class:{other:"toc_link"},autotranslate:!1},Q)))))})),qi=function(e){var t,n,i=null!==(t=null==e?void 0:e.image)&&void 0!==t&&t,a=null!==(n=null==e?void 0:e.description)&&void 0!==n&&n;return r.createElement("div",{className:"flex_cols"},!1!==i&&r.createElement("div",{className:"flex_col col_1"},r.createElement("div",{className:"register_media_flex mod_align_param"},r.createElement("img",{src:i,style:{maxWidth:"100%"}}))),r.createElement("div",{className:"flex_col col_2"},r.createElement("div",{className:"mod_align_param register_form_flex",style:{width:"100%"}},!1!==a&&""!=a&&r.createElement(A.Z,{_class:{font_size:"small_p",other:"gui_main_text_color_on_bg"}},a),r.createElement("div",{className:"mod_align_param"},e.children))))},Wi=(0,a.injectIntl)((function(e){var t,n,i,a,l,s,c=null!==(t=null==e?void 0:e.prize)&&void 0!==t&&t,u=null!==(n=null==e||null===(i=e.promotion)||void 0===i?void 0:i.Promotion)&&void 0!==n&&n;if(!1===c||!1===u)return null;var m=null!==(a=null==c?void 0:c.PrizeType)&&void 0!==a?a:{},d=(l=null==c?void 0:c.User,!!(0,o.fc)(null!==(s=null==u?void 0:u.full_claim_image)&&void 0!==s?s:"")&&u.full_claim_image),p="<h1><strong>".concat(m.title,"</strong></h1></p>");return r.createElement(qi,{description:p,image:d},r.createElement("article",{className:"template_submodule mod_align_center call_to_action_flex enter_flexwrap"},r.createElement("div",{className:"enter flex_button gui_big_button hb_secondaryFont register_flex"},r.createElement(bt.Z,{_fullclass:"",icon:"knk-download",onClick:function(e,t){return function(e){window.location.search,$.post(window.location.href,{action:"download"},(function(t){window.location.href=t.url,null!=e&&e()}),"JSON")}(t)}},"Download"))))}));function Gi(e){return Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gi(e)}function Vi(){return Vi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vi.apply(this,arguments)}function Yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yi(Object(n),!0).forEach((function(t){$i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Gi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Gi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Gi(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qi(e){return function(e){if(Array.isArray(e))return Ji(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ji(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ji(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}if((0,a.addLocaleData)([].concat(Qi(hi()),Qi(Ei()))),"0"!==window.server_type){var Ki=console.error;console.error===Ki&&(console.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0!==t[0].indexOf("[React Intl]")&&Ki.call.apply(Ki,[console].concat(t))})}var Xi=start_locales,ea={initQuiz:function(e,t){var n={intl:Xi,questions:{questions:e,pm:t}},r=(0,vi.UY)({questions:_i.Z,intl:gi._8});this.storeQuestions=(0,wi.x)(n,r)},QuizMonitor:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(ni,t))),document.getElementById(e))},SocialLogin:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(X,t))),document.getElementById(e))},RouletteLayer:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(Yn.Z,t))),document.getElementById(e))},InstagramMedia:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(b,t))),document.getElementById(e))},InstagramMediaPicker:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(j,t))),document.getElementById(e))},MyParticipation:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(We,t))),document.getElementById(e))},MyParticipationMultistage:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(vt,t))),document.getElementById(e))},MyParticipationMenuHeader:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(F,t))),document.getElementById(e))},QuizClient:function(e,t,n){null==e&&(e="root");var o=this.storeQuestions;if(t=Hi(Hi({},t),{},{store:o}),null!=n)return r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(Gr.Z,t)));i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(Gr.Z,t))),document.getElementById(e))},PrizesPage:function(e,t,n){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(Vn.Z,Vi({promotion_id:t},n)))),document.getElementById(e))},UserPrizes:function(e,t,n,o){var l={prizes:{prizes:t,visible:n,validation_portal:o}};i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Ne,l)),document.getElementById(e))},SuccessFinalButtons:function(e,t){i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(fi,t)),document.getElementById(e))},QuizGameResult:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Dn,t)),document.getElementById(e))},BracketsCanvas:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Wn.Z,t)),document.getElementById(e))},CssVars:function(e,t){null==e&&(e="root"),i.render(r.createElement(qn,Vi({ref:function(e){window.css_var=e}},t)),document.getElementById(e))},LoginReminder:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Ni.Z,t)),document.getElementById(e))},ScratchCanvas:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Gn.Z,t)),document.getElementById(e))},BracketMosaic:function(e,t){i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(ht.Z,t)),document.getElementById(e))},ClaimPrize:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(ur,t)),document.getElementById(e))},StageMosaic:function(e,t){i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(yt.Z,t)),document.getElementById(e))},PromotionBracketsMosaic:function(e,t){i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(wn.Z,t)),document.getElementById(e))},TestInvite:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(xt,t))),document.getElementById(e))},NotAllowed:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(Ft,t))),document.getElementById(e))},ProtectedPromo:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(Vt,t))),document.getElementById(e))},SweepsCertificate:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(En,t))),document.getElementById(e))},TimeCounterSimple:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(wt.Z,t))),document.getElementById(e))},EntriesRanking:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(Hn.Z,t))),document.getElementById(e))},ClientValidationPortal:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Or,t)),document.getElementById(e))},TeamStage:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(Xn.Z,t))),document.getElementById(e))},Autologin:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(er.Z,t))),document.getElementById(e))},LoginRegister:function(e,t,n){if(null==e&&(e="root"),t=Hi({},t),null!=n)return r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(Pr.Z,t)));i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(Pr.Z,t))),document.getElementById(e))},Participate:function(e,t,n){null==e&&(e="root");var o=this.storeQuestions;if(t=Hi(Hi({},t),{},{store:o}),null!=n)return r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(qr,t)));i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(qr,t))),document.getElementById(e))},ShareParticipation:function(e,t){null==e&&(e="root"),t=void 0===t?{}:t,i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(Wr,t))),document.getElementById(e))},Quiz:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){null==e&&(e="root"),n=void 0===n?{}:n,i.unmountComponentAtNode(document.getElementById(e));var o=this.storeQuestions;n=Hi(Hi({},n),{},{store:o}),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Quiz,Vi({pm:t},n))),document.getElementById(e))})),ClientQuizStats:function(e,t){null==e&&(e="root"),t=void 0===t?{}:t,i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(xn.Z,t))),document.getElementById(e))},CustomTerms:function(e,t){null==e&&(e="root"),t=void 0===t?{}:t,i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement($n.Z,t)),document.getElementById(e))},PromotionLanding:function(e,t){null==e&&(e="root"),t=void 0===t?{}:t,i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Qn.Z,t)),document.getElementById(e))},EntriesMultiGallery:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Jn.Z,t)),document.getElementById(e))},Galleries:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(ji,t)),document.getElementById(e))},UserPhotoEditor:function(e,t,n){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Kn.Z,null,r.createElement(ee.Z,Vi({pm:t},n)))),document.getElementById(e))},LegalText:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Pn,t)),document.getElementById(e))},CookiesAdvise:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(An.Z,t)),document.getElementById(e))},ViewCurrentUsers:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(ye,t)),document.getElementById(e))},ClaimPromoLive:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Ui,t)),document.getElementById(e))},ClaimPrizeAttachment:function(e,t){null==e&&(e="root"),i.render(r.createElement(a.IntlProvider,{locale:start_locales.locale,messages:start_locales.messages},r.createElement(Wi,t)),document.getElementById(e))},CookieTracking:function(e,t){null==e&&(e="root"),i.render(r.createElement(CookieTraking,t),document.getElementById(e))}},ta=ea;n(82866)},24445:function(e,t,n){"use strict";n.d(t,{Af:function(){return b},Ao:function(){return f},Bh:function(){return de},DE:function(){return Y},DO:function(){return B},Fp:function(){return k},Fz:function(){return T},HS:function(){return R},Id:function(){return H},J5:function(){return P},Jw:function(){return ie},KF:function(){return v},KS:function(){return Z},Lo:function(){return M},Nx:function(){return pe},O1:function(){return w},Pu:function(){return u},QA:function(){return N},Qm:function(){return L},R8:function(){return C},S4:function(){return ue},SM:function(){return te},Sy:function(){return ee},T4:function(){return V},TW:function(){return Q},UE:function(){return j},Yz:function(){return K},Zu:function(){return E},_u:function(){return re},ab:function(){return U},ay:function(){return F},c$:function(){return d},ex:function(){return g},f1:function(){return ce},fc:function(){return I},gJ:function(){return J},gi:function(){return se},gq:function(){return W},hR:function(){return A},hr:function(){return z},jq:function(){return O},kp:function(){return le},kr:function(){return m},n_:function(){return X},nn:function(){return y},o1:function(){return p},oH:function(){return G},pN:function(){return ae},pZ:function(){return ne},q4:function(){return oe},q7:function(){return _},r4:function(){return q},sC:function(){return me},tS:function(){return D},uf:function(){return x}});n(82772),n(41539),n(39714),n(74916),n(15306),n(2707),n(21249),n(91058),n(57327),n(82526),n(41817),n(77601),n(47042),n(54678),n(4723),n(92222),n(26699),n(32023),n(69826),n(64765),n(66992),n(78783),n(33948),n(41637),n(26833),n(19601),n(23123),n(73210),n(24603),n(28450),n(88386),n(94986),n(38862),n(40561),n(32165),n(91038),n(96649),n(96078),n(9653),n(69070),n(47941),n(38880),n(54747),n(49337),n(33321),n(75750);var r=n(96486);n(30273);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e){function t(e,t){var n,r,i,a,o;return i=2147483648&e,a=2147483648&t,o=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^o^i^a:n|r?1073741824&o?3221225472^o^i^a:1073741824^o^i^a:o^i^a}function n(e,n,r,i,a,o,l){return e=t(e,t(t(n&r|~n&i,a),l)),t(e<<o|e>>>32-o,n)}function r(e,n,r,i,a,o,l){return e=t(e,t(t(n&i|r&~i,a),l)),t(e<<o|e>>>32-o,n)}function i(e,n,r,i,a,o,l){return e=t(e,t(t(n^r^i,a),l)),t(e<<o|e>>>32-o,n)}function a(e,n,r,i,a,o,l){return e=t(e,t(t(r^(n|~i),a),l)),t(e<<o|e>>>32-o,n)}function o(e){var t,n="",r="";for(t=0;3>=t;t++)n+=(r="0"+(r=e>>>8*t&255).toString(16)).substr(r.length-2,2);return n}var l,s,c,u,m,d,p,f,_;for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):(127<r&&2048>r?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e),l=function(e){for(var t,n=e.length,r=16*(((t=n+8)-t%64)/64+1),i=Array(r-1),a=0,o=0;o<n;)a=o%4*8,i[t=(o-o%4)/4]|=e.charCodeAt(o)<<a,o++;return i[t=(o-o%4)/4]|=128<<o%4*8,i[r-2]=n<<3,i[r-1]=n>>>29,i}(e),d=1732584193,p=4023233417,f=2562383102,_=271733878,e=0;e<l.length;e+=16)s=d,c=p,u=f,m=_,d=n(d,p,f,_,l[e+0],7,3614090360),_=n(_,d,p,f,l[e+1],12,3905402710),f=n(f,_,d,p,l[e+2],17,606105819),p=n(p,f,_,d,l[e+3],22,3250441966),d=n(d,p,f,_,l[e+4],7,4118548399),_=n(_,d,p,f,l[e+5],12,1200080426),f=n(f,_,d,p,l[e+6],17,2821735955),p=n(p,f,_,d,l[e+7],22,4249261313),d=n(d,p,f,_,l[e+8],7,1770035416),_=n(_,d,p,f,l[e+9],12,2336552879),f=n(f,_,d,p,l[e+10],17,4294925233),p=n(p,f,_,d,l[e+11],22,2304563134),d=n(d,p,f,_,l[e+12],7,1804603682),_=n(_,d,p,f,l[e+13],12,4254626195),f=n(f,_,d,p,l[e+14],17,2792965006),d=r(d,p=n(p,f,_,d,l[e+15],22,1236535329),f,_,l[e+1],5,4129170786),_=r(_,d,p,f,l[e+6],9,3225465664),f=r(f,_,d,p,l[e+11],14,643717713),p=r(p,f,_,d,l[e+0],20,3921069994),d=r(d,p,f,_,l[e+5],5,3593408605),_=r(_,d,p,f,l[e+10],9,38016083),f=r(f,_,d,p,l[e+15],14,3634488961),p=r(p,f,_,d,l[e+4],20,3889429448),d=r(d,p,f,_,l[e+9],5,568446438),_=r(_,d,p,f,l[e+14],9,3275163606),f=r(f,_,d,p,l[e+3],14,4107603335),p=r(p,f,_,d,l[e+8],20,1163531501),d=r(d,p,f,_,l[e+13],5,2850285829),_=r(_,d,p,f,l[e+2],9,4243563512),f=r(f,_,d,p,l[e+7],14,1735328473),d=i(d,p=r(p,f,_,d,l[e+12],20,2368359562),f,_,l[e+5],4,4294588738),_=i(_,d,p,f,l[e+8],11,2272392833),f=i(f,_,d,p,l[e+11],16,1839030562),p=i(p,f,_,d,l[e+14],23,4259657740),d=i(d,p,f,_,l[e+1],4,2763975236),_=i(_,d,p,f,l[e+4],11,1272893353),f=i(f,_,d,p,l[e+7],16,4139469664),p=i(p,f,_,d,l[e+10],23,3200236656),d=i(d,p,f,_,l[e+13],4,681279174),_=i(_,d,p,f,l[e+0],11,3936430074),f=i(f,_,d,p,l[e+3],16,3572445317),p=i(p,f,_,d,l[e+6],23,76029189),d=i(d,p,f,_,l[e+9],4,3654602809),_=i(_,d,p,f,l[e+12],11,3873151461),f=i(f,_,d,p,l[e+15],16,530742520),d=a(d,p=i(p,f,_,d,l[e+2],23,3299628645),f,_,l[e+0],6,4096336452),_=a(_,d,p,f,l[e+7],10,1126891415),f=a(f,_,d,p,l[e+14],15,2878612391),p=a(p,f,_,d,l[e+5],21,4237533241),d=a(d,p,f,_,l[e+12],6,1700485571),_=a(_,d,p,f,l[e+3],10,2399980690),f=a(f,_,d,p,l[e+10],15,4293915773),p=a(p,f,_,d,l[e+1],21,2240044497),d=a(d,p,f,_,l[e+8],6,1873313359),_=a(_,d,p,f,l[e+15],10,4264355552),f=a(f,_,d,p,l[e+6],15,2734768916),p=a(p,f,_,d,l[e+13],21,1309151649),d=a(d,p,f,_,l[e+4],6,4149444226),_=a(_,d,p,f,l[e+11],10,3174756917),f=a(f,_,d,p,l[e+2],15,718787259),p=a(p,f,_,d,l[e+9],21,3951481745),d=t(d,s),p=t(p,c),f=t(f,u),_=t(_,m);return(o(d)+o(p)+o(f)+o(_)).toLowerCase()},m=function(e,t){return function(e){var n=t;return e.filter((function(e){return("policy"!=e.attributes.type||null!=n.policy)&&(("landing"!=e.attributes.type||1!=n.config.disable_landing)&&(("register"!=e.attributes.type||1!=n.hide_enter_button)&&(("brackets"!=e.attributes.type||null!=n.brackets_enabled&&"0"!=n.brackets_enabled)&&(("entries"!=e.attributes.type||1==n.public_entries)&&(("galleries"!=e.attributes.type||1==n.galleries_enabled)&&(("toc"!=e.attributes.type||""!=n.toc)&&(("winners"!=e.attributes.type||"1"==n.win_published)&&("share"!=e.attributes.type||null==n.config.share||"1"==n.config.share.status))))))))}))}(e.map((function(e){return e.id,e.cid,e.open=!1,e})).sort((function(e,t){return parseInt(e.attributes.pos)<parseInt(t.attributes.pos)?-1:1})))},d=function(e){var t={};switch(null!=e.type?e.type:"image"){case"video":t.video_url="https://vimeo.com/".concat(e.vimeo_id),null!=e.hash&&(t.hash=e.hash),null!=e.video_thumb?t.video_thumb=e.full_path+e.video_thumb:null!=e.pictures_id&&(t.video_thumb="https://i.vimeocdn.com/video/".concat(e.pictures_id));break;case"youtube":t.video_url="https://www.youtube.com/embed/".concat(e.youtube_id);break;case"cover":t.title=e.title,t.description=e.description;break;default:t.file=e}return t},p=function(e){var t=function(e,t){return Math.pow(e,t)},n=function(e){return function(n){return t(n,e)}},r=function(e){return function(n){return function(e,n){return 1-(n/2==parseInt(n/2)?-1:1)*t(e,n)}(n,e)}},i=function(e){return function(n){return n<.5?function(e,n){return Math.pow(2,n-1)*t(e,n)}(n,e):function(e,n){return 1-(n/2==parseInt(n/2)?-1:1)*Math.pow(2,n-1)*t(e,n)}(n,e)}};switch(e){case"linear":default:return n(1);case"easeInQuad":return n(2);case"easeOutQuad":return r(2);case"easeInOutQuad":return i(2);case"easeInCubic":return n(3);case"easeOutCubic":return r(3);case"easeInOutCubic":return i(3);case"easeInQuart":return n(4);case"easeOutQuart":return r(4);case"easeInOutQuart":return i(4);case"easeInQuint":return n(5);case"easeOutQuint":return r(5);case"easeInOutQuint":return i(5)}},f=function(){var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t="undefined"!=typeof InstallTrigger,n=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&window.safari.pushNotification).toString(),r=!!document.documentMode,i=!r&&!!window.StyleMedia,a=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime);return{firefox:t,chrome:a,safari:n,opera:e,msie:r,edge:i,edgeChromium:a&&-1!=navigator.userAgent.indexOf("Edg"),blink:(a||e)&&!!window.CSS}},_=function(e){var t,n,r,i,a={r:128,g:128,b:128},o=document.createElement("canvas"),l=o.getContext&&o.getContext("2d"),s=-4,c={r:0,g:0,b:0},u=0;if(!l)return a;r=o.height=e.naturalHeight||e.offsetHeight||e.height,n=o.width=e.naturalWidth||e.offsetWidth||e.width,l.drawImage(e,0,0);try{t=l.getImageData(0,0,n,r)}catch(e){return a}for(i=t.data.length;(s+=20)<i;)t.data[s]==t.data[s+1]&&t.data[s]==t.data[s+2]||(++u,c.r+=t.data[s],c.g+=t.data[s+1],c.b+=t.data[s+2]);return c.r=~~(c.r/u),c.g=~~(c.g/u),c.b=~~(c.b/u),c},g=function(e,t,n){if(""==e)return e;if(null==t)return window.server_type,"0"!=window.server_type&&console.error('Intl attribute missing in i18nIntl for label "'.concat(e,'"')),e;var r=t.formatMessage({id:e});switch(null==n&&(n="normal"),n){case"camelcase":for(var i=r.split(" "),a=0;a<i.length;a++)i[a]=i[a][0].toUpperCase()+i[a].substring(1);r=i.join(" ");break;case"lowercase":r=r.toLowerCase();break;case"ucfirst":r=r[0].toUpperCase()+r.substring(1);break;case"uppercase":r=r.toUpperCase()}return(r=""+r).replace("***","")},v=function(e,t,n,r){var i,a,o,l,c,u,m,d=parseInt,p=Math.round,f="string"==typeof n;if("number"!=typeof e||e<-1||e>1||"string"!=typeof t||"r"!=t[0]&&"#"!=t[0]||n&&!f)return null;var _=function(e){var t=e.length,n={};if(t>9){var r;if(r=s(e=e.split(","),4),i=r[0],a=r[1],o=r[2],f=r[3],(t=e.length)<3||t>4)return null;n.r=d("a"==i[3]?i.slice(5):i.slice(4)),n.g=d(a),n.b=d(o),n.a=f?parseFloat(f):-1}else{if(8==t||6==t||t<4)return null;t<6&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+(t>4?e[4]+e[4]:"")),e=d(e.slice(1),16),9==t||5==t?(n.r=e>>24&255,n.g=e>>16&255,n.b=e>>8&255,n.a=p((255&e)/.255)/1e3):(n.r=e>>16,n.g=e>>8&255,n.b=255&e,n.a=-1)}return n};return m=t.length>9,m=f?n.length>9||"c"==n&&!m:m,c=_(t),l=e<0,u=n&&"c"!=n?_(n):l?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},l=1-(e=l?-1*e:e),c&&u?(r?(i=p(l*c.r+e*u.r),a=p(l*c.g+e*u.g),o=p(l*c.b+e*u.b)):(i=p(Math.pow(l*Math.pow(c.r,2)+e*Math.pow(u.r,2),.5)),a=p(Math.pow(l*Math.pow(c.g,2)+e*Math.pow(u.g,2),.5)),o=p(Math.pow(l*Math.pow(c.b,2)+e*Math.pow(u.b,2),.5))),f=c.a,u=u.a,f=(c=f>=0||u>=0)?f<0?u:u<0?f:f*l+u*e:0,m?"rgb"+(c?"a(":"(")+i+","+a+","+o+(c?","+p(1e3*f)/1e3:"")+")":"#"+(4294967296+16777216*i+65536*a+256*o+(c?p(255*f):0)).toString(16).slice(1,c?void 0:-2)):null},y=function(e,t){if(null==t&&(t=!1),null==e)return!1;if(-1!=e.indexOf("#"))return h(e,!1,t);if(-1==e.indexOf("rgb"))return!1;var n=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),r=[n[1],n[2],n[3]];return t&&r.push(null!=n[4]?n[4]:1),r},h=function(e,t,n){null==t&&(t=!1),null==n&&(n=!1),e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r}));var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),i=r?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]:[0,0,0];return n&&i.push(1),t?"rgba(".concat(i.join(", "),")"):i},b=function(e){var t,n,r;return(null==e||null===(t=e.config_styles)||void 0===t||null===(n=t.promotion)||void 0===n||null===(r=n.style)||void 0===r?void 0:r.main_color_bg)||"#2951CC"},E=function(e){var t,n,r;return(null==e||null===(t=e.config_styles)||void 0===t||null===(n=t.promotion)||void 0===n||null===(r=n.style)||void 0===r?void 0:r.secondary_color_bg)||"#000000"},w=function(e,t){e&&(null==t||"manual"!=t?e.sort((function(e,t){return e.Stage.start_date<t.Stage.start_date?-1:1})):e.sort((function(e,t){return e.Stage.pos<t.Stage.pos?-1:1})))},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=1024;if(Math.abs(e)<n)return"".concat(e," B");var r=["KB","MB","GB"],i=-1,a=Math.pow(10,t);do{e/=n,++i}while(Math.round(Math.abs(e)*a)/a>=n&&i<r.length-1);var o=e==parseInt(e)?e:e.toFixed(t);return"".concat(o," ").concat(r[i])},k=function(e,t){return"".concat(x(100*e/t,2),"%")},S=function(e){return e.replace(/\+/g," ")},C=function(e,t){var n,r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=null!=t?"#".concat(t):"";if(""!=a&&(a=a.replace(/##/,"#")),!1===(null!==(n=null===(r=window)||void 0===r?void 0:r.is_remote_db)&&void 0!==n&&n))return"".concat(e).concat(a);var o=window.location.search;if(!new URLSearchParams(o).has("remotedb"))return"".concat(e).concat(a);var l=e.split("?"),s=l.length>1&&l[1],c=[];return!1!==s&&c.push(s),c.push("remotedb"),"".concat(i?window.location.origin:"").concat(l[0],"?").concat(c.join("&")).concat(a)},O=function(e,t,n){if(null==e||""==e)return null;if(null==t&&(t=!0),!t||"string"!=typeof e)return e;var r;return g(e,n,r)},P=function(e,t,n,r){var i=function(e,t){return g(e,r,t)};if(null==e)return"";null==t&&(t=1),null==n&&(n=!1);var a=parseInt(e.num_rounds);if(parseInt(t)>a)return i("Winner","uppercase");var o=e["round_".concat(t)];return""==o||null==o||n?o="".concat(i("Round")," ").concat(t):o},x=function(e,t){null==t&&(t=2),isNaN(e)&&(e=0);var n=t>0?Math.pow(10,t):1;return parseFloat(Math.round(e*n)/n).toFixed(t)},j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""," "],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return null!=e&&(null!=e[t]&&(!(n.length>0&&n.includes(e[t]))&&(!r||!1!==e[t])))},N=function(e){if(!e||"NaN"==e)return"-";if("Infinity"==e)return"&#x221e;";e=e.toString().replace(/\$|\,/g,""),isNaN(e)&&(e="0");var t=e==(e=Math.abs(e)),n=(e=Math.floor(100*e+.50000000001))%100;e=Math.floor(e/100).toString(),n<10&&(n="0"+n);for(var r=0;r<Math.floor((e.length-(1+r))/3);r++)e=e.substring(0,e.length-(4*r+3))+"."+e.substring(e.length-(4*r+3));return n>0?(t?"":"-")+e+","+n:(t?"":"-")+e},T=function(e,t){"function"==typeof adaptWidgetHeight&&null!=window.in_widget&&window.in_widget&&adaptWidgetHeight(e)},B=function(){var e=(new Date).getTime(),t="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}));return"_".concat(t)},I=function(e){var t=!0;return null!=e&&""!=e&&(t=!1,arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&" "==e&&(t=!0)),t},z=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},D=function(e){var t=e.attributes.config.class;if(null==t||""==t)switch(e.attributes.type){case"landing":t="knk-start";break;case"register":t="knk-play";break;case"entries":t="knk-user";break;case"winners":t="knk-winners";break;case"toc":t="knk-toc";break;case"policy":t="knk-zipped";break;case"share":t="knk-share";break;case"networks":t="knk-networks"}return t},Z=function(e,t){null==t&&(t={slices:12,no_prize:6});var n={},r={},i=0;t.slices=parseInt(t.slices),t.no_prize=parseInt(t.no_prize),t.slices<e.length+t.no_prize&&(t.slices=e.length+t.no_prize);var a=e.map((function(e){return o({},e)})),l=Math.ceil(t.slices/e.length);for(var s in a)n[a[s].id]=a[s].qty,i+=parseInt(a[s].qty),r[a[s].id]=a[s];var c=t.slices-t.no_prize,u=c,m=[];for(var s in n)m.push({index:s,prop:parseInt(n[s])/i});m=m.sort((function(e,t){return e.prop>t.prop?1:-1}));var d=0,p=0;for(var s in m){var f=m[s];r[f.index].slices=Math.max(1,Math.floor(c*f.prop)),m.length==c&&(r[f.index].slices=1),r[f.index].slices>l&&(r[f.index].slices=l),u-=r[f.index].slices,p+=r[f.index].slices,++d==a.length&&0!=u&&(r[f.index].slices+=u)}for(;p>t.slices;)for(var s in r)if(1!=r[s].slices&&(r[s].slices--,--p==t.slices))break;var _=0==t.no_prize?t.slices:t.slices/t.no_prize,g={};for(s=0;s<parseInt(t.no_prize);s++)g[Math.floor(_*s)]={id:0};var v=0;for(var s in a)for(var y=(_=Math.round(t.slices/a[s].slices))==t.slices,h=0;h<a[s].slices;h++){var b=2*s+1;for(v=y?(v+t.slices/2)%t.slices:(h*_+b)%t.slices;null!=g[v];)v++,v%=t.slices;g[v]={id:a[s].id}}return Object.values(g)},M=function(e,t,n){return"//storage.googleapis.com/"+e+"/"+(t.slice(-2)+"/")+t+"/"+n+"/"},F=function(e,t,n){null==n&&(n=!1),null==e&&(e="");var r=e.split(" ");switch(null==t&&(t={}),n){case"container":null==t.bg&&(t.bg="main_bg"),null==t.padding&&!1!==t.padding&&(t.padding="big");break;case"range":null==t.thickness&&(t.thickness="thin");break;case"textarea":case"richeditor":case"smarttagsselector":null==t.v_size&&(t.v_size="normal");break;case"matrixselector":null==t.size&&(t.size=30);break;case"tabs":null==t.background||!1!==t.background?t.background="main_bg":!1===t.background&&(t.background="without_bg");break;case"video_play_btn":null==t.button_size&&(t.button_size="normal")}switch(n){case"generic_item":case"buttons":case"container":case"ribbons":break;default:null!=t.size&&null==t.align&&(t.align="row"),null==t.width&&null==t.size&&(t.width=100)}for(var i in t)switch(i){case"align":if("row"===t[i])r.push("gui_sided_input");break;case"button_size":r.push("".concat(t[i],"_button"));break;case"padding":!1!==t[i]&&r.push("gui_is_padded_".concat(t[i]));break;case"type":"small"==t[i]&&r.push("gui_small_input");break;case"thickness":r.push("gui_".concat(t[i],"_slider"));break;case"font_size":!1!==t[i]&&r.push("gui_leveled_text".concat(""!=t[i]?"_".concat(t[i]):""));break;case"font_variant":!1!==t[i]&&r.push("hb_mainFontWeight".concat(t[i]));break;case"width":case"size":null!=t[i]&&!1!==t[i]&&r.push("width_".concat(t[i]));break;case"v_size":switch(t[i]){case"small":r.push("small_textarea");break;case"big":r.push("x_textarea");break;case"huge":r.push("xx_textarea")}break;case"first":case"in_top":r.push(t[i]?"in_top":"not_in_top");break;case"contents":r.push("contains_".concat(t[i]));break;default:!1!==t[i]&&r.push(t[i])}return r.join(" ")},R=function(e){var t=[];return $.each(e,(function(e,n){"string"==typeof n?t.push({k:e,v:n}):t.push(Object.assign({},{key:e},n))})),t},L=function(e){var t=null!=e.name&&""!=e.name&&e.name,n=null!=e.username&&""!=e.username&&e.username,r=null!=e.first_name&&""!=e.first_name&&e.first_name,i=!1;if(t?i=t:n?i=n:r&&(i=r),""==i)return"-";var a,o=function(e){if(e.indexOf("[ ")>-1)return!1;for(var t=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,n=e.split(/([\uD800-\uDBFF][\uDC00-\uDFFF])/),r=0;r<n.length;r++){var i=n[r].trim();if(""!=i)return!!i.match(t)&&i}return!1}(i);return o||(""==(a=i)?"":(a+"").replace(/[\@\_\-\[\]\.\,]/g,"").trim().substring(0,1))},U=function(e){null!=e&&e()},q=function(e){return!!new RegExp("^((https?:)?\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=window.decodeURIComponent(e);n=n.trim().replace(/\s/g,"");var r="http"+(t?"s":"");return/^(:\/\/)/.test(n)?"".concat(r).concat(n):/^(f|ht)tps?:\/\//i.test(n)?n:"".concat(r,"://").concat(n)},G=function(e){if(null==e||null==e)return!1;for(var t=e.toLowerCase(),n="",r=0;r<n.length;r++){var i=n.substr(r,1);t=t.replace(i,"")}return!(!/^(([^<>()[\]\\,;:\s@\"]+(\.[^<>()[\]\\,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||t.length!=e.length)},V=function(e,t,n,r){if(!Array.isArray(t)){if(-1==t.indexOf("."))return null!=n&&(e[t]=n),null!=r&&r?o({},e):e[t];t=t.split(".")}if(!e[t[0]]&&t.length>1&&null!=n&&(e[t[0]]={}),Array.isArray(e[t[0]])&&0==e[t[0]].length&&(e[t[0]]={}),null!=r){var a=o({},e[t[0]]);e[t[0]]=a}else a=e[t[0]];for(var l=1;l<t.length-1;l++)null==a[t[l]]&&(a[t[l]]={}),a[t[l]]=o({},a[t[l]]),a=a[t[l]];if(null==n&&t.length>1&&(null==a||null==a[t[l]]))return"";if(null!=n&&(a[t[t.length-1]]=n,r))return o({},e);return"object"!==i(a)||null==a?a:null!=a[t[t.length-1]]?a[t[t.length-1]]:a},Y=function(e){return"string"==typeof e&&(e="true"==e),e},H=function(e){return Math.PI*e/180},Q=function(e){if(!e)return{};e.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);var t=RegExp.$6;if(RegExp.$3.indexOf("youtu")>-1){var n="youtube",r="https://www.youtube.com/embed/".concat(t),i="https://img.youtube.com/vi/".concat(t,"/hqdefault.jpg"),a="&showinfo=0&controls=0&rel=0",o=e.match(/t=(.*?)s\&?/),l=e.match(/e=(.*)s/);o&&null!=o[1]&&(a+="&start=".concat(o[1])),l&&null!=l[1]&&(a+="&end=".concat(l[1]))}else if(RegExp.$3.indexOf("vimeo")>-1)n="vimeo",r="https://player.vimeo.com/video/".concat(t),i="/img/video_pre-thumb.jpg",a="";return{type:n,video_id:t,url:r,full_url:r,image:i,id:t,platform:n,video_url:r,thumbnail_url:i,url_info:a}},J=function(e,t){return-1!==e.indexOf("var(")&&(e=e.substring(4,e.length-1)),"-"!=e[0]&&(e="--".concat(e)),t&&document.documentElement.style.setProperty(e,t),getComputedStyle(document.documentElement).getPropertyValue(e)},K=function(e){var t=e.length,n=["nQWYCdpnmjOu","5mtStOA87QlP","1820NfUVEY7w","hu8Kx58rWb9P","CJA82pxxf78Q","s1ujgbvSC7bj","SRWScGGKtK3Y","oeRPOEiBBMvg","mYHmFJpNpzFB","PniNpOPInOUD","DZeJCJXIMCfu","17xqv14mgAyn","QOMg1Nblaxi0","tYpo7fY8GRQU","U0QfKsg0ytXs","TVQeDwIPF4A4","Q9wRjjxHjDa2","QvcTAzzIMbqr","T7OQUuYC1RCW","7NlLHQ4IMBDN","avg6yx3GOLiS","mgECm2BAwA1a","Q6ixe2Zj7YsA","eTi919jLSKNr","MqJ0mTYKsE7k","IdNO0d1M03qL","hMsJgLKehHtX","eFxWIBSX2CoI","FM38i6OGkSbA","fbJc0LoCr2Dt","jpbMMK36yH0q","JJzOWBJUMaoq","npn1okaWnhYo","eYOOXHeZfSEx","5tgy60UusFId","10rtmI8YLDWF","xZDpXfcgxxjo","ICy0mixb5qGK","9xV8NfmPksAu","eY3ZKfYvDrqR","AA8x3VbJLJyW","GGyb2y8LNVzM","BMyKA97kuUxj","iXmfkLTA4KJA","hg8R3t20Qiwy","4whcD1Y2C8AC","9HFoAZda4sBF","JDjWgWEiAXIA","p0D1kHRzhFqr","URksscyslOLf","mVO6aL7Dy450","MmTnPhbv9GHL","azCOem5msLMl","OV4LiGjQWBiH","LzJxvMi4UAI9","iNYCw1a7Oe8h","HmIGkPdyasHo","I0lr74fvpCh9","ewfqKaUN2W18","yHhroJddOf2R","FBsJjwNWfKC3","HGPoFHVhSugt","SFjhRH3LmTSC","86k1AOc8gt7S","Gr8aoKzTmfIV","1I8miP8MZLtR","bUyaGOtCDyJC","exyCxTUrYCuf","3E8HjRn5xvMS","0ckaVKO5dR4g","cg8LHMlktBos","mBXpZ80k1dTY","ftn52GR8ZrCN","NJltA6t4idYq","MCgup1BGWmXz","GvIIsZgvegxv","oAVD6FyVrWWp","Sy7wxMN1bWQm","MysObAABmAp3","c9wZB9q0tYWt","qqbo17iFFY8t","BTf3Lz8JxnYb","nt4MmPrulLwX","CD6aUD9u8sBX","FS2iDDQIK8Wb","m1zwSTKsBB7h","aaxlUoh50IRq","u8iIp0q9qv38","TLYYcVvQ4Kjh","OgbzQOR0QCLh","4YmBMSV9NFBM","vz6ewMOivzEp","O8quwmtvCw3L","nKJlraehLkDr","GkDS0SNZNaQP","jLNF5RadEjWW","qPN5HkhAx7MQ","cVUM5PFGLnCJ","JTt5JVkWKzQ2","iIH89P4nw6mr"],i=(0,r.random)(0,(0,r.size)(n)-1),a=(0,r.random)(0,t-1);return[(0,r.size)(i.toString()),i,e.slice(0,a),n[i],e.slice(a)].join("")},X=function(e){var t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var n,r,i,a,o,l,s,c="",u=0;for(e=t._utf8_encode(e);u<e.length;)a=(n=e.charCodeAt(u++))>>2,o=(3&n)<<4|(r=e.charCodeAt(u++))>>4,l=(15&r)<<2|(i=e.charCodeAt(u++))>>6,s=63&i,isNaN(r)?l=s=64:isNaN(i)&&(s=64),c=c+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(l)+this._keyStr.charAt(s);return c},decode:function(e){var n,r,i,a,o,l,s="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)n=this._keyStr.indexOf(e.charAt(c++))<<2|(a=this._keyStr.indexOf(e.charAt(c++)))>>4,r=(15&a)<<4|(o=this._keyStr.indexOf(e.charAt(c++)))>>2,i=(3&o)<<6|(l=this._keyStr.indexOf(e.charAt(c++))),s+=String.fromCharCode(n),64!=o&&(s+=String.fromCharCode(r)),64!=l&&(s+=String.fromCharCode(i));return s=t._utf8_decode(s)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode:function(e){for(var t="",n=0,r=c1=c2=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return t}},n=JSON.stringify(e);return t.encode(n)},ee=function(e){var t,n,r;for(r=e.length-1;r>0;r--)t=Math.floor(Math.random()*(r+1)),n=e[r],e[r]=e[t],e[t]=n;return e},te=function(e,t){var n=360/t,r=e;return{width:Math.floor(2*e*Math.cos(Math.PI*(90-n/2)/180))+10,height:r,angle:n}},ne=function(e){if(!document.getElementById(e)){var t=document.createElement("link");t.id=e,t.href="".concat(window.cdn_url,"css/").concat(e,"?v=").concat(window.cdn_version),t.rel="stylesheet",document.head.appendChild(t)}},re=function(e){var t=0,n=0,r=0;return e.map((function(e,i){null!=e.image&&""!=e.image&&t++,null!=e.background&&""!=e.background&&n++,null!=e.color&&""!=e.color&&r++})),{images:t,bg_images:n,bg_color:r}},ie=function(e,t,n){var r={},a=function(e){return e.sort((function(e,t){return e.id>t.id?-1:e.id<t.id?1:0}))}(e),o=t,l=1;return a.map((function(e,n){var a=e.BracketMatch,s=t-o+1,c="object"==i(a.candidateA)?a.candidateA.id:a.candidateA,u="object"==i(a.candidateB)?a.candidateB.id:a.candidateB;r["".concat(s,"_").concat(c,"_").concat(u)]={round:t-o+1,votes:[a.votesA,a.votesB],score:[a.scoreA,a.scoreB],teams:[c,u],winner:a.winner,id:a.id},l>Math.pow(2,o-1)-1?(o--,l=1):l++})),r},ae=function(e,t){var n=e,r=3600,i=86400,a=604800,o=18144e3,l=217728e3,s=Math.max(0,Math.floor(n/l));n%=l;var c=Math.max(0,Math.floor(n/o));n%=o;var u=Math.max(0,Math.floor(n/a));n%=a;var m=Math.max(0,Math.floor(n/i));n%=i;var d=Math.max(0,Math.floor(n/r));n%=r;var p=Math.max(0,Math.floor(n/60));function f(e,n){return e<1?"":" ".concat(e," ").concat(t(e<2?n:"".concat(n,"s")))}return n%=60,f(s,"year")+f(c,"month")+f(u,"week")+f(m,"day")+f(d,"hour")+f(p,"minute")+f(n,"second")},oe=function(e){var t=o({},e);return t.label=e.children,t.children=null,t.style=null,t.zoomable=null,t},le=function(e,t){var n,r;switch(null==t&&(t={}),e){case"main":null!=t.mainfont&&(n=S(t.mainfont)),null!=t.mainfontWeightRoman&&(r=t.mainfontWeightRoman);break;case"secondary":default:null!=t.secondaryfont&&(n=S(t.secondaryfont)),null!=t.secondaryfontWeightRoman&&(r=t.secondaryfontWeightRoman);break;case"generic":n=S("Arial"),r="500"}return{typography:n,typography_weight:r}},se=function(e,t){var n=new window.Image;return n.crossOrigin="Anonymous",n.src=e,n.onload=t,n},ce=function(e,t){var n=Math.abs(t().diff(e)/36e5),r=36e5*(n-Math.floor(n));return t.duration(r).humanize()},ue=function(e){if(null==e||""==e||" "==e)return!1;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){if(["'","!","","@","#","$","","","","%","&","*","(",")","-","_","+","=","{","}","[","]",";",":","<",">",",",".","",";","/","?","","",""].indexOf(e)>-1)return!0}return/^([a-zA-Z0-9\u00C0-\u00FF]+)$/.test(e)||/^[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]$/.test(e)},me=function(e){return!!/[\u0591-\u07FF]/.test(e)},de=function(e){var t=e.slice();if(t.length<2)return t;var n,r,i,a=[],o=!1;for(r=0,i=t.length-1;r<i;r++){if(2==t.length&&!o){a=a.concat(t.reverse().splice(0,2));break}var l=100;do{n=Math.random()*t.length|0,l--}while((e.indexOf(t[n])==a.length||t[n]==e[a.length])&&l>0);a.push(t.splice(n,1)[0]),o=o||n==t.length}return t.length&&a.push(t[0]),a},pe=function(e){return 1==e||"true"==e}},21867:function(e,t,n){"use strict";n.d(t,{AZ:function(){return c},Vn:function(){return o},g3:function(){return d},ib:function(){return l},l6:function(){return u},lJ:function(){return m},lP:function(){return a},p9:function(){return s},xb:function(){return i}});n(91058),n(66992),n(41539),n(33948),n(24603),n(28450),n(74916),n(88386),n(39714),n(77601);var r=n(24445),i=function(e,t){var n=0,r=0,i=!1,a={};if(null!=t&&1==t){for(var o in e.Answer)a[e.Answer[o].correct]=e.Answer[o].correct;return a}if(e.Question.pointsxanswer)for(var l in e.Answer){"closed_text"!=e.Answer[l].config.type&&(i=!0);var s=null==e.Answer[l].correct?0:parseInt(e.Answer[l].correct);n+=Math.max(s,0),r=s>r?s:r}else n=1;return!e.Question.multianswer&&!i&&r>0?r:n},a=function(e){var t=0,n=0,r=!1;for(var i in e.Answer){"closed_text"!=e.Answer[i].config.type&&(r=!0);var a=null==e.Answer[i].correct?0:parseInt(e.Answer[i].correct);t+=Math.max(a,0),n=a>n?a:n}return!e.Question.multianswer&&!r&&n>0?n:t},o=function(e){var t=0;for(var n in e)t+=i(e[n]);return t},l=function(e,t){var n={status:!0,empty:[],notvalid:[]};for(var r in e.Answer){var i=e.Answer[r],a=null==t||null==t[e.Question.id]||null==t[e.Question.id][i.id]||""==t[e.Question.id][i.id];if("rating"==i.config.type){if(null==t){n.status=!1,n.empty.push(i.id);continue}null==t[e.Question.id]&&(n.status=!1,n.empty.push(i.id))}if("list"==i.config.type&&"list"==i.config.list_type&&a&&(n.status=!1,n.empty.push(i.id)),"list"==i.config.type&&"autocomplete"==i.config.list_type)if(a)n.status=!1,n.empty.push(i.id);else{var o=!1;for(var l in i.config.values){if(new RegExp("^"+t[e.Question.id][i.id]+"$","gi").test(i.config.values[l])){o=!0;break}}o||(n.status=!1,n.notvalid.push(i.id))}if("open_text"==i.config.type)if(null!=i.config.optional&&0!=i.config.optional||a&&(n.status=!1,n.empty.push(i.id)),!a&&"regexp"==i.config.validation)new RegExp(i.config.regexp,"gi").test(t[e.Question.id][i.id])||(n.status=!1,n.notvalid.push(i.id))}return n},s=function(e,t,n){var r=0,i={};for(var a in e){var o=d(e[a],t,void 0,n);if("majority"==n)for(var l in o)null==i[l]?i[l]=o[l]:i[l]+=o[l];else r+=o}return"majority"==n?i:r},c=function(e){var t,n=0;for(var r in e)e[r]>n&&(n=e[r],t=r);return t},u=function(e){return 0!=e.length},m=function(e,t,n){var i=t[e.question_id][e.id],a=parseInt(e.correct),o=e.config.correct_values;if(null==o||Array.isArray(o)||(o=o.split("\n")),null!=n&&n.multiorder){for(var l in o)if(o[l]==i)return a;return 0}if("closed_text"==e.config.type)return a;if("rating"==e.config.type&&e.config.scorepoints)return i;if("regexp"==e.config.correct_validation&&new RegExp(e.config.correct_regexp,"gi").test(i))return a;for(var l in o){if(new RegExp("^"+(0,r.hr)(o[l])+"$","gi").test(i))return a}return 0},d=function(e,t,n,r){var i=0,o={};for(var l in e.Answer)for(var s in t[e.Question.id])if(s==e.Answer[l].id)if(e.Question.multiorder){var c=t[e.Question.id][s],u=e.Answer[l].config.correct_values,d=parseInt(e.Answer[l].correct);for(var p in u)if(u[p]==c){i+=d;break}}else{var f=m(e.Answer[l],t);if("majority"==r){var _=(""+f).split("");for(var g in _)0!=_[g]&&(null==o[_[g]]&&(o[_[g]]=0),o[_[g]]++)}i+=f}if("majority"==r)return o;if(null==n&&(0==e.Question.pointsxanswer||"0"==e.Question.pointsxanswer)){var v=null!=e.Question.config.question_points&&""!=e.Question.config.question_points?parseInt(e.Question.config.question_points):1,y=a(e);return i<y||0==y?0:v}return i}},14583:function(e,t,n){"use strict";var r=n(87537),i=n.n(r),a=n(23645),o=n.n(a)()(i());o.push([e.id,":root{--certificate-max-width:1024px}.new_winners_certificate{--main-color:var(--ep-brand-color);position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.new_winners_certificate a{--main-color:var(--ep-orange-color);border-bottom:1px solid;text-decoration:none!important}@media screen and (max-width:45em){.new_winners_certificate{font-size:0.9em}}.c_header{background-color:rgba(var(--main-color),1);color:rgba(var(--ep-white-color),1);position:relative}.c_header .header_contents{padding:2em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;font-size:1.5em;line-height:1.2em;margin:0 auto;text-align:center}@media screen and (min-width:45em){.c_header .header_contents{-webkit-padding-start:clamp(15vw,15em,20vw);padding-inline-start:clamp(15vw,15em,20vw);-webkit-padding-end:clamp(15vw,15em,20vw);padding-inline-end:clamp(15vw,15em,20vw)}}@media (hover:hover){.c_header .circle_inner,.c_header .circle_outter,.c_header .logo{-webkit-transform-origin:50% 50% 0;transform-origin:50% 50% 0;-webkit-transform:scale(0.9) rotate(0deg);transform:scale(0.9) rotate(0deg)}.c_header .tick_bg{-webkit-transform-origin:50% 85% 0;transform-origin:50% 85% 0;-webkit-transform:scale(0) rotate(-35deg);transform:scale(0) rotate(-35deg);-webkit-transition:opacity 0.2s,-webkit-transform 0.25s;transition:opacity 0.2s,-webkit-transform 0.25s;transition:transform 0.25s,opacity 0.2s;transition:transform 0.25s,opacity 0.2s,-webkit-transform 0.25s}.c_header .logo{-webkit-transition:-webkit-transform 0.3s;transition:-webkit-transform 0.3s;transition:transform 0.3s;transition:transform 0.3s,-webkit-transform 0.3s}.c_header .circle_outter{-webkit-transition:-webkit-transform 0.2s;transition:-webkit-transform 0.2s;transition:transform 0.2s;transition:transform 0.2s,-webkit-transform 0.2s}.c_header .circle_inner{-webkit-transition:-webkit-transform 0.4s;transition:-webkit-transform 0.4s;transition:transform 0.4s;transition:transform 0.4s,-webkit-transform 0.4s}.c_header:hover .ep_verified_logo{opacity:1}.c_header:hover .logo{-webkit-transform:scale(1) rotate(-5deg);transform:scale(1) rotate(-5deg)}.c_header:hover .tick_bg{-webkit-transform:scale(1) rotate(-3deg);transform:scale(1) rotate(-3deg);opacity:1}.c_header:hover .circle_inner,.c_header:hover .circle_outter{-webkit-transform:scale(1);transform:scale(1)}}.c_header h1{font-size:clamp(15pt,2.4em,5.4vw);line-height:1.2em;-webkit-margin-after:var(--grid-1);margin-block-end:var(--grid-1);font-weight:var(--light-font);text-transform:uppercase}.c_header a{display:inline-block;-webkit-transition:color 0.2s;transition:color 0.2s}@media (hover:hover){.c_header a:hover{color:rgba(var(--ep-white-color),1)}}.c_body{color:rgba(var(--main-text-color),1);max-width:var(--certificate-max-width);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:0 auto;font-size:1.5em;line-height:var(--line-height)}@media screen and (min-width:45em){.c_body{padding:2em}}.c_info{display:grid;padding:1em;grid-gap:2em}@media screen and (min-width:45em){.c_info{padding:0;grid-gap:2.5em;grid-template-columns:repeat(2,1fr)}}.c_info dt{white-space:nowrap;color:rgba(var(--main-color),1);border-bottom:1px solid rgba(var(--main-text-color),0.2);-webkit-margin-after:0.2em;margin-block-end:0.2em}.c_info .main_info,.c_info .sweeps_selector{grid-column:1/-1}.sweeps_selector .react_field>.input.select .this_select:before{right:0.5em!important;top:0.55em!important}.winners_list{display:grid;-webkit-column-gap:2em;-moz-column-gap:2em;column-gap:2em;row-gap:0.5em}.winners_list>*{display:-webkit-box;display:-ms-flexbox;display:flex}.winners_list .prize_number{font-size:0.7em;opacity:0.3;-webkit-margin-end:0.5em;margin-inline-end:0.5em;-webkit-margin-before:0.08em;margin-block-start:0.08em}.winners_list .user{width:100%;position:relative;min-height:1.2em}@media screen and (min-width:45em){.long_list{grid-column:1/-1}.long_list .winners_list{grid-template-columns:repeat(3,1fr)}}.c_notes{-webkit-margin-before:var(--grid-1);margin-block-start:var(--grid-1)}.c_footer{padding:1em 2em;font-size:1.1em;line-height:1.2em;color:rgba(var(--ep-white-color),1);background-color:rgba(var(--ep-black-color),1);text-align:center}.c_footer>a{color:rgba(var(--ep-white-color),1)}.replacements_log{-webkit-margin-before:var(--grid-big);margin-block-start:var(--grid-big);padding:1em}.replacements_log .title:before{-webkit-margin-end:0;margin-inline-end:0;top:calc(-1 * var(--grid-2));left:-3px}.replacements_log>li{-webkit-padding-before:var(--grid-1);padding-block-start:var(--grid-1);-webkit-margin-before:var(--grid-1);margin-block-start:var(--grid-1);font-size:9pt;line-height:10pt;border-top:1px solid rgba(var(--ep-black-color),0.2)}.replacements_log>li:first-child{-webkit-padding-before:0;padding-block-start:0;-webkit-margin-before:0;margin-block-start:0;border-top:none}.ep_verified_logo{-webkit-margin-after:1em;margin-block-end:1em;opacity:0.75;-webkit-transition:opacity 0.2s;transition:opacity 0.2s}.ep_verified_logo>svg{width:clamp(180px,30vw,13em)}.ep_verified_logo .st0{fill:rgba(var(--main-color),1)}.ep_verified_logo .st1{opacity:0.6;fill:none;stroke:rgba(var(--ep-white-color),1);stroke-width:8;stroke-miterlimit:10}.ep_verified_logo .st2{opacity:0.4;fill:none;stroke:rgba(var(--ep-white-color),1);stroke-width:4;stroke-miterlimit:10}.ep_verified_logo .st3{fill:none;stroke:rgba(var(--main-color),1);stroke-width:30;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.ep_verified_logo .st4{opacity:0.9}.ep_verified_logo .st5{fill:rgba(var(--ep-white-color),1)}.ep_verified_logo .st6{opacity:0.6}.ep_verified_logo .st7{opacity:0.5;fill:rgba(var(--ep-white-color),1)}.ep_verified_logo .st8{opacity:0.9;fill:none;stroke:rgba(var(--ep-orange-color),1);stroke-width:12;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.sided_circles{position:absolute;height:90%;overflow:hidden}@media screen and (max-width:45em){.sided_circles{display:none}}.sided_circles svg{height:100%}.sided_circles.reversed{bottom:0;right:0;-webkit-transform:scale(-1,-1);transform:scale(-1,-1)}.sided_circles:not(.reversed){top:0;left:0}.sided_circles .animated{-webkit-transform-origin:0 0 0;transform-origin:0 0 0;-webkit-transform:rotate(20deg);transform:rotate(20deg)}.sided_circles .animated.color_circles{-webkit-animation:translateOrbit 68s linear 0s infinite forwards;animation:translateOrbit 68s linear 0s infinite forwards}.sided_circles .animated.white_circles{-webkit-animation:translateOrbit 58s linear 0s infinite forwards;animation:translateOrbit 58s linear 0s infinite forwards}.sided_circles .st0,.sided_circles .st1{stroke:rgba(var(--main-color),1);stroke-width:0.3em}.sided_circles .st0{fill:rgba(var(--ep-orange-color),1)}.sided_circles .st1{fill:rgba(var(--ep-white-color),1)}@-webkit-keyframes translateOrbit{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes translateOrbit{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}","",{version:3,sources:["webpack://./webroot/css/comp/certificate.css"],names:[],mappings:"AAAA,MAAM,8BAA8B,CAAC,yBAAyB,kCAAkC,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,mBAAmB,CAAC,YAAY,CAAC,2BAA2B,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,qBAAqB,CAAC,uBAAuB,CAAC,oBAAoB,CAAC,sBAAsB,CAAC,2BAA2B,mCAAmC,CAAC,uBAAuB,CAAC,8BAA8B,CAAC,mCAAmC,yBAAyB,eAAe,CAAC,CAAC,UAAU,0CAA0C,CAAC,mCAAmC,CAAC,iBAAiB,CAAC,2BAA2B,WAAW,CAAC,mBAAmB,CAAC,mBAAmB,CAAC,YAAY,CAAC,uBAAuB,CAAC,oBAAoB,CAAC,sBAAsB,CAAC,wBAAwB,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,2BAA2B,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,qBAAqB,CAAC,eAAe,CAAC,iBAAiB,CAAC,aAAa,CAAC,iBAAiB,CAAC,mCAAmC,2BAA2B,2CAA2C,CAAC,0CAA0C,CAAC,yCAAyC,CAAC,wCAAwC,CAAC,CAAC,qBAAqB,iEAAiE,kCAAkC,CAAC,0BAA0B,CAAC,yCAAyC,CAAC,iCAAiC,CAAC,mBAAmB,kCAAkC,CAAC,0BAA0B,CAAC,yCAAyC,CAAC,iCAAiC,CAAC,uDAAuD,CAAC,+CAA+C,CAAC,uCAAuC,CAAC,+DAA+D,CAAC,gBAAgB,yCAAyC,CAAC,iCAAiC,CAAC,yBAAyB,CAAC,gDAAgD,CAAC,yBAAyB,yCAAyC,CAAC,iCAAiC,CAAC,yBAAyB,CAAC,gDAAgD,CAAC,wBAAwB,yCAAyC,CAAC,iCAAiC,CAAC,yBAAyB,CAAC,gDAAgD,CAAC,kCAAkC,SAAS,CAAC,sBAAsB,wCAAwC,CAAC,gCAAgC,CAAC,yBAAyB,wCAAwC,CAAC,gCAAgC,CAAC,SAAS,CAAC,6DAA6D,0BAA0B,CAAC,kBAAkB,CAAC,CAAC,aAAa,iCAAiC,CAAC,iBAAiB,CAAC,kCAAkC,CAAC,8BAA8B,CAAC,6BAA6B,CAAC,wBAAwB,CAAC,YAAY,oBAAoB,CAAC,6BAA6B,CAAC,qBAAqB,CAAC,qBAAqB,kBAAkB,mCAAmC,CAAC,CAAC,QAAQ,oCAAoC,CAAC,sCAAsC,CAAC,mBAAmB,CAAC,mBAAmB,CAAC,YAAY,CAAC,2BAA2B,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,qBAAqB,CAAC,aAAa,CAAC,eAAe,CAAC,8BAA8B,CAAC,mCAAmC,QAAQ,WAAW,CAAC,CAAC,QAAQ,YAAY,CAAC,WAAW,CAAC,YAAY,CAAC,mCAAmC,QAAQ,SAAS,CAAC,cAAc,CAAC,mCAAmC,CAAC,CAAC,WAAW,kBAAkB,CAAC,+BAA+B,CAAC,wDAAwD,CAAC,0BAA0B,CAAC,sBAAsB,CAAC,4CAA4C,gBAAgB,CAAC,gEAAgE,qBAAqB,CAAC,oBAAoB,CAAC,cAAc,YAAY,CAAC,sBAAsB,CAAC,mBAAmB,CAAC,cAAc,CAAC,aAAa,CAAC,gBAAgB,mBAAmB,CAAC,mBAAmB,CAAC,YAAY,CAAC,4BAA4B,eAAe,CAAC,WAAW,CAAC,wBAAwB,CAAC,uBAAuB,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,oBAAoB,UAAU,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,mCAAmC,WAAW,gBAAgB,CAAC,yBAAyB,mCAAmC,CAAC,CAAC,SAAS,mCAAmC,CAAC,gCAAgC,CAAC,UAAU,eAAe,CAAC,eAAe,CAAC,iBAAiB,CAAC,mCAAmC,CAAC,8CAA8C,CAAC,iBAAiB,CAAC,YAAY,mCAAmC,CAAC,kBAAkB,qCAAqC,CAAC,kCAAkC,CAAC,WAAW,CAAC,gCAAgC,oBAAoB,CAAC,mBAAmB,CAAC,4BAA4B,CAAC,SAAS,CAAC,qBAAqB,oCAAoC,CAAC,iCAAiC,CAAC,mCAAmC,CAAC,gCAAgC,CAAC,aAAa,CAAC,gBAAgB,CAAC,oDAAoD,CAAC,iCAAiC,wBAAwB,CAAC,qBAAqB,CAAC,uBAAuB,CAAC,oBAAoB,CAAC,eAAe,CAAC,kBAAkB,wBAAwB,CAAC,oBAAoB,CAAC,YAAY,CAAC,+BAA+B,CAAC,uBAAuB,CAAC,sBAAsB,4BAA4B,CAAC,uBAAuB,8BAA8B,CAAC,uBAAuB,WAAW,CAAC,SAAS,CAAC,oCAAoC,CAAC,cAAc,CAAC,oBAAoB,CAAC,uBAAuB,WAAW,CAAC,SAAS,CAAC,oCAAoC,CAAC,cAAc,CAAC,oBAAoB,CAAC,uBAAuB,SAAS,CAAC,gCAAgC,CAAC,eAAe,CAAC,oBAAoB,CAAC,qBAAqB,CAAC,oBAAoB,CAAC,uBAAuB,WAAW,CAAC,uBAAuB,kCAAkC,CAAC,uBAAuB,WAAW,CAAC,uBAAuB,WAAW,CAAC,kCAAkC,CAAC,uBAAuB,WAAW,CAAC,SAAS,CAAC,qCAAqC,CAAC,eAAe,CAAC,oBAAoB,CAAC,qBAAqB,CAAC,oBAAoB,CAAC,eAAe,iBAAiB,CAAC,UAAU,CAAC,eAAe,CAAC,mCAAmC,eAAe,YAAY,CAAC,CAAC,mBAAmB,WAAW,CAAC,wBAAwB,QAAQ,CAAC,OAAO,CAAC,8BAA8B,CAAC,sBAAsB,CAAC,8BAA8B,KAAK,CAAC,MAAM,CAAC,yBAAyB,8BAA8B,CAAC,sBAAsB,CAAC,+BAA+B,CAAC,uBAAuB,CAAC,uCAAuC,gEAAgE,CAAC,wDAAwD,CAAC,uCAAuC,gEAAgE,CAAC,wDAAwD,CAAC,wCAAwC,gCAAgC,CAAC,kBAAkB,CAAC,oBAAoB,mCAAmC,CAAC,oBAAoB,kCAAkC,CAAC,kCAAkC,GAAG,8BAA8B,CAAC,sBAAsB,CAAC,IAAI,gCAAgC,CAAC,wBAAwB,CAAC,GAAG,gCAAgC,CAAC,wBAAwB,CAAC,CAAC,0BAA0B,GAAG,8BAA8B,CAAC,sBAAsB,CAAC,IAAI,gCAAgC,CAAC,wBAAwB,CAAC,GAAG,gCAAgC,CAAC,wBAAwB,CAAC",sourcesContent:[":root{--certificate-max-width:1024px}.new_winners_certificate{--main-color:var(--ep-brand-color);position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.new_winners_certificate a{--main-color:var(--ep-orange-color);border-bottom:1px solid;text-decoration:none!important}@media screen and (max-width:45em){.new_winners_certificate{font-size:0.9em}}.c_header{background-color:rgba(var(--main-color),1);color:rgba(var(--ep-white-color),1);position:relative}.c_header .header_contents{padding:2em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;font-size:1.5em;line-height:1.2em;margin:0 auto;text-align:center}@media screen and (min-width:45em){.c_header .header_contents{-webkit-padding-start:clamp(15vw,15em,20vw);padding-inline-start:clamp(15vw,15em,20vw);-webkit-padding-end:clamp(15vw,15em,20vw);padding-inline-end:clamp(15vw,15em,20vw)}}@media (hover:hover){.c_header .circle_inner,.c_header .circle_outter,.c_header .logo{-webkit-transform-origin:50% 50% 0;transform-origin:50% 50% 0;-webkit-transform:scale(0.9) rotate(0deg);transform:scale(0.9) rotate(0deg)}.c_header .tick_bg{-webkit-transform-origin:50% 85% 0;transform-origin:50% 85% 0;-webkit-transform:scale(0) rotate(-35deg);transform:scale(0) rotate(-35deg);-webkit-transition:opacity 0.2s,-webkit-transform 0.25s;transition:opacity 0.2s,-webkit-transform 0.25s;transition:transform 0.25s,opacity 0.2s;transition:transform 0.25s,opacity 0.2s,-webkit-transform 0.25s}.c_header .logo{-webkit-transition:-webkit-transform 0.3s;transition:-webkit-transform 0.3s;transition:transform 0.3s;transition:transform 0.3s,-webkit-transform 0.3s}.c_header .circle_outter{-webkit-transition:-webkit-transform 0.2s;transition:-webkit-transform 0.2s;transition:transform 0.2s;transition:transform 0.2s,-webkit-transform 0.2s}.c_header .circle_inner{-webkit-transition:-webkit-transform 0.4s;transition:-webkit-transform 0.4s;transition:transform 0.4s;transition:transform 0.4s,-webkit-transform 0.4s}.c_header:hover .ep_verified_logo{opacity:1}.c_header:hover .logo{-webkit-transform:scale(1) rotate(-5deg);transform:scale(1) rotate(-5deg)}.c_header:hover .tick_bg{-webkit-transform:scale(1) rotate(-3deg);transform:scale(1) rotate(-3deg);opacity:1}.c_header:hover .circle_inner,.c_header:hover .circle_outter{-webkit-transform:scale(1);transform:scale(1)}}.c_header h1{font-size:clamp(15pt,2.4em,5.4vw);line-height:1.2em;-webkit-margin-after:var(--grid-1);margin-block-end:var(--grid-1);font-weight:var(--light-font);text-transform:uppercase}.c_header a{display:inline-block;-webkit-transition:color 0.2s;transition:color 0.2s}@media (hover:hover){.c_header a:hover{color:rgba(var(--ep-white-color),1)}}.c_body{color:rgba(var(--main-text-color),1);max-width:var(--certificate-max-width);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:0 auto;font-size:1.5em;line-height:var(--line-height)}@media screen and (min-width:45em){.c_body{padding:2em}}.c_info{display:grid;padding:1em;grid-gap:2em}@media screen and (min-width:45em){.c_info{padding:0;grid-gap:2.5em;grid-template-columns:repeat(2,1fr)}}.c_info dt{white-space:nowrap;color:rgba(var(--main-color),1);border-bottom:1px solid rgba(var(--main-text-color),0.2);-webkit-margin-after:0.2em;margin-block-end:0.2em}.c_info .main_info,.c_info .sweeps_selector{grid-column:1/-1}.sweeps_selector .react_field>.input.select .this_select:before{right:0.5em!important;top:0.55em!important}.winners_list{display:grid;-webkit-column-gap:2em;-moz-column-gap:2em;column-gap:2em;row-gap:0.5em}.winners_list>*{display:-webkit-box;display:-ms-flexbox;display:flex}.winners_list .prize_number{font-size:0.7em;opacity:0.3;-webkit-margin-end:0.5em;margin-inline-end:0.5em;-webkit-margin-before:0.08em;margin-block-start:0.08em}.winners_list .user{width:100%;position:relative;min-height:1.2em}@media screen and (min-width:45em){.long_list{grid-column:1/-1}.long_list .winners_list{grid-template-columns:repeat(3,1fr)}}.c_notes{-webkit-margin-before:var(--grid-1);margin-block-start:var(--grid-1)}.c_footer{padding:1em 2em;font-size:1.1em;line-height:1.2em;color:rgba(var(--ep-white-color),1);background-color:rgba(var(--ep-black-color),1);text-align:center}.c_footer>a{color:rgba(var(--ep-white-color),1)}.replacements_log{-webkit-margin-before:var(--grid-big);margin-block-start:var(--grid-big);padding:1em}.replacements_log .title:before{-webkit-margin-end:0;margin-inline-end:0;top:calc(-1 * var(--grid-2));left:-3px}.replacements_log>li{-webkit-padding-before:var(--grid-1);padding-block-start:var(--grid-1);-webkit-margin-before:var(--grid-1);margin-block-start:var(--grid-1);font-size:9pt;line-height:10pt;border-top:1px solid rgba(var(--ep-black-color),0.2)}.replacements_log>li:first-child{-webkit-padding-before:0;padding-block-start:0;-webkit-margin-before:0;margin-block-start:0;border-top:none}.ep_verified_logo{-webkit-margin-after:1em;margin-block-end:1em;opacity:0.75;-webkit-transition:opacity 0.2s;transition:opacity 0.2s}.ep_verified_logo>svg{width:clamp(180px,30vw,13em)}.ep_verified_logo .st0{fill:rgba(var(--main-color),1)}.ep_verified_logo .st1{opacity:0.6;fill:none;stroke:rgba(var(--ep-white-color),1);stroke-width:8;stroke-miterlimit:10}.ep_verified_logo .st2{opacity:0.4;fill:none;stroke:rgba(var(--ep-white-color),1);stroke-width:4;stroke-miterlimit:10}.ep_verified_logo .st3{fill:none;stroke:rgba(var(--main-color),1);stroke-width:30;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.ep_verified_logo .st4{opacity:0.9}.ep_verified_logo .st5{fill:rgba(var(--ep-white-color),1)}.ep_verified_logo .st6{opacity:0.6}.ep_verified_logo .st7{opacity:0.5;fill:rgba(var(--ep-white-color),1)}.ep_verified_logo .st8{opacity:0.9;fill:none;stroke:rgba(var(--ep-orange-color),1);stroke-width:12;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.sided_circles{position:absolute;height:90%;overflow:hidden}@media screen and (max-width:45em){.sided_circles{display:none}}.sided_circles svg{height:100%}.sided_circles.reversed{bottom:0;right:0;-webkit-transform:scale(-1,-1);transform:scale(-1,-1)}.sided_circles:not(.reversed){top:0;left:0}.sided_circles .animated{-webkit-transform-origin:0 0 0;transform-origin:0 0 0;-webkit-transform:rotate(20deg);transform:rotate(20deg)}.sided_circles .animated.color_circles{-webkit-animation:translateOrbit 68s linear 0s infinite forwards;animation:translateOrbit 68s linear 0s infinite forwards}.sided_circles .animated.white_circles{-webkit-animation:translateOrbit 58s linear 0s infinite forwards;animation:translateOrbit 58s linear 0s infinite forwards}.sided_circles .st0,.sided_circles .st1{stroke:rgba(var(--main-color),1);stroke-width:0.3em}.sided_circles .st0{fill:rgba(var(--ep-orange-color),1)}.sided_circles .st1{fill:rgba(var(--ep-white-color),1)}@-webkit-keyframes translateOrbit{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes translateOrbit{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}"],sourceRoot:""}]),t.Z=o},82866:function(e,t,n){e.exports=n.g.EPREACTFRONT=n(86095)},75:function(e){(function(){var t,n,r,i,a,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-a)/1e6},n=process.hrtime,i=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})(),o=1e9*process.uptime(),a=i-o):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},54087:function(e,t,n){for(var r=n(75),i="undefined"==typeof window?n.g:window,a=["moz","webkit"],o="AnimationFrame",l=i["request"+o],s=i["cancel"+o]||i["cancelRequest"+o],c=0;!l&&c<a.length;c++)l=i[a[c]+"Request"+o],s=i[a[c]+"Cancel"+o]||i[a[c]+"CancelRequest"+o];if(!l||!s){var u=0,m=0,d=[];l=function(e){if(0===d.length){var t=r(),n=Math.max(0,16.666666666666668-(t-u));u=n+t,setTimeout((function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return d.push({handle:++m,callback:e,cancelled:!1}),m},s=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return l.call(i,e)},e.exports.cancel=function(){s.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=l,e.cancelAnimationFrame=s}},73935:function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(64448)},21101:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t._8=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];if(t.type!==l)return e;return r({},e,t.payload)};o(n(80439));var i=o(n(17970)),a=o(n(75252));function o(e){return e&&e.__esModule?e:{default:e}}i.default,a.default;var l="@@intl/UPDATE",s=function(e){var t=e.locale,n=e.formats,r=e.messages;return{type:l,payload:{locale:t,formats:n,messages:r}}},c={locale:"en",messages:{}}},89144:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e){return e&&e.__esModule?e:{default:e}}var o=a(n(94846)),l=a(n(79483)),s=a(n(44638)),c=a(n(34246)),u=a(n(54087)),m=a(n(27739)),d=a(n(67294)),p=a(n(45697)),f=1e3/60,_=function(e){function t(n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(e){var t=!1,n=i.state,a=n.currentStyle,o=n.currentVelocity,l=n.lastIdealStyle,s=n.lastIdealVelocity;for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var u=e[c];"number"==typeof u&&(t||(t=!0,a=r({},a),o=r({},o),l=r({},l),s=r({},s)),a[c]=u,o[c]=0,l[c]=u,s[c]=0)}t&&i.setState({currentStyle:a,currentVelocity:o,lastIdealStyle:l,lastIdealVelocity:s})},this.startAnimationIfNecessary=function(){i.animationID=u.default((function(e){var t=i.props.style;if(m.default(i.state.currentStyle,t,i.state.currentVelocity))return i.wasAnimating&&i.props.onRest&&i.props.onRest(),i.animationID=null,i.wasAnimating=!1,void(i.accumulatedTime=0);i.wasAnimating=!0;var n=e||c.default(),r=n-i.prevTime;if(i.prevTime=n,i.accumulatedTime=i.accumulatedTime+r,i.accumulatedTime>10*f&&(i.accumulatedTime=0),0===i.accumulatedTime)return i.animationID=null,void i.startAnimationIfNecessary();var a=(i.accumulatedTime-Math.floor(i.accumulatedTime/f)*f)/f,o=Math.floor(i.accumulatedTime/f),l={},u={},d={},p={};for(var _ in t)if(Object.prototype.hasOwnProperty.call(t,_)){var g=t[_];if("number"==typeof g)d[_]=g,p[_]=0,l[_]=g,u[_]=0;else{for(var v=i.state.lastIdealStyle[_],y=i.state.lastIdealVelocity[_],h=0;h<o;h++){var b=s.default(f/1e3,v,y,g.val,g.stiffness,g.damping,g.precision);v=b[0],y=b[1]}var E=s.default(f/1e3,v,y,g.val,g.stiffness,g.damping,g.precision),w=E[0],A=E[1];d[_]=v+(w-v)*a,p[_]=y+(A-y)*a,l[_]=v,u[_]=y}}i.animationID=null,i.accumulatedTime-=o*f,i.setState({currentStyle:d,currentVelocity:p,lastIdealStyle:l,lastIdealVelocity:u}),i.unreadPropStyle=null,i.startAnimationIfNecessary()}))},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"propTypes",value:{defaultStyle:p.default.objectOf(p.default.number),style:p.default.objectOf(p.default.oneOfType([p.default.number,p.default.object])).isRequired,children:p.default.func.isRequired,onRest:p.default.func},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyle,n=e.style,r=t||l.default(n),i=o.default(r);return{currentStyle:r,currentVelocity:i,lastIdealStyle:r,lastIdealVelocity:i}},t.prototype.componentDidMount=function(){this.prevTime=c.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=c.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(u.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyle);return e&&d.default.Children.only(e)},t}(d.default.Component);t.default=_,e.exports=t.default},26506:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e){return e&&e.__esModule?e:{default:e}}var o=a(n(94846)),l=a(n(79483)),s=a(n(44638)),c=a(n(34246)),u=a(n(54087)),m=a(n(27739)),d=a(n(67294)),p=a(n(45697)),f=1e3/60;var _=function(e){function t(n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n),this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=i.state,n=t.currentStyles,a=t.currentVelocities,o=t.lastIdealStyles,l=t.lastIdealVelocities,s=!1,c=0;c<e.length;c++){var u=e[c],m=!1;for(var d in u)if(Object.prototype.hasOwnProperty.call(u,d)){var p=u[d];"number"==typeof p&&(m||(m=!0,s=!0,n[c]=r({},n[c]),a[c]=r({},a[c]),o[c]=r({},o[c]),l[c]=r({},l[c])),n[c][d]=p,a[c][d]=0,o[c][d]=p,l[c][d]=0)}}s&&i.setState({currentStyles:n,currentVelocities:a,lastIdealStyles:o,lastIdealVelocities:l})},this.startAnimationIfNecessary=function(){i.animationID=u.default((function(e){var t=i.props.styles(i.state.lastIdealStyles);if(function(e,t,n){for(var r=0;r<e.length;r++)if(!m.default(e[r],t[r],n[r]))return!1;return!0}(i.state.currentStyles,t,i.state.currentVelocities))return i.animationID=null,void(i.accumulatedTime=0);var n=e||c.default(),r=n-i.prevTime;if(i.prevTime=n,i.accumulatedTime=i.accumulatedTime+r,i.accumulatedTime>10*f&&(i.accumulatedTime=0),0===i.accumulatedTime)return i.animationID=null,void i.startAnimationIfNecessary();for(var a=(i.accumulatedTime-Math.floor(i.accumulatedTime/f)*f)/f,o=Math.floor(i.accumulatedTime/f),l=[],u=[],d=[],p=[],_=0;_<t.length;_++){var g=t[_],v={},y={},h={},b={};for(var E in g)if(Object.prototype.hasOwnProperty.call(g,E)){var w=g[E];if("number"==typeof w)v[E]=w,y[E]=0,h[E]=w,b[E]=0;else{for(var A=i.state.lastIdealStyles[_][E],k=i.state.lastIdealVelocities[_][E],S=0;S<o;S++){var C=s.default(f/1e3,A,k,w.val,w.stiffness,w.damping,w.precision);A=C[0],k=C[1]}var O=s.default(f/1e3,A,k,w.val,w.stiffness,w.damping,w.precision),P=O[0],x=O[1];v[E]=A+(P-A)*a,y[E]=k+(x-k)*a,h[E]=A,b[E]=k}}d[_]=v,p[_]=y,l[_]=h,u[_]=b}i.animationID=null,i.accumulatedTime-=o*f,i.setState({currentStyles:d,currentVelocities:p,lastIdealStyles:l,lastIdealVelocities:u}),i.unreadPropStyles=null,i.startAnimationIfNecessary()}))},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"propTypes",value:{defaultStyles:p.default.arrayOf(p.default.objectOf(p.default.number)),styles:p.default.func.isRequired,children:p.default.func.isRequired},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=t||n().map(l.default),i=r.map((function(e){return o.default(e)}));return{currentStyles:r,currentVelocities:i,lastIdealStyles:r,lastIdealVelocities:i}},t.prototype.componentDidMount=function(){this.prevTime=c.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=c.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(u.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyles);return e&&d.default.Children.only(e)},t}(d.default.Component);t.default=_,e.exports=t.default},921:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e){return e&&e.__esModule?e:{default:e}}var o=a(n(94846)),l=a(n(79483)),s=a(n(44638)),c=a(n(48505)),u=a(n(34246)),m=a(n(54087)),d=a(n(27739)),p=a(n(67294)),f=a(n(45697)),_=1e3/60;function g(e,t,n){var r=t;return null==r?e.map((function(e,t){return{key:e.key,data:e.data,style:n[t]}})):e.map((function(e,t){for(var i=0;i<r.length;i++)if(r[i].key===e.key)return{key:r[i].key,data:r[i].data,style:n[t]};return{key:e.key,data:e.data,style:n[t]}}))}function v(e,t,n,r,i,a,l,s,u){for(var m=c.default(r,i,(function(e,r){var i=t(r);return null==i||d.default(a[e],i,l[e])?(n({key:r.key,data:r.data}),null):{key:r.key,data:r.data,style:i}})),p=[],f=[],_=[],g=[],v=0;v<m.length;v++){for(var y=m[v],h=null,b=0;b<r.length;b++)if(r[b].key===y.key){h=b;break}if(null==h){var E=e(y);p[v]=E,_[v]=E;var w=o.default(y.style);f[v]=w,g[v]=w}else p[v]=a[h],_[v]=s[h],f[v]=l[h],g[v]=u[h]}return[m,p,f,_,g]}var y=function(e){function t(n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n),this.unmounting=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=v(i.props.willEnter,i.props.willLeave,i.props.didLeave,i.state.mergedPropsStyles,e,i.state.currentStyles,i.state.currentVelocities,i.state.lastIdealStyles,i.state.lastIdealVelocities),n=t[0],a=t[1],o=t[2],l=t[3],s=t[4],c=0;c<e.length;c++){var u=e[c].style,m=!1;for(var d in u)if(Object.prototype.hasOwnProperty.call(u,d)){var p=u[d];"number"==typeof p&&(m||(m=!0,a[c]=r({},a[c]),o[c]=r({},o[c]),l[c]=r({},l[c]),s[c]=r({},s[c]),n[c]={key:n[c].key,data:n[c].data,style:r({},n[c].style)}),a[c][d]=p,o[c][d]=0,l[c][d]=p,s[c][d]=0,n[c].style[d]=p)}}i.setState({currentStyles:a,currentVelocities:o,mergedPropsStyles:n,lastIdealStyles:l,lastIdealVelocities:s})},this.startAnimationIfNecessary=function(){i.unmounting||(i.animationID=m.default((function(e){if(!i.unmounting){var t=i.props.styles,n="function"==typeof t?t(g(i.state.mergedPropsStyles,i.unreadPropStyles,i.state.lastIdealStyles)):t;if(function(e,t,n,r){if(r.length!==t.length)return!1;for(var i=0;i<r.length;i++)if(r[i].key!==t[i].key)return!1;for(i=0;i<r.length;i++)if(!d.default(e[i],t[i].style,n[i]))return!1;return!0}(i.state.currentStyles,n,i.state.currentVelocities,i.state.mergedPropsStyles))return i.animationID=null,void(i.accumulatedTime=0);var r=e||u.default(),a=r-i.prevTime;if(i.prevTime=r,i.accumulatedTime=i.accumulatedTime+a,i.accumulatedTime>10*_&&(i.accumulatedTime=0),0===i.accumulatedTime)return i.animationID=null,void i.startAnimationIfNecessary();for(var o=(i.accumulatedTime-Math.floor(i.accumulatedTime/_)*_)/_,l=Math.floor(i.accumulatedTime/_),c=v(i.props.willEnter,i.props.willLeave,i.props.didLeave,i.state.mergedPropsStyles,n,i.state.currentStyles,i.state.currentVelocities,i.state.lastIdealStyles,i.state.lastIdealVelocities),m=c[0],p=c[1],f=c[2],y=c[3],h=c[4],b=0;b<m.length;b++){var E=m[b].style,w={},A={},k={},S={};for(var C in E)if(Object.prototype.hasOwnProperty.call(E,C)){var O=E[C];if("number"==typeof O)w[C]=O,A[C]=0,k[C]=O,S[C]=0;else{for(var P=y[b][C],x=h[b][C],j=0;j<l;j++){var N=s.default(_/1e3,P,x,O.val,O.stiffness,O.damping,O.precision);P=N[0],x=N[1]}var T=s.default(_/1e3,P,x,O.val,O.stiffness,O.damping,O.precision),B=T[0],I=T[1];w[C]=P+(B-P)*o,A[C]=x+(I-x)*o,k[C]=P,S[C]=x}}y[b]=k,h[b]=S,p[b]=w,f[b]=A}i.animationID=null,i.accumulatedTime-=l*_,i.setState({currentStyles:p,currentVelocities:f,lastIdealStyles:y,lastIdealVelocities:h,mergedPropsStyles:m}),i.unreadPropStyles=null,i.startAnimationIfNecessary()}})))},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"propTypes",value:{defaultStyles:f.default.arrayOf(f.default.shape({key:f.default.string.isRequired,data:f.default.any,style:f.default.objectOf(f.default.number).isRequired})),styles:f.default.oneOfType([f.default.func,f.default.arrayOf(f.default.shape({key:f.default.string.isRequired,data:f.default.any,style:f.default.objectOf(f.default.oneOfType([f.default.number,f.default.object])).isRequired}))]).isRequired,children:f.default.func.isRequired,willEnter:f.default.func,willLeave:f.default.func,didLeave:f.default.func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(e){return l.default(e.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=e.willEnter,i=e.willLeave,a=e.didLeave,s="function"==typeof n?n(t):n,c=void 0;c=null==t?s:t.map((function(e){for(var t=0;t<s.length;t++)if(s[t].key===e.key)return s[t];return e}));var u=null==t?s.map((function(e){return l.default(e.style)})):t.map((function(e){return l.default(e.style)})),m=null==t?s.map((function(e){return o.default(e.style)})):t.map((function(e){return o.default(e.style)})),d=v(r,i,a,c,s,u,m,u,m),p=d[0];return{currentStyles:d[1],currentVelocities:d[2],lastIdealStyles:d[3],lastIdealVelocities:d[4],mergedPropsStyles:p}},t.prototype.componentDidMount=function(){this.prevTime=u.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(g(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=u.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){this.unmounting=!0,null!=this.animationID&&(m.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=g(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&p.default.Children.only(t)},t}(p.default.Component);t.default=y,e.exports=t.default},94846:function(e,t){"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=0);return t},e.exports=t.default},48505:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t,n){for(var r={},i=0;i<e.length;i++)r[e[i].key]=i;var a={};for(i=0;i<t.length;i++)a[t[i].key]=i;var o=[];for(i=0;i<t.length;i++)o[i]=t[i];for(i=0;i<e.length;i++)if(!Object.prototype.hasOwnProperty.call(a,e[i].key)){var l=n(i,e[i]);null!=l&&o.push(l)}return o.sort((function(e,n){var i=a[e.key],o=a[n.key],l=r[e.key],s=r[n.key];if(null!=i&&null!=o)return a[e.key]-a[n.key];if(null!=l&&null!=s)return r[e.key]-r[n.key];if(null!=i){for(var c=0;c<t.length;c++){var u=t[c].key;if(Object.prototype.hasOwnProperty.call(r,u)){if(i<a[u]&&s>r[u])return-1;if(i>a[u]&&s<r[u])return 1}}return 1}for(c=0;c<t.length;c++){u=t[c].key;if(Object.prototype.hasOwnProperty.call(r,u)){if(o<a[u]&&l>r[u])return 1;if(o>a[u]&&l<r[u])return-1}}return-1}))},e.exports=t.default},72392:function(e,t){"use strict";t.__esModule=!0,t.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},e.exports=t.default},37727:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e.default:e}var i=n(89144);t.y_=r(i),r(n(26506)),r(n(921));var a=n(20124);t.ST=r(a),r(n(72392)),r(n(79483)),r(n(49566))},49566:function(e,t){"use strict";t.__esModule=!0,t.default=function(){0};e.exports=t.default},27739:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t,n){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(0!==n[r])return!1;var i="number"==typeof t[r]?t[r]:t[r].val;if(e[r]!==i)return!1}return!0},e.exports=t.default},20124:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){return r({},l,t,{val:e})};var i,a=n(72392),o=(i=a)&&i.__esModule?i:{default:i},l=r({},o.default.noWobble,{precision:.01});e.exports=t.default},44638:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t,r,i,a,o,l){var s=r+(-a*(t-i)+-o*r)*e,c=t+s*e;if(Math.abs(s)<l&&Math.abs(c-i)<l)return n[0]=i,n[1]=0,n;return n[0]=c,n[1]=s,n};var n=[0,0];e.exports=t.default},79483:function(e,t){"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]="number"==typeof e[n]?e[n]:e[n].val);return t},e.exports=t.default},34246:function(e){(function(){var t,n,r;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-r)/1e6},n=process.hrtime,r=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})()):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},67294:function(e,t,n){"use strict";e.exports=n(72408)}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=r,a.amdO={},e=[],a.O=function(t,n,r,i){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],i=e[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(l=!1,i<o&&(o=i));if(l){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,r,i]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))},a.u=function(e){return e+".bundle.js"},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t={},n="easypromos:",a.l=function(e,r,i,o){if(t[e])t[e].push(r);else{var l,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var m=c[u];if(m.getAttribute("src")==e||m.getAttribute("data-webpack")==n+i){l=m;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",n+i),l.src=e),t[e]=[r];var d=function(n,r){l.onerror=l.onload=null,clearTimeout(p);var i=t[e];if(delete t[e],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach((function(e){return e(r)})),n)return n(r)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=d.bind(null,l.onerror),l.onload=d.bind(null,l.onload),s&&document.head.appendChild(l)}},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},a.j=538,a.p="/js/bundle/",function(){var e={538:0};a.f.j=function(t,n){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,i){r=e[t]=[n,i]}));n.push(r[2]=i);var o=a.p+a.u(t),l=new Error;a.l(o,(function(n){if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,r[1](l)}}),"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,i,o=n[0],l=n[1],s=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(s)var u=s(a)}for(t&&t(n);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},n=self.webpackChunkeasypromos=self.webpackChunkeasypromos||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),a.nc=void 0;var o=a.O(void 0,[592],(function(){return a(86095)}));o=a.O(o)}();
//# sourceMappingURL=front.bundle.js.map